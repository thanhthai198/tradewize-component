{"version":3,"names":["_propTypes","_interopRequireDefault","require","_react","_interopRequireWildcard","_reactNative","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_defineProperty","_toPropertyKey","value","enumerable","configurable","writable","_toPrimitive","Symbol","toPrimitive","TypeError","String","Number","Indicator","PureComponent","constructor","props","animationState","savedValue","animating","state","progress","Animated","Value","hideAnimation","componentDidMount","startAnimation","componentDidUpdate","prevProps","resumeAnimation","stopAnimation","hideAnimationDuration","duration","timing","toValue","useNativeDriver","start","interaction","animationEasing","animationDuration","animation","easing","isInteraction","loop","listener","addListener","removeListener","saveAnimation","finished","setValue","renderComponent","_item","index","count","render","hidesWhenStopped","style","Array","isArray","opacity","filter","Boolean","React","createElement","View","from","exports","Easing","linear","PropTypes","func","number","bool"],"sources":["index.ts"],"sourcesContent":["import PropTypes from 'prop-types';\nimport React, { PureComponent } from 'react';\nimport { Animated, Easing } from 'react-native';\n\nexport default class Indicator extends PureComponent {\n  static defaultProps = {\n    animationEasing: Easing.linear,\n    animationDuration: 1200,\n    hideAnimationDuration: 200,\n\n    animating: true,\n    interaction: true,\n    hidesWhenStopped: true,\n\n    count: 1,\n  };\n\n  static propTypes = {\n    animationEasing: PropTypes.func,\n    animationDuration: PropTypes.number,\n    hideAnimationDuration: PropTypes.number,\n\n    animating: PropTypes.bool,\n    interaction: PropTypes.bool,\n    hidesWhenStopped: PropTypes.bool,\n\n    renderComponent: PropTypes.func,\n    count: PropTypes.number,\n  };\n  animationState: number;\n  savedValue: number;\n\n  constructor(props: any) {\n    super(props);\n\n    /*\n     *  0 -> 1\n     *    | startAnimation\n     *    | resumeAnimation\n     *\n     *  1 -> -1\n     *    | stopAnimation\n     *\n     * -1 -> 0\n     *    | saveAnimation\n     */\n    this.animationState = 0;\n    this.savedValue = 0;\n\n    let { animating }: any = this.props;\n\n    this.state = {\n      progress: new Animated.Value(0),\n      hideAnimation: new Animated.Value(animating ? 1 : 0),\n    };\n  }\n\n  componentDidMount() {\n    let { animating }: any = this.props;\n\n    if (animating) {\n      this.startAnimation();\n    }\n  }\n\n  componentDidUpdate(prevProps: any) {\n    let { animating }: any = this.props;\n\n    if (animating && !prevProps.animating) {\n      this.resumeAnimation();\n    }\n\n    if (!animating && prevProps.animating) {\n      this.stopAnimation();\n    }\n\n    if (animating ^ prevProps.animating) {\n      let { hideAnimation }: any = this.state;\n      let { hideAnimationDuration: duration }: any = this.props;\n\n      Animated.timing(hideAnimation, {\n        toValue: animating ? 1 : 0,\n        duration,\n        useNativeDriver: false,\n      }).start() as any;\n    }\n  }\n\n  startAnimation() {\n    let { progress }: any = this.state;\n    let { interaction, animationEasing, animationDuration }: any = this.props;\n\n    if (0 !== this.animationState) {\n      return;\n    }\n\n    let animation = Animated.timing(progress, {\n      duration: animationDuration,\n      easing: animationEasing,\n      useNativeDriver: true,\n      isInteraction: interaction,\n      toValue: 1,\n    });\n\n    Animated.loop(animation).start() as any;\n\n    this.animationState = 1;\n  }\n\n  stopAnimation() {\n    let { progress }: any = this.state;\n\n    if (1 !== this.animationState) {\n      return;\n    }\n\n    let listener = progress.addListener(({ value }: any) => {\n      progress.removeListener(listener);\n      progress.stopAnimation(() => this.saveAnimation(value));\n    });\n\n    this.animationState = -1;\n  }\n\n  saveAnimation(value: number) {\n    let { animating }: any = this.props;\n\n    this.savedValue = value;\n    this.animationState = 0;\n\n    if (animating) {\n      this.resumeAnimation();\n    }\n  }\n\n  resumeAnimation() {\n    let { progress }: any = this.state;\n    let { interaction, animationDuration }: any = this.props;\n\n    if (0 !== this.animationState) {\n      return;\n    }\n\n    Animated.timing(progress, {\n      useNativeDriver: true,\n      isInteraction: interaction,\n      duration: (1 - this.savedValue) * animationDuration,\n      toValue: 1,\n    }).start(({ finished }) => {\n      if (finished) {\n        progress.setValue(0);\n\n        this.animationState = 0;\n        this.startAnimation();\n      }\n    });\n\n    this.savedValue = 0;\n    this.animationState = 1;\n  }\n\n  renderComponent(_item: any, index: number) {\n    let { progress }: any = this.state;\n    let { renderComponent, count }: any = this.props;\n\n    if ('function' === typeof renderComponent) {\n      return renderComponent({ index, count, progress });\n    }\n\n    return null;\n  }\n\n  render() {\n    let { hideAnimation }: any = this.state;\n    let { count, hidesWhenStopped, ...props }: any = this.props;\n\n    if (hidesWhenStopped) {\n      props.style = [\n        ...(Array.isArray(props.style) ? props.style : [props.style]),\n        { opacity: hideAnimation },\n      ].filter(Boolean);\n    }\n    return React.createElement(\n      Animated.View,\n      props,\n      Array.from(new Array(count), this.renderComponent, this)\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}