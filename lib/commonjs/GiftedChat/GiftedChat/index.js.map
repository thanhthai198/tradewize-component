{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNativeActionSheet","_dayjs","_interopRequireDefault","_localizedFormat","_reactNative","_Actions","_Avatar","_Bubble","_Composer","_Constant","_Day","_GiftedAvatar","_GiftedChatContext","_InputToolbar","_LoadEarlier","_Message","_MessageContainer","_MessageText","_Send","_SystemMessage","_Time","_utils","utils","exports","_reactNativeReanimated","_reactNativeKeyboardController","_reactNativeImageViewing","_styles","_styles2","_MessageWithReaction","_MediaAllShow","_reactNativeImageCropPicker","_VideoModal","_Camera","_ImageDrawingCanvas","_types","Object","keys","forEach","key","prototype","hasOwnProperty","call","_exportNames","defineProperty","enumerable","get","e","__esModule","default","t","WeakMap","r","n","o","i","f","__proto__","has","set","getOwnPropertyDescriptor","_extends","assign","bind","arguments","length","apply","dayjs","extend","localizedFormat","GiftedChat","props","messages","initialText","isTyping","messageIdGenerator","Math","random","toString","substring","valueOf","user","onSend","locale","renderLoading","actionSheet","textInputProps","renderChatFooter","renderInputToolbar","bottomOffset","focusOnInputWhenOpeningKeyboard","keyboardShouldPersistTaps","Platform","select","ios","android","onInputTextChanged","maxInputLength","inverted","minComposerHeight","MIN_COMPOSER_HEIGHT","maxComposerHeight","MAX_COMPOSER_HEIGHT","isKeyboardInternallyHandled","onReactionEmoji","labelReaction","onFocusInput","onBlurInput","isShowEmojiReaction","useScrollView","actionSheetRef","useRef","messageContainerRef","useMemo","createRef","textInputRef","isTextInputWasFocused","isInitialized","setIsInitialized","useState","composerHeight","setComposerHeight","text","setText","isImageViewerVisible","setIsImageViewerVisible","fileSelected","setFileSelected","isShowVideoModal","setIsShowVideoModal","isTypingDisabled","setIsTypingDisabled","isShowCameraModal","setIsShowCameraModal","isMediaAllShow","setIsMediaAllShow","fileMediaAllLocal","setFileMediaAllLocal","arrMessage","setArrMessage","messageReaction","setMessageReaction","isModalReaction","setIsModalReaction","messageSelected","setMessageSelected","fileMedia","setFileMedia","fileMediaEdit","setFileMediaEdit","fileMediaEditLocal","setFileMediaEditLocal","keyboard","useReanimatedKeyboardAnimation","trackingKeyboardMovement","useSharedValue","debounceEnableTypingTimeoutId","undefined","keyboardOffsetBottom","contentStyleAnim","useAnimatedStyle","transform","translateY","height","value","getTextFromProp","useCallback","fallback","handleTextInputFocusWhenKeyboardHide","_textInputRef$current","current","isFocused","handleTextInputFocusWhenKeyboardShow","focus","disableTyping","clearTimeout","enableTyping","debounceEnableTyping","setTimeout","scrollToBottom","isAnimated","scrollViewRef","scrollTo","y","animated","scrollToEnd","animatedListRef","scrollToOffset","offset","handlePressFile","file","type","typeFile","uri","console","log","renderMessages","messagesContainerStyle","messagesContainerProps","createElement","View","style","stylesCommon","fill","invertibleScrollViewProps","forwardRef","onLongPressReaction","message","position","onPressFile","isShowAll","arrMedia","notifyInputTextReset","resetInputToolbar","_textInputRef$current2","clear","_onSend","shouldResetInputToolbar","_messages$","_messages","Array","isArray","convertFileMedia","map","item","thumbnailPreview","mine","getFileTypeFromPath","newMessages","createdAt","Date","_id","newMessagesWithReaction","isReply","messageReply","onInputSizeChanged","size","newComposerHeight","max","min","_onInputTextChanged","_text","onPressPickMedia","result","ImageCropPicker","openPicker","multiple","fileMediaAll","path","sourceURL","id","filename","name","fileExtension","split","pop","width","onInitialLayoutViewLayout","layout","nativeEvent","inputToolbarFragment","_messageReaction$user","inputToolbarProps","onTextChanged","ref","maxLength","InputToolbar","onEditFileImage","isMe","clearMessageReaction","onRemoveFile","newFileMedia","filter","disableComposer","handleReactionEmoji","emoji","messageId","handleActionReaction","action","Clipboard","setString","contextValues","showActionSheetWithOptions","getLocale","useEffect","prepareMessage","reverse","useAnimatedReaction","prevValue","isKeyboardMovingUp","withTiming","duration","runOnJS","GiftedChatContext","Provider","ActionSheetProvider","testID","TEST_ID","WRAPPER","styles","contentContainer","onLayout","top","left","right","bottom","pointerEvents","backgroundColor","images","imageIndex","visible","onRequestClose","VideoModal","txtSkipButton","onClose","subtitle","source","autoPlay","isProgressBar","MessageWithReaction","isShowEmoji","onActionReaction","isVisible","MediaAllShow","CameraModal","mode","isCanPause","onVideoRecorded","video","_video$path","_video$path2","_getThumbnail$","getThumbnail","generateThumbnails","normalizeFileUri","videoFile","onPhotoCaptured","photo","_photo$path","_photo$path2","img","isModal","uriImage","onSave","prev","GiftedChatWrapper","KeyboardProvider","append","currentMessages","concat","prepend"],"sources":["index.tsx"],"sourcesContent":["/* eslint-disable react-native/no-inline-styles */\nimport React, {\n  createRef,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n  useCallback,\n  type RefObject,\n} from 'react';\nimport {\n  ActionSheetProvider,\n  type ActionSheetProviderRef,\n} from '@expo/react-native-action-sheet';\nimport dayjs from 'dayjs';\nimport localizedFormat from 'dayjs/plugin/localizedFormat';\nimport {\n  Platform,\n  TextInput,\n  View,\n  Clipboard,\n  ScrollView,\n  type LayoutChangeEvent,\n} from 'react-native';\nimport { Actions } from '../Actions';\nimport { Avatar } from '../Avatar';\nimport Bubble from '../Bubble';\nimport { Composer } from '../Composer';\nimport { MAX_COMPOSER_HEIGHT, MIN_COMPOSER_HEIGHT, TEST_ID } from '../Constant';\nimport { Day } from '../Day';\nimport { GiftedAvatar } from '../GiftedAvatar';\nimport { GiftedChatContext } from '../GiftedChatContext';\nimport { InputToolbar } from '../InputToolbar';\nimport { LoadEarlier } from '../LoadEarlier';\nimport Message from '../Message';\nimport MessageContainer, { type AnimatedList } from '../MessageContainer';\nimport { MessageText } from '../MessageText';\nimport { type FileMessage, type IMessage, type User } from '../types';\nimport { Send } from '../Send';\nimport { SystemMessage } from '../SystemMessage';\nimport { Time } from '../Time';\nimport * as utils from '../utils';\nimport Animated, {\n  useAnimatedStyle,\n  useAnimatedReaction,\n  useSharedValue,\n  withTiming,\n  runOnJS,\n} from 'react-native-reanimated';\nimport {\n  KeyboardProvider,\n  useReanimatedKeyboardAnimation,\n} from 'react-native-keyboard-controller';\nimport { type GiftedChatProps } from './types';\nimport ImageView from 'react-native-image-viewing';\n\nimport stylesCommon from '../styles';\nimport styles from './styles';\nimport { MessageWithReaction } from '../MessageWithReaction';\nimport { MediaAllShow } from '../MediaAllShow';\nimport { generateThumbnails, normalizeFileUri } from '../utils';\nimport ImageCropPicker from 'react-native-image-crop-picker';\nimport { VideoModal } from '../../VideoPlayer/VideoModal';\nimport { CameraModal } from '../../Camera';\nimport ImageDrawingCanvas from '../../ImageDrawingCanvas';\n\ndayjs.extend(localizedFormat);\n\nfunction GiftedChat<TMessage extends IMessage = IMessage>(\n  props: GiftedChatProps<TMessage>\n) {\n  const {\n    messages = [],\n    initialText = '',\n    isTyping,\n\n    // \"random\" function from here: https://stackoverflow.com/a/8084248/3452513\n    // we do not use uuid since it would add extra native dependency (https://www.npmjs.com/package/react-native-get-random-values)\n    // lib's user can decide which algorithm to use and pass it as a prop\n    messageIdGenerator = () =>\n      (Math.random() + 1).toString(36).substring(7) + dayjs().valueOf(),\n\n    user = {},\n    onSend,\n    locale = 'en',\n    renderLoading,\n    actionSheet = null,\n    textInputProps,\n    renderChatFooter = null,\n    renderInputToolbar = null,\n    bottomOffset = 0,\n    focusOnInputWhenOpeningKeyboard = true,\n    keyboardShouldPersistTaps = Platform.select({\n      ios: 'never',\n      android: 'always',\n      default: 'never',\n    }),\n    onInputTextChanged = null,\n    maxInputLength = null,\n    inverted = true,\n    minComposerHeight = MIN_COMPOSER_HEIGHT,\n    maxComposerHeight = MAX_COMPOSER_HEIGHT,\n    isKeyboardInternallyHandled = true,\n    onReactionEmoji = null,\n    labelReaction,\n    onFocusInput,\n    onBlurInput,\n    isShowEmojiReaction = true,\n    useScrollView = false,\n  } = props;\n\n  const actionSheetRef = useRef<ActionSheetProviderRef>(null);\n\n  const messageContainerRef = useMemo(\n    () =>\n      props.messageContainerRef ||\n      createRef<AnimatedList<TMessage> | ScrollView>(),\n    [props.messageContainerRef]\n  ) as RefObject<AnimatedList<TMessage> | ScrollView>;\n\n  const textInputRef = useMemo(\n    () => props.textInputRef || createRef<TextInput>(),\n    [props.textInputRef]\n  );\n\n  const isTextInputWasFocused = useRef(false);\n\n  const [isInitialized, setIsInitialized] = useState<boolean>(false);\n  const [composerHeight, setComposerHeight] = useState<number>(\n    minComposerHeight!\n  );\n  const [text, setText] = useState<string | undefined>(() => props.text || '');\n  const [isImageViewerVisible, setIsImageViewerVisible] =\n    useState<boolean>(false);\n  const [fileSelected, setFileSelected] = useState<{ uri: string } | null>(\n    null\n  );\n  const [isShowVideoModal, setIsShowVideoModal] = useState<boolean>(false);\n  const [isTypingDisabled, setIsTypingDisabled] = useState<boolean>(false);\n  const [isShowCameraModal, setIsShowCameraModal] = useState<boolean>(false);\n\n  const [isMediaAllShow, setIsMediaAllShow] = useState<boolean>(false);\n  const [fileMediaAllLocal, setFileMediaAllLocal] = useState<IMessage | null>(\n    null\n  );\n  const [arrMessage, setArrMessage] = useState<TMessage[]>(messages);\n  const [messageReaction, setMessageReaction] = useState<\n    (IMessage & { isReply: boolean }) | null\n  >(null);\n\n  const [isModalReaction, setIsModalReaction] = useState<boolean>(false);\n  const [messageSelected, setMessageSelected] = useState<{\n    message: TMessage;\n    position: {\n      x: number;\n      y: number;\n      width: number;\n      height: number;\n      pageX: number;\n      pageY: number;\n    };\n  } | null>(null);\n  const [fileMedia, setFileMedia] = useState<FileMessage[]>([]);\n  const [fileMediaEdit, setFileMediaEdit] = useState<boolean>(false);\n  const [fileMediaEditLocal, setFileMediaEditLocal] =\n    useState<FileMessage | null>(null);\n  const keyboard = useReanimatedKeyboardAnimation();\n  const trackingKeyboardMovement = useSharedValue(false);\n  const debounceEnableTypingTimeoutId =\n    useRef<ReturnType<typeof setTimeout>>(undefined);\n  const keyboardOffsetBottom = useSharedValue(0);\n\n  const contentStyleAnim = useAnimatedStyle(\n    () => ({\n      transform: [\n        { translateY: keyboard.height.value - keyboardOffsetBottom.value },\n      ],\n    }),\n    [keyboard, keyboardOffsetBottom]\n  );\n\n  const getTextFromProp = useCallback(\n    (fallback: string) => {\n      if (props.text === undefined) return fallback;\n\n      return props.text;\n    },\n    [props.text]\n  );\n\n  /**\n   * Store text input focus status when keyboard hide to retrieve\n   * it afterwards if needed.\n   * `onKeyboardWillHide` may be called twice in sequence so we\n   * make a guard condition (eg. showing image picker)\n   */\n  const handleTextInputFocusWhenKeyboardHide = useCallback(() => {\n    if (!isTextInputWasFocused.current)\n      isTextInputWasFocused.current =\n        textInputRef.current?.isFocused() || false;\n  }, [textInputRef]);\n\n  /**\n   * Refocus the text input only if it was focused before showing keyboard.\n   * This is needed in some cases (eg. showing image picker).\n   */\n  const handleTextInputFocusWhenKeyboardShow = useCallback(() => {\n    if (\n      textInputRef.current &&\n      isTextInputWasFocused.current &&\n      !textInputRef.current.isFocused()\n    )\n      textInputRef.current.focus();\n\n    // Reset the indicator since the keyboard is shown\n    isTextInputWasFocused.current = false;\n  }, [textInputRef]);\n\n  const disableTyping = useCallback(() => {\n    clearTimeout(debounceEnableTypingTimeoutId.current);\n    setIsTypingDisabled(true);\n  }, []);\n\n  const enableTyping = useCallback(() => {\n    clearTimeout(debounceEnableTypingTimeoutId.current);\n    setIsTypingDisabled(false);\n  }, []);\n\n  const debounceEnableTyping = useCallback(() => {\n    clearTimeout(debounceEnableTypingTimeoutId.current);\n    debounceEnableTypingTimeoutId.current = setTimeout(() => {\n      enableTyping();\n    }, 50);\n  }, [enableTyping]);\n\n  const scrollToBottom = useCallback(\n    (isAnimated = true) => {\n      if (!messageContainerRef?.current) return;\n\n      // Type-safe check for ScrollView\n      if (\n        'scrollTo' in messageContainerRef.current &&\n        'scrollToEnd' in messageContainerRef.current\n      ) {\n        // ScrollView case\n        const scrollViewRef = messageContainerRef.current as ScrollView;\n        if (inverted) {\n          scrollViewRef.scrollTo({\n            y: 0,\n            animated: isAnimated,\n          });\n        } else {\n          scrollViewRef.scrollToEnd({ animated: isAnimated });\n        }\n      } else if ('scrollToOffset' in messageContainerRef.current) {\n        // AnimatedList case\n        const animatedListRef =\n          messageContainerRef.current as AnimatedList<TMessage>;\n        if (inverted) {\n          animatedListRef.scrollToOffset({\n            offset: 0,\n            animated: isAnimated,\n          });\n        } else {\n          if ('scrollToEnd' in animatedListRef) {\n            animatedListRef.scrollToEnd({ animated: isAnimated });\n          }\n        }\n      }\n    },\n    [inverted, messageContainerRef]\n  );\n\n  const handlePressFile = useCallback((file: FileMessage) => {\n    const type = file?.typeFile;\n    switch (type) {\n      case 'video':\n        setFileSelected({\n          uri: file.uri,\n        });\n        setTimeout(() => {\n          setIsShowVideoModal(true);\n        }, 100);\n        break;\n      case 'image':\n        setFileSelected({\n          uri: file.uri,\n        });\n        setTimeout(() => {\n          setIsImageViewerVisible(true);\n        }, 100);\n        break;\n      default:\n        console.log('unknown');\n        break;\n    }\n  }, []);\n\n  const renderMessages = useMemo(() => {\n    if (!isInitialized) return null;\n\n    const { messagesContainerStyle, ...messagesContainerProps } = props;\n\n    return (\n      <View style={[stylesCommon.fill, messagesContainerStyle]}>\n        <MessageContainer<TMessage>\n          {...messagesContainerProps}\n          invertibleScrollViewProps={{\n            inverted,\n            keyboardShouldPersistTaps,\n          }}\n          messages={arrMessage}\n          forwardRef={messageContainerRef}\n          isTyping={isTyping}\n          useScrollView={useScrollView}\n          onLongPressReaction={(message, position) => {\n            setMessageSelected({\n              message,\n              position,\n            });\n            setTimeout(() => {\n              setIsModalReaction(true);\n            }, 100);\n          }}\n          onPressFile={(\n            file: FileMessage,\n            isShowAll?: boolean,\n            arrMedia?: IMessage\n          ) => {\n            if (isShowAll) {\n              setFileMediaAllLocal(arrMedia || ({} as IMessage));\n              setTimeout(() => {\n                setIsMediaAllShow(true);\n              }, 100);\n              return;\n            }\n            handlePressFile(file);\n          }}\n        />\n        {renderChatFooter?.()}\n      </View>\n    );\n  }, [\n    isInitialized,\n    isTyping,\n    arrMessage,\n    props,\n    inverted,\n    keyboardShouldPersistTaps,\n    messageContainerRef,\n    renderChatFooter,\n    handlePressFile,\n    useScrollView,\n  ]);\n\n  const notifyInputTextReset = useCallback(() => {\n    onInputTextChanged?.('');\n  }, [onInputTextChanged]);\n\n  const resetInputToolbar = useCallback(() => {\n    textInputRef.current?.clear();\n\n    notifyInputTextReset();\n\n    setComposerHeight(minComposerHeight!);\n    setText(getTextFromProp(''));\n    enableTyping();\n  }, [\n    minComposerHeight,\n    getTextFromProp,\n    textInputRef,\n    notifyInputTextReset,\n    enableTyping,\n  ]);\n\n  const _onSend = useCallback(\n    // eslint-disable-next-line @typescript-eslint/no-shadow\n    (messages: TMessage[] = [], shouldResetInputToolbar = false) => {\n      if (!Array.isArray(messages)) messages = [messages];\n\n      if (!messages[0]?.text && fileMedia?.length <= 0) return;\n\n      const convertFileMedia = fileMedia?.map((item) => {\n        return {\n          ...item,\n          uri: item?.uri || '',\n          thumbnailPreview: item?.thumbnailPreview || '',\n          mine: utils.getFileTypeFromPath(item?.uri || ''),\n        };\n      });\n\n      const newMessages: TMessage[] = messages?.map((message) => {\n        return {\n          ...message,\n          user: user!,\n          createdAt: new Date(),\n          _id: messageIdGenerator?.(),\n          file: convertFileMedia,\n        };\n      });\n\n      if (shouldResetInputToolbar === true) {\n        disableTyping();\n        resetInputToolbar();\n      }\n\n      setFileMedia([]);\n      let newMessagesWithReaction = newMessages;\n\n      if (messageReaction && messageReaction?.isReply) {\n        newMessagesWithReaction = newMessages.map((message) => {\n          return { ...message, messageReply: messageReaction };\n        });\n      }\n\n      console.log('newMessagesWithReaction', newMessagesWithReaction);\n\n      setMessageReaction(null);\n      onSend?.(newMessagesWithReaction);\n\n      setTimeout(() => scrollToBottom(), 10);\n    },\n    [\n      onSend,\n      user,\n      messageIdGenerator,\n      fileMedia,\n      disableTyping,\n      resetInputToolbar,\n      scrollToBottom,\n      messageReaction,\n    ]\n  );\n\n  const onInputSizeChanged = useCallback(\n    (size: { height: number }) => {\n      const newComposerHeight = Math.max(\n        minComposerHeight!,\n        Math.min(maxComposerHeight!, size.height)\n      );\n\n      setComposerHeight(newComposerHeight);\n    },\n    [maxComposerHeight, minComposerHeight]\n  );\n\n  const _onInputTextChanged = useCallback(\n    (_text: string) => {\n      if (isTypingDisabled) return;\n\n      onInputTextChanged?.(_text);\n\n      // Only set state if it's not being overridden by a prop.\n      if (props.text === undefined) setText(_text);\n    },\n    [onInputTextChanged, isTypingDisabled, props.text]\n  );\n\n  const onPressPickMedia = useCallback(\n    async (type: 'camera' | 'pick') => {\n      if (type === 'camera') {\n        setIsShowCameraModal(true);\n      } else {\n        const result = await ImageCropPicker.openPicker({\n          multiple: true,\n        });\n        const fileMediaAll = result?.map((item) => {\n          const uri = item.path || item.sourceURL;\n\n          return {\n            uri: uri,\n            id: dayjs().valueOf().toString() + item?.filename,\n            size: item?.size || 0,\n            name: item?.filename || '',\n            fileExtension: `.${uri?.split('.').pop()}` || '',\n            typeFile: 'image',\n            thumbnailPreview: uri,\n            width: item?.width,\n            height: item?.height,\n          };\n        });\n\n        setFileMedia([...fileMedia, ...fileMediaAll] as FileMessage[]);\n      }\n    },\n    [fileMedia]\n  );\n\n  const onInitialLayoutViewLayout = useCallback(\n    (e: LayoutChangeEvent) => {\n      if (isInitialized) return;\n\n      const { layout } = e.nativeEvent;\n\n      if (layout.height <= 0) return;\n\n      notifyInputTextReset();\n\n      setIsInitialized(true);\n      setComposerHeight(minComposerHeight!);\n      setText(getTextFromProp(initialText));\n    },\n    [\n      isInitialized,\n      initialText,\n      minComposerHeight,\n      notifyInputTextReset,\n      getTextFromProp,\n    ]\n  );\n\n  const inputToolbarFragment = useMemo(() => {\n    if (!isInitialized) return null;\n\n    const inputToolbarProps = {\n      ...props,\n      text: getTextFromProp(text!),\n      composerHeight: Math.max(minComposerHeight!, composerHeight),\n      onSend: _onSend,\n      onInputSizeChanged,\n      onTextChanged: _onInputTextChanged,\n      textInputProps: {\n        ...textInputProps,\n        ref: textInputRef,\n        maxLength: isTypingDisabled ? 0 : maxInputLength,\n      },\n    };\n\n    if (renderInputToolbar) return renderInputToolbar(inputToolbarProps);\n\n    return (\n      <InputToolbar\n        onEditFileImage={(file: FileMessage) => {\n          setFileMediaEdit(true);\n          setFileMediaEditLocal(file);\n        }}\n        isMe={(user as User)?._id === messageReaction?.user?._id}\n        onFocusInput={onFocusInput}\n        onBlurInput={onBlurInput}\n        labelReaction={labelReaction}\n        messageReaction={messageReaction as IMessage & { isReply: boolean }}\n        clearMessageReaction={() => setMessageReaction(null)}\n        onRemoveFile={(file: FileMessage) => {\n          const newFileMedia = fileMedia.filter((item) => item.id !== file.id);\n          setFileMedia(newFileMedia);\n        }}\n        onPressFile={(file: FileMessage) => {\n          handlePressFile(file);\n        }}\n        fileMedia={fileMedia}\n        onPressPickMedia={onPressPickMedia}\n        disableComposer={props.disableComposer}\n        {...inputToolbarProps}\n      />\n    );\n  }, [\n    isInitialized,\n    _onSend,\n    getTextFromProp,\n    maxInputLength,\n    minComposerHeight,\n    onInputSizeChanged,\n    props,\n    text,\n    renderInputToolbar,\n    composerHeight,\n    isTypingDisabled,\n    textInputRef,\n    textInputProps,\n    _onInputTextChanged,\n    onPressPickMedia,\n    fileMedia,\n    handlePressFile,\n    messageReaction,\n    labelReaction,\n    onFocusInput,\n    onBlurInput,\n    user,\n  ]);\n\n  const handleReactionEmoji = useCallback(\n    (emoji: string, messageId: string) => {\n      onReactionEmoji?.(emoji, messageId);\n    },\n    [onReactionEmoji]\n  );\n\n  const handleActionReaction = useCallback(\n    (message: IMessage, action: string) => {\n      switch (action) {\n        case 'reply':\n          setMessageReaction({ ...message, isReply: true });\n          break;\n        case 'copy':\n          Clipboard.setString(message.text || '');\n          break;\n        case 'other':\n          // setMessageReaction({ ...message, isOther: true });\n          break;\n        default:\n          setMessageReaction(null);\n      }\n    },\n    []\n  );\n\n  const contextValues = useMemo(\n    () => ({\n      actionSheet:\n        actionSheet ||\n        (() => ({\n          showActionSheetWithOptions:\n            actionSheetRef.current!.showActionSheetWithOptions,\n        })),\n      getLocale: () => locale,\n    }),\n    [actionSheet, locale]\n  );\n\n  useEffect(() => {\n    if (props.text != null) setText(props.text);\n  }, [props.text]);\n\n  useEffect(() => {\n    const prepareMessage = inverted ? messages : [...messages].reverse();\n    setArrMessage(prepareMessage);\n  }, [messages, inverted]);\n\n  useAnimatedReaction(\n    () => -keyboard.height.value,\n    (value, prevValue) => {\n      if (prevValue !== null && value !== prevValue) {\n        const isKeyboardMovingUp = value > prevValue;\n        if (isKeyboardMovingUp !== trackingKeyboardMovement.value) {\n          trackingKeyboardMovement.value = isKeyboardMovingUp;\n          keyboardOffsetBottom.value = withTiming(\n            isKeyboardMovingUp ? bottomOffset : 0,\n            {\n              // If `bottomOffset` exists, we change the duration to a smaller value to fix the delay in the keyboard animation speed\n              duration: bottomOffset ? 150 : 400,\n            }\n          );\n\n          if (focusOnInputWhenOpeningKeyboard)\n            if (isKeyboardMovingUp)\n              runOnJS(handleTextInputFocusWhenKeyboardShow)();\n            else runOnJS(handleTextInputFocusWhenKeyboardHide)();\n\n          if (value === 0) {\n            runOnJS(enableTyping)();\n          } else {\n            runOnJS(disableTyping)();\n            runOnJS(debounceEnableTyping)();\n          }\n        }\n      }\n    },\n    [\n      keyboard,\n      trackingKeyboardMovement,\n      focusOnInputWhenOpeningKeyboard,\n      handleTextInputFocusWhenKeyboardHide,\n      handleTextInputFocusWhenKeyboardShow,\n      enableTyping,\n      disableTyping,\n      debounceEnableTyping,\n      bottomOffset,\n    ]\n  );\n\n  return (\n    <GiftedChatContext.Provider value={contextValues}>\n      <ActionSheetProvider ref={actionSheetRef}>\n        <View\n          testID={TEST_ID.WRAPPER}\n          style={[stylesCommon.fill, styles.contentContainer]}\n          onLayout={onInitialLayoutViewLayout}\n        >\n          {isInitialized ? (\n            <Animated.View\n              style={[\n                stylesCommon.fill,\n                isKeyboardInternallyHandled && contentStyleAnim,\n              ]}\n            >\n              {renderMessages}\n              {inputToolbarFragment}\n              <View\n                style={{\n                  position: 'absolute',\n                  top: 0,\n                  left: 0,\n                  right: 0,\n                  bottom: 0,\n                  pointerEvents: 'box-none',\n                  backgroundColor: 'transparent',\n                }}\n              >\n                <ImageView\n                  images={fileSelected ? [{ uri: fileSelected.uri }] : []}\n                  imageIndex={0}\n                  visible={isImageViewerVisible}\n                  onRequestClose={() => setIsImageViewerVisible(false)}\n                />\n                <VideoModal\n                  txtSkipButton={'X'}\n                  visible={isShowVideoModal}\n                  onClose={() => setIsShowVideoModal(false)}\n                  subtitle={{}}\n                  source={fileSelected?.uri || ''}\n                  autoPlay={true}\n                  isProgressBar={false}\n                />\n                <MessageWithReaction\n                  isShowEmoji={isShowEmojiReaction}\n                  onReactionEmoji={handleReactionEmoji}\n                  onActionReaction={handleActionReaction}\n                  user={user as User}\n                  isVisible={isModalReaction}\n                  onClose={() => setIsModalReaction(false)}\n                  message={messageSelected?.message || ({} as TMessage)}\n                  position={messageSelected?.position || ({} as any)}\n                />\n                <MediaAllShow\n                  fileMediaAll={fileMediaAllLocal}\n                  isVisible={isMediaAllShow}\n                  onClose={() => setIsMediaAllShow(false)}\n                  onPressFile={(file) => {\n                    setIsMediaAllShow(false);\n                    setTimeout(() => {\n                      handlePressFile(file);\n                    }, 350);\n                  }}\n                />\n                <CameraModal\n                  mode=\"both\"\n                  isCanPause={false}\n                  onVideoRecorded={async (video) => {\n                    const getThumbnail = await generateThumbnails([\n                      {\n                        uri: normalizeFileUri(video.path),\n                        id: dayjs().valueOf().toString(),\n                        size: video?.size || 0,\n                      },\n                    ]);\n                    setIsShowCameraModal(false);\n                    const videoFile = {\n                      uri: normalizeFileUri(video.path),\n                      id: dayjs().valueOf().toString(),\n                      size: video?.size || 0,\n                      name:\n                        video?.path?.split('/').pop() ||\n                        `video - ${dayjs().valueOf().toString()}`,\n                      fileExtension: `.${video?.path?.split('.').pop()}`,\n                      typeFile: 'video',\n                      width: video?.width,\n                      height: video?.height,\n                      duration: video?.duration,\n                      thumbnailPreview: getThumbnail[0]?.path || '',\n                    };\n\n                    setFileMedia([...fileMedia, videoFile as FileMessage]);\n                  }}\n                  onPhotoCaptured={(photo) => {\n                    setIsShowCameraModal(false);\n\n                    const img = {\n                      uri: normalizeFileUri(photo.path),\n                      id: dayjs().valueOf().toString(),\n                      size: photo?.size || 0,\n                      name:\n                        photo?.path?.split('/').pop() ||\n                        `image - ${dayjs().valueOf().toString()}`,\n                      fileExtension: `.${photo?.path?.split('.').pop()}`,\n                      typeFile: 'image',\n                      thumbnailPreview: normalizeFileUri(photo?.path || ''),\n                      width: photo?.width,\n                      height: photo?.height,\n                    };\n                    setFileMedia([...fileMedia, img as FileMessage]);\n                  }}\n                  visible={isShowCameraModal}\n                  onClose={() => setIsShowCameraModal(false)}\n                />\n                <ImageDrawingCanvas\n                  isModal\n                  visible={fileMediaEdit}\n                  uriImage={fileMediaEditLocal?.uri || ''}\n                  onClose={() => setFileMediaEdit(false)}\n                  onSave={(uri: string) => {\n                    setFileMedia((prev) => {\n                      const newFileMedia = prev.map((item) => {\n                        if (item.id === fileMediaEditLocal?.id) {\n                          return { ...item, uri: uri, thumbnailPreview: uri };\n                        }\n                        return item;\n                      });\n                      return newFileMedia;\n                    });\n                    setFileMediaEditLocal(null);\n                  }}\n                />\n              </View>\n            </Animated.View>\n          ) : (\n            renderLoading?.()\n          )}\n        </View>\n      </ActionSheetProvider>\n    </GiftedChatContext.Provider>\n  );\n}\n\nfunction GiftedChatWrapper<TMessage extends IMessage = IMessage>(\n  props: GiftedChatProps<TMessage>\n) {\n  return (\n    <KeyboardProvider>\n      <GiftedChat<TMessage> {...props} />\n    </KeyboardProvider>\n  );\n}\n\nGiftedChatWrapper.append = <TMessage extends IMessage>(\n  currentMessages: TMessage[] = [],\n  messages: TMessage[],\n  inverted = true\n) => {\n  if (!Array.isArray(messages)) messages = [messages];\n\n  return inverted\n    ? messages.concat(currentMessages)\n    : currentMessages.concat(messages);\n};\n\nGiftedChatWrapper.prepend = <TMessage extends IMessage>(\n  currentMessages: TMessage[] = [],\n  messages: TMessage[],\n  inverted = true\n) => {\n  if (!Array.isArray(messages)) messages = [messages];\n\n  return inverted\n    ? currentMessages.concat(messages)\n    : messages.concat(currentMessages);\n};\n\nexport * from '../types';\n\nexport {\n  GiftedChatWrapper as GiftedChat,\n  Actions,\n  Avatar,\n  Bubble,\n  SystemMessage,\n  MessageText,\n  Composer,\n  Day,\n  InputToolbar,\n  LoadEarlier,\n  Message,\n  MessageContainer,\n  Send,\n  Time,\n  GiftedAvatar,\n  utils,\n};\n"],"mappings":"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","ignoreList":[]}