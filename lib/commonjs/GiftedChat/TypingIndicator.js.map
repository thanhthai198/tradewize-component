{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_Color","_interopRequireDefault","e","__esModule","default","t","WeakMap","r","n","o","i","f","__proto__","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","TypingIndicator","size","speed","dotColor","Color","defaultBlue","bubbleColor","leftBubbleBackground","style","v1","useRef","Animated","Value","current","v2","v3","animate","v","delay","loop","sequence","timing","toValue","duration","useNativeDriver","useEffect","a1","a2","a3","start","stop","dotAnimStyle","opacity","interpolate","inputRange","outputRange","transform","translateY","scale","dotBase","width","height","borderRadius","backgroundColor","marginHorizontal","Math","max","round","createElement","View","styles","container","paddingVertical","paddingHorizontal","StyleSheet","create","flexDirection","alignItems","alignSelf","justifyContent","borderWidth","borderColor","defaultColor","marginBottom","marginLeft","_default","exports"],"sources":["TypingIndicator.tsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport { Animated, View, StyleSheet, type ViewStyle } from 'react-native';\r\nimport Color from './Color';\r\n\r\ntype Props = {\r\n  size?: number; // đường kính mỗi chấm\r\n  speed?: number; // ms cho 1 nhịp lên/xuống\r\n  dotColor?: string;\r\n  bubbleColor?: string;\r\n  style?: ViewStyle | ViewStyle[];\r\n};\r\n\r\nconst TypingIndicator = ({\r\n  size = 6,\r\n  speed = 320,\r\n  dotColor = Color.defaultBlue,\r\n  bubbleColor = Color.leftBubbleBackground,\r\n  style,\r\n}: Props) => {\r\n  const v1 = useRef(new Animated.Value(0)).current;\r\n  const v2 = useRef(new Animated.Value(0)).current;\r\n  const v3 = useRef(new Animated.Value(0)).current;\r\n\r\n  const animate = (v: Animated.Value, delay: number) =>\r\n    Animated.loop(\r\n      Animated.sequence([\r\n        Animated.delay(delay),\r\n        Animated.timing(v, {\r\n          toValue: 1,\r\n          duration: speed,\r\n          useNativeDriver: true,\r\n        }),\r\n        Animated.timing(v, {\r\n          toValue: 0,\r\n          duration: speed,\r\n          useNativeDriver: true,\r\n        }),\r\n      ])\r\n    );\r\n\r\n  useEffect(() => {\r\n    const a1 = animate(v1, 0);\r\n    const a2 = animate(v2, speed / 2);\r\n    const a3 = animate(v3, speed);\r\n\r\n    a1.start();\r\n    a2.start();\r\n    a3.start();\r\n    return () => {\r\n      a1.stop();\r\n      a2.stop();\r\n      a3.stop();\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [speed, v1, v2, v3]);\r\n\r\n  const dotAnimStyle = (v: Animated.Value) => ({\r\n    opacity: v.interpolate({ inputRange: [0, 1], outputRange: [0.3, 1] }),\r\n    transform: [\r\n      {\r\n        translateY: v.interpolate({ inputRange: [0, 1], outputRange: [0, -1] }),\r\n      },\r\n      { scale: v.interpolate({ inputRange: [0, 1], outputRange: [1, 1.15] }) },\r\n    ],\r\n  });\r\n\r\n  const dotBase = {\r\n    width: size,\r\n    height: size,\r\n    borderRadius: size / 2,\r\n    backgroundColor: dotColor,\r\n    marginHorizontal: Math.max(1, Math.round(size * 0.33)),\r\n  };\r\n\r\n  return (\r\n    <View\r\n      style={[\r\n        styles.container,\r\n        {\r\n          backgroundColor: bubbleColor,\r\n          paddingVertical: Math.max(4, Math.round(size * 0.8)),\r\n          paddingHorizontal: Math.max(6, Math.round(size * 1.2)),\r\n          borderRadius: Math.round(size * 2.2),\r\n        },\r\n        style,\r\n      ]}\r\n    >\r\n      <Animated.View style={[dotBase, dotAnimStyle(v1)]} />\r\n      <Animated.View style={[dotBase, dotAnimStyle(v2)]} />\r\n      <Animated.View style={[dotBase, dotAnimStyle(v3)]} />\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    alignSelf: 'flex-start',\r\n    height: 24,\r\n    width: 56,\r\n    justifyContent: 'center',\r\n    borderWidth: 0.2,\r\n    borderColor: Color.defaultColor,\r\n    marginBottom: 8,\r\n    marginLeft: 8,\r\n  },\r\n});\r\n\r\nexport default TypingIndicator;\r\n"],"mappings":"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","ignoreList":[]}