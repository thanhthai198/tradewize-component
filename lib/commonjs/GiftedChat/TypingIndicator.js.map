{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_Color","_interopRequireDefault","e","__esModule","default","t","WeakMap","r","n","o","i","f","__proto__","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","TypingIndicator","size","speed","dotColor","Color","defaultBlue","bubbleColor","leftBubbleBackground","style","isTyping","v1","useRef","Animated","Value","current","v2","v3","animate","v","delay","loop","sequence","timing","toValue","duration","useNativeDriver","useEffect","a1","a2","a3","start","stop","dotAnimStyle","opacity","interpolate","inputRange","outputRange","transform","translateY","scale","dotBase","width","height","borderRadius","backgroundColor","marginHorizontal","Math","max","round","createElement","View","styles","space","container","paddingVertical","paddingHorizontal","StyleSheet","create","flexDirection","alignItems","alignSelf","justifyContent","borderWidth","borderColor","defaultColor","marginBottom","marginLeft","_default","exports"],"sources":["TypingIndicator.tsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport { Animated, View, StyleSheet, type ViewStyle } from 'react-native';\nimport Color from './Color';\n\ntype Props = {\n  isTyping: boolean;\n  size?: number; // đường kính mỗi chấm\n  speed?: number; // ms cho 1 nhịp lên/xuống\n  dotColor?: string;\n  bubbleColor?: string;\n  style?: ViewStyle | ViewStyle[];\n};\n\nconst TypingIndicator = ({\n  size = 6,\n  speed = 320,\n  dotColor = Color.defaultBlue,\n  bubbleColor = Color.leftBubbleBackground,\n  style,\n  isTyping,\n}: Props) => {\n  const v1 = useRef(new Animated.Value(0)).current;\n  const v2 = useRef(new Animated.Value(0)).current;\n  const v3 = useRef(new Animated.Value(0)).current;\n\n  const animate = (v: Animated.Value, delay: number) =>\n    Animated.loop(\n      Animated.sequence([\n        Animated.delay(delay),\n        Animated.timing(v, {\n          toValue: 1,\n          duration: speed,\n          useNativeDriver: true,\n        }),\n        Animated.timing(v, {\n          toValue: 0,\n          duration: speed,\n          useNativeDriver: true,\n        }),\n      ])\n    );\n\n  useEffect(() => {\n    const a1 = animate(v1, 0);\n    const a2 = animate(v2, speed / 2);\n    const a3 = animate(v3, speed);\n\n    a1.start();\n    a2.start();\n    a3.start();\n    return () => {\n      a1.stop();\n      a2.stop();\n      a3.stop();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [speed, v1, v2, v3]);\n\n  const dotAnimStyle = (v: Animated.Value) => ({\n    opacity: v.interpolate({ inputRange: [0, 1], outputRange: [0.3, 1] }),\n    transform: [\n      {\n        translateY: v.interpolate({ inputRange: [0, 1], outputRange: [0, -1] }),\n      },\n      { scale: v.interpolate({ inputRange: [0, 1], outputRange: [1, 1.15] }) },\n    ],\n  });\n\n  const dotBase = {\n    width: size,\n    height: size,\n    borderRadius: size / 2,\n    backgroundColor: dotColor,\n    marginHorizontal: Math.max(1, Math.round(size * 0.33)),\n  };\n\n  if (!isTyping) {\n    return <View style={styles.space} />;\n  }\n\n  return (\n    <View\n      style={[\n        styles.container,\n        {\n          opacity: isTyping ? 1 : 0,\n        },\n        {\n          backgroundColor: bubbleColor,\n          paddingVertical: Math.max(4, Math.round(size * 0.8)),\n          paddingHorizontal: Math.max(6, Math.round(size * 1.2)),\n          borderRadius: Math.round(size * 2.2),\n        },\n        style,\n      ]}\n    >\n      <Animated.View style={[dotBase, dotAnimStyle(v1)]} />\n      <Animated.View style={[dotBase, dotAnimStyle(v2)]} />\n      <Animated.View style={[dotBase, dotAnimStyle(v3)]} />\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    alignSelf: 'flex-start',\n    height: 24,\n    width: 56,\n    justifyContent: 'center',\n    borderWidth: 0.2,\n    borderColor: Color.defaultColor,\n    marginBottom: 8,\n    marginLeft: 8,\n  },\n  space: {\n    height: 12,\n  },\n});\n\nexport default TypingIndicator;\n"],"mappings":"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","ignoreList":[]}