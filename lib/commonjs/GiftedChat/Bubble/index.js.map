{"version":3,"names":["_react","require","_reactNative","_GiftedChatContext","_QuickReplies","_MessageText","_MessageAudio","_Time","_utils","_styles","_interopRequireDefault","_styles2","_MessageFile","_ButtonBase","_types","Object","keys","forEach","key","prototype","hasOwnProperty","call","_exportNames","exports","defineProperty","enumerable","get","e","__esModule","default","_extends","assign","bind","n","arguments","length","t","r","apply","Bubble","props","currentMessage","nextMessage","position","containerToNextStyle","previousMessage","containerToPreviousStyle","onQuickReply","renderQuickReplySend","quickReplyStyle","quickReplyTextStyle","quickReplyContainerStyle","containerStyle","wrapperStyle","bottomContainerStyle","onPressFile","onLongPressReaction","context","useChatContext","messageWidth","setMessageWidth","useState","innerRef","useRef","refArrThumbnail","onPress","useCallback","onLongPress","optionTitles","options","cancelButtonIndex","actionSheet","showActionSheetWithOptions","buttonIndex","console","log","styledBubbleToNext","isSameUser","isSameDay","styles","containerToNext","styledBubbleToPrevious","containerToPrevious","renderQuickReplies","quickReplies","quickReplyProps","React","createElement","QuickReplies","onSaveThumbnail","file","current","renderMessageText","text","messageTextProps","MessageText","renderMessageFile","messageFileProps","renderCustomMessageFile","MessageFile","renderMessageAudio","audio","messageAudioProps","MessageAudio","renderTicks","user","_id","sent","received","pending","View","style","content","tickView","Text","tick","tickStyle","renderTime","createdAt","textStyle","timeProps","Time","renderUsername","renderUsernameOnMessage","usernameView","username","usernameStyle","name","renderCustomView","renderBubbleContent","isCustomViewBottom","stylesCommon","fill","container","marginBottom","isLast","maxWidth","onLayout","width","nativeEvent","layout","toString","wrapper","TouchableWithoutFeedback","touchableProps","ButtonBase","node","findNodeHandle","UIManager","measure","x","y","height","pageX","pageY","message","ref","bottom","_default"],"sources":["index.tsx"],"sourcesContent":["/* eslint-disable react-native/no-inline-styles */\n/* eslint-disable @typescript-eslint/no-shadow */\nimport type { JSX } from 'react';\nimport { useCallback, useRef, useState } from 'react';\nimport {\n  findNodeHandle,\n  Text,\n  TouchableWithoutFeedback,\n  UIManager,\n  View,\n} from 'react-native';\n\nimport { useChatContext } from '../GiftedChatContext';\nimport { QuickReplies } from '../QuickReplies';\nimport { MessageText } from '../MessageText';\nimport { MessageAudio } from '../MessageAudio';\nimport { Time } from '../Time';\n\nimport { isSameUser, isSameDay } from '../utils';\nimport type { FileMessage, IMessage } from '../types';\nimport type { BubbleProps } from './types';\n\nimport stylesCommon from '../styles';\nimport styles from './styles';\nimport { MessageFile } from '../MessageFile';\nimport { ButtonBase } from '../../ButtonBase';\n\nexport * from './types';\n\nconst Bubble = <TMessage extends IMessage = IMessage>(\n  props: BubbleProps<TMessage>\n): JSX.Element => {\n  const {\n    currentMessage,\n    nextMessage,\n    position,\n    containerToNextStyle,\n    previousMessage,\n    containerToPreviousStyle,\n    onQuickReply,\n    renderQuickReplySend,\n    quickReplyStyle,\n    quickReplyTextStyle,\n    quickReplyContainerStyle,\n    containerStyle,\n    wrapperStyle,\n    bottomContainerStyle,\n    onPressFile,\n    onLongPressReaction,\n  } = props;\n\n  const context = useChatContext();\n  const [messageWidth, setMessageWidth] = useState<{\n    width: number;\n    _id: string;\n  } | null>(null);\n  const innerRef = useRef<View>(null);\n  const refArrThumbnail = useRef<FileMessage[]>([]);\n\n  const onPress = useCallback(() => {\n    if (props.onPress) props.onPress(context, currentMessage);\n  }, [context, props, currentMessage]);\n\n  const onLongPress = useCallback(() => {\n    const { onLongPress, optionTitles } = props;\n\n    if (onLongPress) {\n      onLongPress(context, currentMessage);\n      return;\n    }\n\n    if (!optionTitles?.length) return;\n\n    const options = optionTitles;\n    const cancelButtonIndex = options.length - 1;\n\n    (context as any).actionSheet().showActionSheetWithOptions(\n      {\n        options,\n        cancelButtonIndex,\n      },\n      (buttonIndex: number) => {\n        console.log('onLongPress', { buttonIndex });\n      }\n    );\n  }, [currentMessage, context, props]);\n\n  const styledBubbleToNext = useCallback(() => {\n    if (\n      currentMessage &&\n      nextMessage &&\n      position &&\n      isSameUser(currentMessage, nextMessage) &&\n      isSameDay(currentMessage, nextMessage)\n    )\n      return [\n        styles[position].containerToNext,\n        containerToNextStyle?.[position],\n      ];\n\n    return null;\n  }, [currentMessage, nextMessage, position, containerToNextStyle]);\n\n  const styledBubbleToPrevious = useCallback(() => {\n    if (\n      currentMessage &&\n      previousMessage &&\n      position &&\n      isSameUser(currentMessage, previousMessage) &&\n      isSameDay(currentMessage, previousMessage)\n    )\n      return [\n        styles[position].containerToPrevious,\n        containerToPreviousStyle && containerToPreviousStyle[position],\n      ];\n\n    return null;\n  }, [currentMessage, previousMessage, position, containerToPreviousStyle]);\n\n  const renderQuickReplies = useCallback(() => {\n    if (currentMessage?.quickReplies) {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      const { containerStyle, wrapperStyle, ...quickReplyProps } = props;\n\n      if (props.renderQuickReplies)\n        return props.renderQuickReplies(quickReplyProps);\n\n      return (\n        <QuickReplies\n          currentMessage={currentMessage}\n          onQuickReply={onQuickReply}\n          renderQuickReplySend={renderQuickReplySend}\n          quickReplyStyle={quickReplyStyle}\n          quickReplyTextStyle={quickReplyTextStyle}\n          quickReplyContainerStyle={quickReplyContainerStyle}\n          nextMessage={nextMessage}\n        />\n      );\n    }\n\n    return null;\n  }, [\n    currentMessage,\n    onQuickReply,\n    renderQuickReplySend,\n    quickReplyStyle,\n    quickReplyTextStyle,\n    quickReplyContainerStyle,\n    nextMessage,\n    props,\n  ]);\n\n  const onSaveThumbnail = useCallback((file: FileMessage[]) => {\n    refArrThumbnail.current = file;\n  }, []);\n\n  const renderMessageText = useCallback(() => {\n    if (currentMessage?.text) {\n      const {\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        containerStyle,\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        wrapperStyle,\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        optionTitles,\n        ...messageTextProps\n      } = props;\n\n      if (props.renderMessageText)\n        return props.renderMessageText(messageTextProps);\n\n      return <MessageText {...messageTextProps} />;\n    }\n    return null;\n  }, [props, currentMessage]);\n\n  const renderMessageFile = useCallback(() => {\n    if (!currentMessage?.file) return null;\n\n    const {\n      /* eslint-disable @typescript-eslint/no-unused-vars */\n      containerStyle,\n      wrapperStyle,\n      /* eslint-enable @typescript-eslint/no-unused-vars */\n      ...messageFileProps\n    } = props;\n\n    if (props.renderCustomMessageFile)\n      return props.renderCustomMessageFile(messageFileProps);\n\n    return (\n      <MessageFile\n        onSaveThumbnail={onSaveThumbnail}\n        onPressFile={onPressFile}\n        messageWidth={messageWidth}\n        {...messageFileProps}\n      />\n    );\n  }, [currentMessage, props, messageWidth, onPressFile, onSaveThumbnail]);\n\n  const renderMessageAudio = useCallback(() => {\n    if (!currentMessage?.audio) return null;\n\n    const {\n      /* eslint-disable @typescript-eslint/no-unused-vars */\n      containerStyle,\n      wrapperStyle,\n      /* eslint-enable @typescript-eslint/no-unused-vars */\n      ...messageAudioProps\n    } = props;\n\n    if (props.renderMessageAudio)\n      return props.renderMessageAudio(messageAudioProps);\n\n    return <MessageAudio />;\n  }, [props, currentMessage]);\n\n  const renderTicks = useCallback(() => {\n    const { renderTicks, user } = props;\n\n    if (renderTicks && currentMessage) return renderTicks(currentMessage);\n\n    if (user && currentMessage?.user && currentMessage.user._id !== user._id)\n      return null;\n\n    if (\n      currentMessage &&\n      (currentMessage.sent || currentMessage.received || currentMessage.pending)\n    )\n      return (\n        <View style={styles.content.tickView}>\n          {!!currentMessage.sent && (\n            <Text style={[styles.content.tick, props.tickStyle]}>{'âœ“'}</Text>\n          )}\n          {!!currentMessage.received && (\n            <Text style={[styles.content.tick, props.tickStyle]}>{'âœ“'}</Text>\n          )}\n          {!!currentMessage.pending && (\n            <Text style={[styles.content.tick, props.tickStyle]}>{'ðŸ•“'}</Text>\n          )}\n        </View>\n      );\n\n    return null;\n  }, [props, currentMessage]);\n\n  const renderTime = useCallback(() => {\n    if (currentMessage?.createdAt) {\n      const {\n        /* eslint-disable @typescript-eslint/no-unused-vars */\n        containerStyle,\n        wrapperStyle,\n        textStyle,\n        /* eslint-enable @typescript-eslint/no-unused-vars */\n        ...timeProps\n      } = props;\n\n      if (props.renderTime) return props.renderTime(timeProps);\n\n      return <Time {...timeProps} />;\n    }\n    return null;\n  }, [props, currentMessage]);\n\n  const renderUsername = useCallback(() => {\n    const { user, renderUsername } = props;\n\n    if (props.renderUsernameOnMessage && currentMessage) {\n      if (user && currentMessage.user._id === user._id) return null;\n\n      if (renderUsername) return renderUsername(currentMessage.user);\n\n      return (\n        <View style={styles.content.usernameView}>\n          <Text style={[styles.content.username, props.usernameStyle]}>\n            {'~ '}\n            {currentMessage.user.name}\n          </Text>\n        </View>\n      );\n    }\n\n    return null;\n  }, [currentMessage, props]);\n\n  const renderCustomView = useCallback(() => {\n    if (props.renderCustomView) return props.renderCustomView(props);\n\n    return null;\n  }, [props]);\n\n  const renderBubbleContent = useCallback(() => {\n    return (\n      <View>\n        {!props.isCustomViewBottom && renderCustomView()}\n        {renderMessageFile()}\n        {renderMessageAudio()}\n        {renderMessageText()}\n        {props.isCustomViewBottom && renderCustomView()}\n      </View>\n    );\n  }, [\n    renderCustomView,\n    renderMessageAudio,\n    renderMessageText,\n    props.isCustomViewBottom,\n    renderMessageFile,\n  ]);\n\n  return (\n    <View\n      style={[\n        stylesCommon.fill,\n        styles[position].container,\n        containerStyle && containerStyle[position],\n        { marginBottom: currentMessage?.isLast ? 32 : 8, maxWidth: '90%' },\n      ]}\n      onLayout={(e) => {\n        if (currentMessage?._id) {\n          setMessageWidth({\n            width: e.nativeEvent.layout.width,\n            _id: currentMessage?._id.toString(),\n          });\n        }\n      }}\n    >\n      <View\n        style={[\n          styles[position].wrapper,\n          styledBubbleToNext(),\n          styledBubbleToPrevious(),\n          wrapperStyle && wrapperStyle[position],\n        ]}\n      >\n        <TouchableWithoutFeedback\n          onPress={onPress}\n          onLongPress={onLongPress}\n          {...props.touchableProps}\n        >\n          <ButtonBase\n            onLongPress={() => {\n              if (innerRef.current) {\n                const node = findNodeHandle(innerRef.current);\n                if (node) {\n                  UIManager.measure(\n                    node,\n                    (\n                      x: number,\n                      y: number,\n                      width: number,\n                      height: number,\n                      pageX: number,\n                      pageY: number\n                    ) => {\n                      const message = {\n                        ...currentMessage,\n                        file: refArrThumbnail?.current,\n                      };\n\n                      onLongPressReaction?.(message, {\n                        x,\n                        y,\n                        width,\n                        height,\n                        pageX,\n                        pageY,\n                      });\n                    }\n                  );\n                }\n              }\n            }}\n          >\n            <View ref={innerRef}>\n              {renderBubbleContent()}\n              <View\n                style={[\n                  styles[position].bottom,\n                  bottomContainerStyle?.[position],\n                ]}\n              >\n                {renderUsername()}\n                {renderTime()}\n                {renderTicks()}\n              </View>\n            </View>\n          </ButtonBase>\n        </TouchableWithoutFeedback>\n      </View>\n      {renderQuickReplies()}\n    </View>\n  );\n};\n\nexport default Bubble;\n"],"mappings":"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","ignoreList":[]}