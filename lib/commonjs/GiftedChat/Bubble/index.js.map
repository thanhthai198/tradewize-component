{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_GiftedChatContext","_QuickReplies","_MessageText","_MessageAudio","_Time","_utils","_styles","_interopRequireDefault","_styles2","_MessageFile","_Color","_MessageReply","_ButtonBase","_IndicatorsMaster","_reactNativeFastImage","_types","Object","keys","forEach","key","prototype","hasOwnProperty","call","_exportNames","exports","defineProperty","enumerable","get","e","__esModule","default","t","WeakMap","r","n","o","i","f","__proto__","has","set","getOwnPropertyDescriptor","_extends","assign","bind","arguments","length","apply","Bubble","props","_props$user2","currentMessage","nextMessage","position","previousMessage","containerToPreviousStyle","onQuickReply","renderQuickReplySend","quickReplyStyle","quickReplyTextStyle","quickReplyContainerStyle","containerStyle","wrapperStyle","bottomContainerStyle","onPressFile","onLongPressReaction","context","useChatContext","messageWidth","setMessageWidth","useState","innerRef","useRef","refArrThumbnail","onPress","useCallback","onLongPress","optionTitles","options","cancelButtonIndex","actionSheet","showActionSheetWithOptions","buttonIndex","console","log","onLongPressItem","current","node","findNodeHandle","UIManager","measure","x","y","width","height","pageX","pageY","message","file","error","styledBubbleToPrevious","isSameUser","isSameDay","styles","containerToPrevious","renderQuickReplies","quickReplies","quickReplyProps","createElement","QuickReplies","onSaveThumbnail","renderMessageText","text","messageTextProps","MessageText","renderMessageFile","messageFileProps","renderCustomMessageFile","MessageFile","onLongPressFile","renderMessageAudio","audio","messageAudioProps","MessageAudio","renderTicks","user","_id","sent","received","pending","View","style","content","tickView","Text","tick","tickStyle","renderTime","createdAt","textStyle","timeProps","Time","renderUsername","renderUsernameOnMessage","usernameView","username","usernameStyle","name","renderCustomView","renderReactionEmoji","_props$user","isCurrentUser","reactionPosition","reactionEmoji","backgroundColor","Color","white","borderRadius","justifyContent","alignItems","borderWidth","borderColor","leftBubbleBackground","bottom","zIndex","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","left","right","fontSize","renderBubbleContent","isCustomViewBottom","renderMessageReply","messageReply","MessageReply","stylesCommon","fill","container","marginBottom","isLast","maxWidth","onLayout","nativeEvent","layout","toString","wrapper","TouchableWithoutFeedback","touchableProps","ButtonBase","ref","isSending","paddingHorizontal","MaterialIndicator","color","defaultColor","size","animationDuration","errorMessage","marginTop","flexDirection","gap","source","fontWeight","alizarin","_default"],"sources":["index.tsx"],"sourcesContent":["/* eslint-disable react-native/no-inline-styles */\n/* eslint-disable @typescript-eslint/no-shadow */\nimport React, { useCallback, useRef, useState } from 'react';\nimport type { JSX } from 'react';\nimport {\n  findNodeHandle,\n  Text,\n  TouchableWithoutFeedback,\n  UIManager,\n  View,\n} from 'react-native';\n\nimport { useChatContext } from '../GiftedChatContext';\nimport { QuickReplies } from '../QuickReplies';\nimport { MessageText } from '../MessageText';\nimport { MessageAudio } from '../MessageAudio';\nimport { Time } from '../Time';\n\nimport { isSameUser, isSameDay } from '../utils';\nimport type { FileMessage, IMessage } from '../types';\nimport type { BubbleProps } from './types';\n\nimport stylesCommon from '../styles';\nimport styles from './styles';\nimport { MessageFile } from '../MessageFile';\nimport Color from '../Color';\nimport { MessageReply } from '../MessageReply';\nimport { ButtonBase } from '../../ButtonBase';\nimport { MaterialIndicator } from '../../IndicatorsMaster';\nimport FastImage from 'react-native-fast-image';\n\nexport * from './types';\n\nconst Bubble = <TMessage extends IMessage = IMessage>(\n  props: BubbleProps<TMessage>\n): JSX.Element => {\n  const {\n    currentMessage,\n    nextMessage,\n    position,\n    // containerToNextStyle,\n    previousMessage,\n    containerToPreviousStyle,\n    onQuickReply,\n    renderQuickReplySend,\n    quickReplyStyle,\n    quickReplyTextStyle,\n    quickReplyContainerStyle,\n    containerStyle,\n    wrapperStyle,\n    bottomContainerStyle,\n    onPressFile,\n    onLongPressReaction,\n  } = props;\n\n  const context = useChatContext();\n  const [messageWidth, setMessageWidth] = useState<{\n    width: number;\n    _id: string;\n  } | null>(null);\n  const innerRef = useRef<View>(null);\n  const refArrThumbnail = useRef<FileMessage[]>([]);\n\n  const onPress = useCallback(() => {\n    if (props.onPress) props.onPress(context, currentMessage);\n  }, [context, props, currentMessage]);\n\n  const onLongPress = useCallback(() => {\n    const { onLongPress, optionTitles } = props;\n\n    if (onLongPress) {\n      onLongPress(context, currentMessage);\n      return;\n    }\n\n    if (!optionTitles?.length) return;\n\n    const options = optionTitles;\n    const cancelButtonIndex = options.length - 1;\n\n    (context as any).actionSheet().showActionSheetWithOptions(\n      {\n        options,\n        cancelButtonIndex,\n      },\n      (buttonIndex: number) => {\n        console.log('onLongPress', { buttonIndex });\n      }\n    );\n  }, [currentMessage, context, props]);\n\n  const onLongPressItem = useCallback(() => {\n    try {\n      if (innerRef.current) {\n        const node = findNodeHandle(innerRef.current);\n        if (node) {\n          UIManager.measure(\n            node,\n            (\n              x: number,\n              y: number,\n              width: number,\n              height: number,\n              pageX: number,\n              pageY: number\n            ) => {\n              const message = {\n                ...currentMessage,\n                file: refArrThumbnail?.current,\n              };\n\n              onLongPressReaction?.(message, {\n                x,\n                y,\n                width,\n                height,\n                pageX,\n                pageY,\n              });\n            }\n          );\n        }\n      }\n    } catch (error) {\n      console.log('onLongPressItem', error);\n    }\n  }, [currentMessage, onLongPressReaction]);\n\n  // const styledBubbleToNext = useCallback(() => {\n  //   if (\n  //     currentMessage &&\n  //     nextMessage &&\n  //     position &&\n  //     isSameUser(currentMessage, nextMessage) &&\n  //     isSameDay(currentMessage, nextMessage)\n  //   )\n  //     return [styles[position].containerToNext, containerToNextStyle?.[position]];\n\n  //   return null;\n  // }, [currentMessage, nextMessage, position, containerToNextStyle]);\n\n  const styledBubbleToPrevious = useCallback(() => {\n    if (\n      currentMessage &&\n      previousMessage &&\n      position &&\n      isSameUser(currentMessage, previousMessage) &&\n      isSameDay(currentMessage, previousMessage)\n    )\n      return [\n        styles[position].containerToPrevious,\n        containerToPreviousStyle && containerToPreviousStyle[position],\n      ];\n\n    return null;\n  }, [currentMessage, previousMessage, position, containerToPreviousStyle]);\n\n  const renderQuickReplies = useCallback(() => {\n    if (currentMessage?.quickReplies) {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      const { containerStyle, wrapperStyle, ...quickReplyProps } = props;\n\n      if (props.renderQuickReplies)\n        return props.renderQuickReplies(quickReplyProps);\n\n      return (\n        <QuickReplies\n          currentMessage={currentMessage}\n          onQuickReply={onQuickReply}\n          renderQuickReplySend={renderQuickReplySend}\n          quickReplyStyle={quickReplyStyle}\n          quickReplyTextStyle={quickReplyTextStyle}\n          quickReplyContainerStyle={quickReplyContainerStyle}\n          nextMessage={nextMessage}\n        />\n      );\n    }\n\n    return null;\n  }, [\n    currentMessage,\n    onQuickReply,\n    renderQuickReplySend,\n    quickReplyStyle,\n    quickReplyTextStyle,\n    quickReplyContainerStyle,\n    nextMessage,\n    props,\n  ]);\n\n  const onSaveThumbnail = useCallback((file: FileMessage[]) => {\n    refArrThumbnail.current = file;\n  }, []);\n\n  const renderMessageText = useCallback(() => {\n    if (currentMessage?.text) {\n      const {\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        containerStyle,\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        wrapperStyle,\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        optionTitles,\n        ...messageTextProps\n      } = props;\n\n      if (props.renderMessageText)\n        return props.renderMessageText(messageTextProps);\n\n      return <MessageText {...messageTextProps} />;\n    }\n    return null;\n  }, [props, currentMessage]);\n\n  const renderMessageFile = useCallback(() => {\n    if (!currentMessage?.file) return null;\n\n    const {\n      /* eslint-disable @typescript-eslint/no-unused-vars */\n      containerStyle,\n      wrapperStyle,\n      /* eslint-enable @typescript-eslint/no-unused-vars */\n      ...messageFileProps\n    } = props;\n\n    if (props.renderCustomMessageFile)\n      return props.renderCustomMessageFile(messageFileProps);\n\n    return (\n      <MessageFile\n        onLongPressFile={onLongPressItem}\n        onSaveThumbnail={onSaveThumbnail}\n        onPressFile={onPressFile}\n        messageWidth={messageWidth}\n        {...messageFileProps}\n      />\n    );\n  }, [\n    currentMessage,\n    props,\n    messageWidth,\n    onPressFile,\n    onSaveThumbnail,\n    onLongPressItem,\n  ]);\n\n  const renderMessageAudio = useCallback(() => {\n    if (!currentMessage?.audio) return null;\n\n    const {\n      /* eslint-disable @typescript-eslint/no-unused-vars */\n      containerStyle,\n      wrapperStyle,\n      /* eslint-enable @typescript-eslint/no-unused-vars */\n      ...messageAudioProps\n    } = props;\n\n    if (props.renderMessageAudio)\n      return props.renderMessageAudio(messageAudioProps);\n\n    return <MessageAudio />;\n  }, [props, currentMessage]);\n\n  const renderTicks = useCallback(() => {\n    const { renderTicks, user } = props;\n\n    if (renderTicks && currentMessage) return renderTicks(currentMessage);\n\n    if (user && currentMessage?.user && currentMessage.user._id !== user._id)\n      return null;\n\n    if (\n      currentMessage &&\n      (currentMessage.sent || currentMessage.received || currentMessage.pending)\n    )\n      return (\n        <View style={styles.content.tickView}>\n          {!!currentMessage.sent && (\n            <Text style={[styles.content.tick, props.tickStyle]}>{'âœ“'}</Text>\n          )}\n          {!!currentMessage.received && (\n            <Text style={[styles.content.tick, props.tickStyle]}>{'âœ“'}</Text>\n          )}\n          {!!currentMessage.pending && (\n            <Text style={[styles.content.tick, props.tickStyle]}>{'ðŸ•“'}</Text>\n          )}\n        </View>\n      );\n\n    return null;\n  }, [props, currentMessage]);\n\n  const renderTime = useCallback(() => {\n    if (currentMessage?.createdAt) {\n      const {\n        /* eslint-disable @typescript-eslint/no-unused-vars */\n        containerStyle,\n        wrapperStyle,\n        textStyle,\n        /* eslint-enable @typescript-eslint/no-unused-vars */\n        ...timeProps\n      } = props;\n\n      if (props.renderTime) return props.renderTime(timeProps);\n\n      return <Time {...timeProps} />;\n    }\n    return null;\n  }, [props, currentMessage]);\n\n  const renderUsername = useCallback(() => {\n    const { user, renderUsername } = props;\n\n    if (props.renderUsernameOnMessage && currentMessage) {\n      if (user && currentMessage.user._id === user._id) return null;\n\n      if (renderUsername) return renderUsername(currentMessage.user);\n\n      return (\n        <View style={styles.content.usernameView}>\n          <Text style={[styles.content.username, props.usernameStyle]}>\n            {'~ '}\n            {currentMessage.user.name}\n          </Text>\n        </View>\n      );\n    }\n\n    return null;\n  }, [currentMessage, props]);\n\n  const renderCustomView = useCallback(() => {\n    if (props.renderCustomView) return props.renderCustomView(props);\n\n    return null;\n  }, [props]);\n\n  const renderReactionEmoji = useCallback(() => {\n    const isCurrentUser = currentMessage.user._id === props?.user?._id;\n\n    const reactionPosition = isCurrentUser ? 'right' : 'left';\n\n    if (currentMessage?.reactionEmoji) {\n      return (\n        <View\n          style={[\n            {\n              backgroundColor: Color.white,\n              position: 'absolute',\n              width: 32,\n              height: 20,\n              borderRadius: 12,\n              justifyContent: 'center',\n              alignItems: 'center',\n              borderWidth: 1,\n              borderColor: Color.leftBubbleBackground,\n              bottom: -30,\n              zIndex: 10,\n              shadowColor: Color.leftBubbleBackground,\n              shadowOffset: { width: 0, height: 1 },\n              shadowOpacity: 0.25,\n              shadowRadius: 3.84,\n              elevation: 3,\n            },\n            reactionPosition === 'right' && {\n              left: 4,\n            },\n            reactionPosition === 'left' && {\n              right: 4,\n            },\n          ]}\n        >\n          <Text style={{ fontSize: 12 }}>{currentMessage.reactionEmoji}</Text>\n        </View>\n      );\n    }\n    return null;\n  }, [currentMessage.reactionEmoji, currentMessage.user._id, props?.user?._id]);\n\n  const renderBubbleContent = useCallback(() => {\n    return (\n      <View>\n        {!props.isCustomViewBottom && renderCustomView()}\n        {renderMessageFile()}\n        {renderMessageAudio()}\n        {renderMessageText()}\n        {renderReactionEmoji()}\n        {props.isCustomViewBottom && renderCustomView()}\n      </View>\n    );\n  }, [\n    renderCustomView,\n    renderMessageAudio,\n    renderMessageText,\n    props.isCustomViewBottom,\n    renderMessageFile,\n    renderReactionEmoji,\n  ]);\n\n  const renderMessageReply = useCallback(() => {\n    if (currentMessage?.messageReply) {\n      return (\n        <MessageReply\n          messageReply={currentMessage?.messageReply}\n          onSaveThumbnail={onSaveThumbnail}\n          onPressFile={onPressFile}\n        />\n      );\n    }\n    return null;\n  }, [currentMessage, onSaveThumbnail, onPressFile]);\n\n  return (\n    <View\n      style={[\n        stylesCommon.fill,\n        styles[position].container,\n        containerStyle && containerStyle[position],\n        { marginBottom: currentMessage?.isLast ? 32 : 8, maxWidth: '90%' },\n      ]}\n      onLayout={(e) => {\n        if (currentMessage?._id) {\n          setMessageWidth({\n            width: e.nativeEvent.layout.width,\n            _id: currentMessage?._id.toString(),\n          });\n        }\n      }}\n    >\n      {renderMessageReply()}\n      <View\n        style={[\n          styles[position].wrapper,\n          // styledBubbleToNext(),\n          styledBubbleToPrevious(),\n          wrapperStyle && wrapperStyle[position],\n        ]}\n      >\n        <TouchableWithoutFeedback\n          onPress={onPress}\n          onLongPress={onLongPress}\n          {...props.touchableProps}\n        >\n          <ButtonBase onLongPress={onLongPressItem}>\n            <View ref={innerRef}>\n              {renderBubbleContent()}\n              <View\n                style={[\n                  styles[position].bottom,\n                  bottomContainerStyle?.[position],\n                ]}\n              >\n                {renderUsername()}\n                {renderTime()}\n                {renderTicks()}\n              </View>\n            </View>\n          </ButtonBase>\n        </TouchableWithoutFeedback>\n      </View>\n      {renderQuickReplies()}\n      {currentMessage?.isSending && (\n        <View\n          style={{\n            height: 16,\n            alignItems: 'center',\n            justifyContent: 'center',\n            paddingHorizontal: 8,\n          }}\n        >\n          <MaterialIndicator\n            color={Color.defaultColor}\n            size={12}\n            animationDuration={6000}\n          />\n        </View>\n      )}\n      {currentMessage?.errorMessage && !currentMessage?.isSending && (\n        <View\n          style={{\n            marginTop: 4,\n            flexDirection: 'row',\n            alignItems: 'center',\n            gap: 4,\n          }}\n        >\n          <FastImage\n            source={require('../../assets/warning.png')}\n            style={{ width: 12, height: 12 }}\n          />\n          <Text\n            style={{ fontSize: 12, fontWeight: '500', color: Color.alizarin }}\n          >\n            {currentMessage?.errorMessage}\n          </Text>\n        </View>\n      )}\n    </View>\n  );\n};\n\nexport default Bubble;\n"],"mappings":"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","ignoreList":[]}