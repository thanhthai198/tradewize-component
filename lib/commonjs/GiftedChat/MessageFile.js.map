{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_utils","_reactNativeFastImage","_interopRequireDefault","_Color","_reactNativeCircularProgress","_utils2","_ButtonBase","e","__esModule","default","t","WeakMap","r","n","o","i","f","__proto__","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","GAP_MEDIA","MessageFile","onPressFile","messageWidth","currentMessage","isReaction","onLayout","onSaveThumbnail","isShowAll","onLongPressFile","arrMedia","setArrMedia","useState","file","MediaItem","useCallback","item","index","sizeMedia","Number","width","sizeMediaShowAll","size","getScreenWidth","raw","progress","progressNum","safeProgress","isFinite","Math","max","min","safeSize","createElement","View","ButtonBase","onLongPress","onPress","length","disabled","isLoading","typeFile","style","styles","mediaItem","height","thumbnailPreview","uri","url","source","image","playIcon","borderRadius","ActivityIndicator","color","Color","defaultBlue","Fragment","iconPlay","reactionIcon","Text","reactionIconText","AnimatedCircularProgress","fill","tintColor","white","backgroundColor","defaultColor","renderFile","useMemo","arrMediaShow","slice","container","gap","map","key","useEffect","fetchData","getFileComplete","filter","newArrMediaLoading","arrVideo","result","generateThumbnails","newArrMedia","_result$find","videoIndex","findIndex","v","path","find","res","error","console","log","StyleSheet","create","flexDirection","flexWrap","paddingHorizontal","paddingTop","marginBottom","overflow","alignItems","justifyContent","position","marginLeft","fontSize","fontWeight","lineHeight","top","left"],"sources":["MessageFile.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useState, useMemo } from 'react';\nimport {\n  ActivityIndicator,\n  StyleSheet,\n  Text,\n  View,\n  type LayoutChangeEvent,\n} from 'react-native';\nimport type { FileMessage, IMessage } from './types';\nimport { generateThumbnails } from './utils';\nimport FastImage from 'react-native-fast-image';\nimport Color from './Color';\nimport { AnimatedCircularProgress } from 'react-native-circular-progress';\nimport { getScreenWidth } from '../utils';\nimport { ButtonBase } from '../ButtonBase';\n\nconst GAP_MEDIA = 3;\n\ninterface MessageFileProps {\n  onPressFile?: (\n    file: FileMessage,\n    isShowAll?: boolean,\n    arrMedia?: IMessage\n  ) => void;\n  messageWidth?: { width: number; _id: string } | null;\n  currentMessage: IMessage;\n  isReaction?: boolean;\n  onLayout?: (event: LayoutChangeEvent) => void;\n  onSaveThumbnail?: (file: FileMessage[]) => void;\n  isShowAll?: boolean;\n  onLongPressFile?: () => void;\n}\n\nexport function MessageFile({\n  onPressFile,\n  messageWidth,\n  currentMessage,\n  isReaction,\n  onLayout,\n  onSaveThumbnail,\n  isShowAll,\n  onLongPressFile,\n}: MessageFileProps) {\n  const [arrMedia, setArrMedia] = useState<FileMessage[]>(\n    currentMessage?.file || []\n  );\n\n  const MediaItem = useCallback(\n    ({ item, index }: { item: FileMessage; index: number }) => {\n      const sizeMedia = Number(messageWidth?.width) / 4.65 - GAP_MEDIA * 3.65;\n      const sizeMediaShowAll = Number(messageWidth?.width) / 4 - GAP_MEDIA * 3;\n      const size = isShowAll\n        ? sizeMediaShowAll\n        : sizeMedia < getScreenWidth() * 0.1\n          ? getScreenWidth() * 0.15\n          : sizeMedia;\n      const raw = item?.progress;\n      const progressNum = Number(raw);\n      const safeProgress = Number.isFinite(progressNum)\n        ? Math.max(0, Math.min(100, progressNum))\n        : 0;\n      const safeSize = Number.isFinite(size) ? size : 120;\n\n      return (\n        <View>\n          <ButtonBase\n            onLongPress={onLongPressFile}\n            onPress={() =>\n              onPressFile?.(item, arrMedia?.length > 8 && index === 7, {\n                ...currentMessage,\n                file: arrMedia,\n              })\n            }\n            disabled={\n              isReaction || (item?.isLoading && item?.typeFile === 'video')\n            }\n            style={[\n              styles.mediaItem,\n              {\n                width: size,\n                height: size,\n              },\n            ]}\n          >\n            {(item?.thumbnailPreview || item?.uri || item?.url) && (\n              <FastImage\n                source={{\n                  uri: item?.thumbnailPreview || item?.uri || item?.url,\n                }}\n                style={styles.image}\n              />\n            )}\n\n            {item?.typeFile === 'video' && (\n              <View\n                style={[\n                  styles.playIcon,\n                  (safeProgress <= 0 ||\n                    safeProgress >= 100 ||\n                    item?.isLoading) && {\n                    width: sizeMedia * 0.5,\n                    height: sizeMedia * 0.5,\n                    borderRadius: (sizeMedia * 0.5) / 2,\n                  },\n                ]}\n              >\n                {item?.isLoading ? (\n                  <ActivityIndicator size=\"small\" color={Color.defaultBlue} />\n                ) : (\n                  <>\n                    {(safeProgress <= 0 || safeProgress >= 100) && (\n                      <FastImage\n                        source={require('../assets/play.png')}\n                        style={[\n                          styles.iconPlay,\n                          {\n                            width: (sizeMedia * 0.5) / 2,\n                            height: (sizeMedia * 0.5) / 2,\n                          },\n                        ]}\n                      />\n                    )}\n                  </>\n                )}\n              </View>\n            )}\n\n            {arrMedia?.length > 8 && index === 7 && !isShowAll && (\n              <View style={styles.reactionIcon}>\n                <Text style={styles.reactionIconText}>\n                  + {arrMedia?.length - 8 > 99 ? '99+' : arrMedia?.length - 8}\n                </Text>\n              </View>\n            )}\n          </ButtonBase>\n\n          {!item?.isLoading && safeProgress > 0 && safeProgress < 100 && (\n            <View\n              style={[styles.progress, { width: safeSize, height: safeSize }]}\n            >\n              <AnimatedCircularProgress\n                size={safeSize * 0.3}\n                width={3}\n                fill={safeProgress}\n                tintColor={Color.white}\n                backgroundColor={Color.defaultColor}\n              />\n            </View>\n          )}\n        </View>\n      );\n    },\n    [\n      messageWidth,\n      onPressFile,\n      isReaction,\n      arrMedia,\n      currentMessage,\n      isShowAll,\n      onLongPressFile,\n    ]\n  );\n\n  const renderFile = useMemo(() => {\n    if (!currentMessage?.file) return null;\n\n    const arrMediaShow = isShowAll ? arrMedia : arrMedia?.slice(0, 8);\n\n    return (\n      <View\n        onLayout={onLayout}\n        style={[\n          styles.container,\n          {\n            gap: GAP_MEDIA,\n          },\n        ]}\n      >\n        {arrMediaShow?.map((item, index) => (\n          <MediaItem key={`${item.uri}-${index}`} item={item} index={index} />\n        ))}\n      </View>\n    );\n  }, [currentMessage?.file, arrMedia, MediaItem, onLayout, isShowAll]);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const { file } = currentMessage;\n        const getFileComplete = file?.filter((item) => item.uri);\n        if (!getFileComplete) return;\n\n        // isLoading: true cho video\n        const newArrMediaLoading = getFileComplete.map((item) => {\n          if (item.typeFile === 'video') {\n            const isLoading = !item?.thumbnailPreview;\n            return { ...item, isLoading };\n          }\n          return item;\n        });\n\n        setArrMedia(newArrMediaLoading);\n\n        // Lấy danh sách video để generate thumbnail\n        const arrVideo = getFileComplete.filter(\n          (item) => item.typeFile === 'video'\n        );\n        const result = await generateThumbnails(arrVideo); // generate tất cả video một lần\n\n        const newArrMedia = getFileComplete.map((item) => {\n          if (item.typeFile === 'video') {\n            // Tìm thumbnail tương ứng theo vị trí trong arrVideo\n            const videoIndex = arrVideo.findIndex((v) => v.uri === item.uri);\n            const path = result?.find((res) => res?.index === videoIndex)?.path;\n            // isLoading: false cho video\n            return { ...item, thumbnailPreview: path, isLoading: false };\n          }\n          return item; // Không phải video thì giữ nguyên\n        });\n        onSaveThumbnail?.(newArrMedia);\n        setArrMedia(newArrMedia);\n      } catch (error) {\n        console.log('error fetchData media', error);\n      }\n    };\n    fetchData();\n  }, [currentMessage, onSaveThumbnail]);\n\n  return renderFile;\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    paddingHorizontal: 8,\n    paddingTop: 8,\n    marginBottom: 4,\n  },\n  mediaItem: {\n    borderRadius: 8,\n    backgroundColor: 'rgba(0, 0, 0, 0.05)',\n    overflow: 'hidden',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  playIcon: {\n    position: 'absolute',\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(255, 255, 255, 0.5)',\n  },\n  iconPlay: {\n    marginLeft: 4,\n  },\n  image: {\n    width: '100%',\n    height: '100%',\n  },\n  reactionIcon: {\n    position: 'absolute',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    width: '100%',\n    height: '100%',\n    borderRadius: 8,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  reactionIconText: {\n    color: Color.white,\n    fontSize: 16,\n    fontWeight: '600',\n    lineHeight: 22,\n  },\n  progress: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.3)',\n  },\n});\n"],"mappings":"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","ignoreList":[]}