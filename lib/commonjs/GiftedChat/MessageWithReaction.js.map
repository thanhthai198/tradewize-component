{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_reactNativeReanimated","_Color","_interopRequireDefault","_reactNativeFastImage","_MessageText","_Time","_MessageFile","_utils","_ButtonBase","e","__esModule","default","t","WeakMap","r","n","o","i","f","__proto__","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","EMOJI_REACTIONS","exports","DIFFERENCE_LEVEL","MessageWithReaction","isVisible","onClose","message","position","user","onReactionEmoji","onActionReaction","isShowEmoji","_message$user","_message$user3","_message$user4","quickReplies","isExceedsScreenHeight","setIsExceedsScreenHeight","useState","differenceLevel","setDifferenceLevel","isMyMessage","_id","overlayOpacity","useSharedValue","messageScale","messageOpacity","reactionIconOpacity","actionButtonsOpacity","useEffect","_message$user2","value","withTiming","duration","withSpring","damping","stiffness","withDelay","overlayAnimatedStyle","useAnimatedStyle","opacity","messageAnimatedStyle","transform","scale","reactionIconAnimatedStyle","actionButtonsAnimatedStyle","styleMessage","useCallback","top","pageY","getScreenHeight","right","left","pageX","styleReactionIcon","styleLayoutAction","height","onLayout","isHeight","nativeEvent","layout","timeTextStyle","useMemo","alignSelf","color","Color","black","renderTime","createElement","Time","currentMessage","renderMessage","text","MessageText","renderFile","_message$file","_message$file2","file","length","MessageFile","isReaction","messageWidth","width","Modal","visible","style","styles","modal","transparent","animationType","View","StyleSheet","absoluteFill","Pressable","onPress","overlay","pointerEvents","reactionIcon","map","emoji","key","_message$_id","toString","reactionIconItem","Text","reactionIconText","ButtonBase","btnAction","getScreenWidth","btnBorderAction","btnActionText","icon","source","create","margin","backgroundColor","zIndex","borderRadius","white","minWidth","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","marginTop","flexDirection","justifyContent","alignItems","paddingHorizontal","paddingVertical","btnActionOther","borderTopWidth","borderTopColor","defaultColor","fontSize","fontWeight","borderBottomWidth","borderBottomColor","time"],"sources":["MessageWithReaction.tsx"],"sourcesContent":["import React, { useCallback, useMemo, useState, useEffect } from 'react';\r\nimport {\r\n  StyleSheet,\r\n  Pressable,\r\n  Text,\r\n  Modal,\r\n  type LayoutChangeEvent,\r\n  type TextStyle,\r\n} from 'react-native';\r\nimport Animated, {\r\n  useSharedValue,\r\n  useAnimatedStyle,\r\n  withTiming,\r\n  withSpring,\r\n  withDelay,\r\n} from 'react-native-reanimated';\r\n\r\nimport { type IMessage, type LeftRightStyle, type User } from './types';\r\nimport Color from './Color';\r\nimport FastImage from 'react-native-fast-image';\r\nimport { MessageText } from './MessageText';\r\nimport { Time } from './Time';\r\nimport { MessageFile } from './MessageFile';\r\nimport { getScreenHeight, getScreenWidth } from '../utils';\r\nimport { ButtonBase } from '../ButtonBase';\r\nexport const EMOJI_REACTIONS = ['❤️', '😂', '😮', '😢', '😠', '👍'];\r\n\r\nexport interface MessageWithReactionProps {\r\n  isVisible: boolean;\r\n  onClose: () => void;\r\n  message: IMessage;\r\n  position: {\r\n    x: number;\r\n    y: number;\r\n    width: number;\r\n    height: number;\r\n    pageX: number;\r\n    pageY: number;\r\n  };\r\n  user: User;\r\n  isShowEmoji?: boolean;\r\n  onReactionEmoji?: (emoji: string, messageId: string) => void;\r\n  onActionReaction?: (message: IMessage, action: string) => void;\r\n}\r\n\r\nconst DIFFERENCE_LEVEL = 72;\r\n\r\nexport const MessageWithReaction = ({\r\n  isVisible,\r\n  onClose,\r\n  message,\r\n  position,\r\n  user,\r\n  onReactionEmoji,\r\n  onActionReaction,\r\n  isShowEmoji = true,\r\n}: MessageWithReactionProps) => {\r\n  delete message.quickReplies;\r\n  const [isExceedsScreenHeight, setIsExceedsScreenHeight] = useState(false);\r\n  const [differenceLevel, setDifferenceLevel] = useState(0);\r\n\r\n  const isMyMessage = message.user?._id === user?._id;\r\n\r\n  // Animation values\r\n  const overlayOpacity = useSharedValue(0);\r\n  const messageScale = useSharedValue(0.8);\r\n  const messageOpacity = useSharedValue(0);\r\n  const reactionIconOpacity = useSharedValue(0);\r\n  const actionButtonsOpacity = useSharedValue(0);\r\n\r\n  // Animation effects\r\n  useEffect(() => {\r\n    if (isVisible) {\r\n      // Start entrance animations\r\n      overlayOpacity.value = withTiming(0.9, { duration: 30 });\r\n      messageScale.value = withSpring(1, {\r\n        damping: 30,\r\n        stiffness: 500,\r\n      });\r\n      messageOpacity.value = withTiming(1, { duration: 30 });\r\n\r\n      // Staggered animations for reaction icons\r\n      if (isShowEmoji && user?._id !== message?.user?._id) {\r\n        reactionIconOpacity.value = withDelay(\r\n          30,\r\n          withTiming(1, { duration: 30 })\r\n        );\r\n      }\r\n\r\n      // Staggered animations for action buttons\r\n      actionButtonsOpacity.value = withDelay(\r\n        60,\r\n        withTiming(1, { duration: 30 })\r\n      );\r\n    } else {\r\n      // Reset animations when closing\r\n      overlayOpacity.value = 0;\r\n      messageScale.value = 0.8;\r\n      messageOpacity.value = 0;\r\n      reactionIconOpacity.value = 0;\r\n      actionButtonsOpacity.value = 0;\r\n    }\r\n  }, [\r\n    isVisible,\r\n    isShowEmoji,\r\n    user?._id,\r\n    message?.user?._id,\r\n    isMyMessage,\r\n    overlayOpacity,\r\n    messageScale,\r\n    messageOpacity,\r\n    reactionIconOpacity,\r\n    actionButtonsOpacity,\r\n  ]);\r\n\r\n  // Animated styles\r\n  const overlayAnimatedStyle = useAnimatedStyle(() => ({\r\n    opacity: overlayOpacity.value,\r\n  }));\r\n\r\n  const messageAnimatedStyle = useAnimatedStyle(() => ({\r\n    transform: [{ scale: messageScale.value }],\r\n    opacity: messageOpacity.value,\r\n  }));\r\n\r\n  const reactionIconAnimatedStyle = useAnimatedStyle(() => ({\r\n    opacity: reactionIconOpacity.value,\r\n  }));\r\n\r\n  const actionButtonsAnimatedStyle = useAnimatedStyle(() => ({\r\n    opacity: actionButtonsOpacity.value,\r\n  }));\r\n\r\n  const styleMessage = useCallback(() => {\r\n    let top = 0;\r\n    if (position.pageY < 80) {\r\n      top = 80 + getScreenHeight() * 0.05 + 8;\r\n    } else if (!isExceedsScreenHeight) {\r\n      top = position.pageY;\r\n    } else {\r\n      top = position.pageY - differenceLevel - DIFFERENCE_LEVEL;\r\n    }\r\n\r\n    if (isMyMessage) {\r\n      return {\r\n        top,\r\n        right: 16,\r\n      };\r\n    }\r\n\r\n    return {\r\n      top,\r\n      left: position.pageX,\r\n    };\r\n  }, [\r\n    isMyMessage,\r\n    position.pageX,\r\n    position.pageY,\r\n    isExceedsScreenHeight,\r\n    differenceLevel,\r\n  ]);\r\n\r\n  const styleReactionIcon = useCallback(() => {\r\n    let top = 0;\r\n\r\n    if (position.pageY < 80) {\r\n      top = 80;\r\n    } else if (!isExceedsScreenHeight) {\r\n      top = position.pageY - getScreenHeight() * 0.05 - 8;\r\n    } else {\r\n      top =\r\n        position.pageY -\r\n        getScreenHeight() * 0.05 -\r\n        differenceLevel -\r\n        DIFFERENCE_LEVEL -\r\n        8;\r\n    }\r\n\r\n    if (isMyMessage) {\r\n      return {\r\n        top,\r\n        right: 16,\r\n      };\r\n    }\r\n    return {\r\n      top,\r\n      left: position.pageX,\r\n    };\r\n  }, [\r\n    isExceedsScreenHeight,\r\n    differenceLevel,\r\n    position.pageY,\r\n    position.pageX,\r\n    isMyMessage,\r\n  ]);\r\n\r\n  const styleLayoutAction = useCallback(() => {\r\n    let top = 0;\r\n    if (position.pageY < 80) {\r\n      top = 80 + getScreenHeight() * 0.05 + 8 + position.height;\r\n    } else if (!isExceedsScreenHeight) {\r\n      top = position.pageY + position.height;\r\n    } else {\r\n      top =\r\n        position.pageY + position.height - differenceLevel - DIFFERENCE_LEVEL;\r\n    }\r\n\r\n    if (isMyMessage) {\r\n      return {\r\n        top,\r\n        right: 16,\r\n      };\r\n    }\r\n    return {\r\n      top,\r\n      left: position.pageX,\r\n    };\r\n  }, [\r\n    isMyMessage,\r\n    position.pageX,\r\n    position.pageY,\r\n    position.height,\r\n    isExceedsScreenHeight,\r\n    differenceLevel,\r\n  ]);\r\n\r\n  const onLayout = useCallback(\r\n    (e: LayoutChangeEvent) => {\r\n      const isHeight =\r\n        position.pageY + e.nativeEvent.layout.height + position.height + 139 >\r\n        getScreenHeight();\r\n\r\n      setDifferenceLevel(\r\n        position.pageY +\r\n          e.nativeEvent.layout.height +\r\n          position.height -\r\n          getScreenHeight()\r\n      );\r\n      setIsExceedsScreenHeight(isHeight);\r\n    },\r\n    [position.pageY, position.height]\r\n  );\r\n  const timeTextStyle: LeftRightStyle<TextStyle> = useMemo(() => {\r\n    return {\r\n      left: {\r\n        alignSelf: 'flex-start',\r\n      },\r\n      right: {\r\n        alignSelf: 'flex-end',\r\n        color: Color.black,\r\n      },\r\n    };\r\n  }, []);\r\n\r\n  const renderTime = useMemo(\r\n    () => (\r\n      <Time\r\n        currentMessage={message}\r\n        position={isMyMessage ? 'right' : 'left'}\r\n        timeTextStyle={timeTextStyle}\r\n      />\r\n    ),\r\n    [message, timeTextStyle, isMyMessage]\r\n  );\r\n\r\n  const renderMessage = useMemo(() => {\r\n    if (message?.text) {\r\n      return <MessageText currentMessage={message} position=\"left\" />;\r\n    } else {\r\n      return null;\r\n    }\r\n  }, [message]);\r\n\r\n  const renderFile = useMemo(() => {\r\n    if (message?.file?.length && message?.file?.length > 0) {\r\n      return (\r\n        <MessageFile\r\n          isReaction\r\n          currentMessage={message}\r\n          messageWidth={{ width: position.width + 36, _id: '' }}\r\n        />\r\n      );\r\n    }\r\n    return null;\r\n  }, [position.width, message]);\r\n\r\n  return (\r\n    <Modal\r\n      visible={isVisible}\r\n      style={styles.modal}\r\n      transparent={true}\r\n      animationType=\"none\"\r\n    >\r\n      {/* Pressable bắt sự kiện bấm nền */}\r\n      <Animated.View style={StyleSheet.absoluteFill}>\r\n        <Pressable style={StyleSheet.absoluteFill} onPress={onClose} />\r\n\r\n        {/* Overlay màu đen đậm */}\r\n        <Animated.View\r\n          style={[\r\n            StyleSheet.absoluteFill,\r\n            styles.overlay,\r\n            overlayAnimatedStyle,\r\n          ]}\r\n          pointerEvents=\"none\"\r\n        />\r\n\r\n        {isShowEmoji && user?._id !== message?.user?._id && (\r\n          <Animated.View\r\n            style={[\r\n              styles.reactionIcon,\r\n              styleReactionIcon(),\r\n              reactionIconAnimatedStyle,\r\n            ]}\r\n          >\r\n            {EMOJI_REACTIONS?.map((emoji) => (\r\n              <Pressable\r\n                key={emoji}\r\n                onPress={() => {\r\n                  onClose();\r\n                  onReactionEmoji?.(emoji, message?._id?.toString());\r\n                }}\r\n                style={styles.reactionIconItem}\r\n              >\r\n                <Text style={styles.reactionIconText}>{emoji}</Text>\r\n              </Pressable>\r\n            ))}\r\n          </Animated.View>\r\n        )}\r\n\r\n        {/* Hiển thị message ở vị trí đã đo */}\r\n        <Animated.View\r\n          style={[styles.message, styleMessage(), messageAnimatedStyle]}\r\n        >\r\n          {renderFile}\r\n          {renderMessage}\r\n          {renderTime}\r\n        </Animated.View>\r\n\r\n        <Animated.View\r\n          onLayout={onLayout}\r\n          style={[\r\n            styles.layout,\r\n            styleLayoutAction(),\r\n            actionButtonsAnimatedStyle,\r\n          ]}\r\n        >\r\n          <ButtonBase\r\n            style={[\r\n              styles.btnAction,\r\n              { width: getScreenWidth() * 0.5 },\r\n              message?.text && styles.btnBorderAction,\r\n            ]}\r\n            onPress={() => {\r\n              onClose();\r\n              onActionReaction?.(message, 'reply');\r\n            }}\r\n          >\r\n            <Text style={styles.btnActionText}>Reply</Text>\r\n            <FastImage\r\n              style={styles.icon}\r\n              source={require('./assets/reply.png')}\r\n            />\r\n          </ButtonBase>\r\n          {message?.text && (\r\n            <ButtonBase\r\n              style={[styles.btnAction]}\r\n              onPress={() => {\r\n                onClose();\r\n                onActionReaction?.(message, 'copy');\r\n              }}\r\n            >\r\n              <Text style={styles.btnActionText}>Copy</Text>\r\n              <FastImage\r\n                style={styles.icon}\r\n                source={require('./assets/copy.png')}\r\n              />\r\n            </ButtonBase>\r\n          )}\r\n          {/* <ButtonBase\r\n            style={[styles.btnAction, styles.btnActionOther]}\r\n            onPress={() => {\r\n              onClose();\r\n              onActionReaction?.(message, 'other');\r\n            }}\r\n          >\r\n            <Text style={styles.btnActionText}>Other</Text>\r\n            <FastImage style={styles.icon} source={require('../assets/more-information.png')} />\r\n          </ButtonBase> */}\r\n        </Animated.View>\r\n      </Animated.View>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  modal: {\r\n    margin: 0,\r\n  },\r\n  overlay: {\r\n    backgroundColor: 'rgba(0, 0, 0, 0.9)',\r\n  },\r\n  message: {\r\n    position: 'absolute',\r\n    zIndex: 1,\r\n    borderRadius: 8,\r\n    backgroundColor: Color.white,\r\n    minWidth: getScreenWidth() * 0.19,\r\n    shadowColor: '#000',\r\n    shadowOffset: {\r\n      width: 0,\r\n      height: 4,\r\n    },\r\n    shadowOpacity: 0.3,\r\n    shadowRadius: 8,\r\n    elevation: 8,\r\n  },\r\n  layout: {\r\n    backgroundColor: Color.white,\r\n    position: 'absolute',\r\n    borderRadius: 16,\r\n    marginTop: 8,\r\n    shadowColor: '#000',\r\n    shadowOffset: {\r\n      width: 0,\r\n      height: 2,\r\n    },\r\n    shadowOpacity: 0.25,\r\n    shadowRadius: 6,\r\n    elevation: 6,\r\n  },\r\n  btnAction: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    paddingHorizontal: 16,\r\n    paddingVertical: 12,\r\n  },\r\n  btnActionOther: {\r\n    borderTopWidth: 4,\r\n    borderTopColor: Color.defaultColor,\r\n  },\r\n  icon: {\r\n    width: 18,\r\n    height: 18,\r\n  },\r\n  btnActionText: {\r\n    fontSize: 14,\r\n    fontWeight: '600',\r\n    color: Color.black,\r\n  },\r\n  btnBorderAction: {\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: Color.defaultColor,\r\n  },\r\n  time: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'flex-start',\r\n  },\r\n  reactionIcon: {\r\n    position: 'absolute',\r\n    backgroundColor: Color.white,\r\n    borderRadius: 16,\r\n    zIndex: 1,\r\n    height: getScreenHeight() * 0.05,\r\n    width: getScreenWidth() * 0.75,\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    paddingHorizontal: 16,\r\n    flexDirection: 'row',\r\n    shadowColor: '#000',\r\n    shadowOffset: {\r\n      width: 0,\r\n      height: 2,\r\n    },\r\n    shadowOpacity: 0.25,\r\n    shadowRadius: 6,\r\n    elevation: 6,\r\n  },\r\n  reactionIconItem: {\r\n    height: '100%',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    width: (getScreenWidth() * 0.75 - 56) / 6,\r\n  },\r\n  reactionIconText: {\r\n    fontSize: 24,\r\n  },\r\n});\r\n"],"mappings":"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","ignoreList":[]}