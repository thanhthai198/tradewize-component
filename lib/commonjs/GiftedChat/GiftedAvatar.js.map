{"version":3,"names":["_react","require","_reactNative","_Color","_interopRequireDefault","_styles","e","__esModule","default","carrot","emerald","peterRiver","wisteria","alizarin","turquoise","midnightBlue","Color","styles","StyleSheet","create","avatarStyle","width","height","borderRadius","avatarTransparent","backgroundColor","backgroundTransparent","textStyle","color","white","fontSize","fontWeight","GiftedAvatar","props","avatarName","setAvatarName","useState","undefined","setBackgroundColor","user","onPress","setAvatarColor","useCallback","_name$","_name$2","_name$3","userName","name","toUpperCase","split","length","charAt","sumChars","i","charCodeAt","colors","renderAvatar","avatar","stylesCommon","centerItems","React","createElement","Image","source","uri","style","renderInitials","Text","handleOnPress","rest","handleOnLongPress","onLongPress","useEffect","View","accessibilityRole","TouchableOpacity","disabled"],"sources":["GiftedAvatar.tsx"],"sourcesContent":["import { useCallback, useEffect, useState } from 'react';\nimport {\n  Image,\n  Text,\n  TouchableOpacity,\n  View,\n  StyleSheet,\n  type StyleProp,\n  type ImageStyle,\n  type TextStyle,\n} from 'react-native';\nimport Color from './Color';\nimport { type User } from './types';\nimport stylesCommon from './styles';\n\nconst {\n  carrot,\n  emerald,\n  peterRiver,\n  wisteria,\n  alizarin,\n  turquoise,\n  midnightBlue,\n} = Color;\n\nconst styles = StyleSheet.create({\n  avatarStyle: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n  },\n  avatarTransparent: {\n    backgroundColor: Color.backgroundTransparent,\n  },\n  textStyle: {\n    color: Color.white,\n    fontSize: 16,\n    backgroundColor: Color.backgroundTransparent,\n    fontWeight: '500',\n  },\n});\n\nexport interface GiftedAvatarProps {\n  user?: User;\n  avatarStyle?: StyleProp<ImageStyle>;\n  textStyle?: StyleProp<TextStyle>;\n  onPress?: (props: GiftedAvatarProps) => void;\n  onLongPress?: (props: GiftedAvatarProps) => void;\n}\n\nexport function GiftedAvatar(props: GiftedAvatarProps) {\n  const [avatarName, setAvatarName] = useState<string | undefined>(undefined);\n  const [backgroundColor, setBackgroundColor] = useState<string | undefined>(\n    undefined\n  );\n\n  const { user, avatarStyle, textStyle, onPress } = props;\n\n  const setAvatarColor = useCallback(() => {\n    if (backgroundColor) return;\n\n    const userName = user?.name || '';\n    const name = userName.toUpperCase().split(' ');\n\n    if (name.length === 1) setAvatarName(`${name[0]?.charAt(0)}`);\n    else if (name.length > 1)\n      setAvatarName(`${name[0]?.charAt(0)}${name[1]?.charAt(0)}`);\n    else setAvatarName('');\n\n    let sumChars = 0;\n    for (let i = 0; i < userName.length; i += 1)\n      sumChars += userName.charCodeAt(i);\n\n    // inspired by https://github.com/wbinnssmith/react-user-avatar\n    // colors from https://flatuicolors.com/\n    const colors = [\n      carrot,\n      emerald,\n      peterRiver,\n      wisteria,\n      alizarin,\n      turquoise,\n      midnightBlue,\n    ];\n\n    setBackgroundColor(colors[sumChars % colors.length]);\n  }, [user?.name, backgroundColor]);\n\n  const renderAvatar = useCallback(() => {\n    switch (typeof user?.avatar) {\n      case 'function':\n        return user.avatar([\n          stylesCommon.centerItems,\n          styles.avatarStyle,\n          avatarStyle,\n        ]);\n      case 'string':\n        return (\n          <Image\n            source={{ uri: user.avatar }}\n            style={[stylesCommon.centerItems, styles.avatarStyle, avatarStyle]}\n          />\n        );\n      case 'number':\n        return (\n          <Image\n            source={user.avatar}\n            style={[stylesCommon.centerItems, styles.avatarStyle, avatarStyle]}\n          />\n        );\n      default:\n        return null;\n    }\n  }, [user, avatarStyle]);\n\n  const renderInitials = useCallback(() => {\n    return <Text style={[styles.textStyle, textStyle]}>{avatarName}</Text>;\n  }, [textStyle, avatarName]);\n\n  const handleOnPress = () => {\n    const { onPress, ...rest } = props;\n\n    if (onPress) onPress(rest);\n  };\n\n  const handleOnLongPress = () => {\n    const { onLongPress, ...rest } = props;\n\n    if (onLongPress) onLongPress(rest);\n  };\n\n  useEffect(() => {\n    setAvatarColor();\n  }, [setAvatarColor]);\n\n  if (!user || (!user.name && !user.avatar))\n    // render placeholder\n    return (\n      <View\n        style={[\n          stylesCommon.centerItems,\n          styles.avatarStyle,\n          styles.avatarTransparent,\n          avatarStyle,\n        ]}\n        accessibilityRole=\"image\"\n      />\n    );\n\n  if (user.avatar)\n    return (\n      <TouchableOpacity\n        disabled={!onPress}\n        onPress={handleOnPress}\n        onLongPress={handleOnLongPress}\n        accessibilityRole=\"image\"\n      >\n        {renderAvatar()}\n      </TouchableOpacity>\n    );\n\n  return (\n    <TouchableOpacity\n      disabled={!onPress}\n      onPress={handleOnPress}\n      onLongPress={handleOnLongPress}\n      style={[\n        stylesCommon.centerItems,\n        styles.avatarStyle,\n        { backgroundColor },\n        avatarStyle,\n      ]}\n      accessibilityRole=\"image\"\n    >\n      {renderInitials()}\n    </TouchableOpacity>\n  );\n}\n"],"mappings":"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","ignoreList":[]}