{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_lodash","_Avatar","_Bubble","_interopRequireDefault","_SystemMessage","_utils","_styles","_types","Object","keys","forEach","key","prototype","hasOwnProperty","call","_exportNames","exports","defineProperty","enumerable","get","e","__esModule","default","t","WeakMap","r","n","o","i","f","__proto__","has","set","getOwnPropertyDescriptor","_extends","assign","bind","arguments","length","apply","Message","props","currentMessage","renderBubble","renderBubbleProp","renderSystemMessage","renderSystemMessageProp","onMessageLayout","nextMessage","position","containerStyle","user","showUserAvatar","onPressFile","onLongPressReaction","useCallback","rest","createElement","SystemMessage","renderAvatar","_currentMessage$user","_id","avatar","Avatar","sameUser","isSameUser","View","onLayout","system","style","styles","container","marginBottom","inverted","memo","nextProps","_props$shouldUpdateMe","shouldUpdate","shouldUpdateMessage","isEqual","previousMessage","_default"],"sources":["index.tsx"],"sourcesContent":["/* eslint-disable react-native/no-inline-styles */\n/* eslint-disable @typescript-eslint/no-shadow */\nimport React, { memo, useCallback } from 'react';\nimport { View } from 'react-native';\nimport { isEqual } from 'lodash';\n\nimport { Avatar } from '../Avatar';\nimport Bubble from '../Bubble';\nimport { SystemMessage } from '../SystemMessage';\n\nimport { isSameUser } from '../utils';\nimport { type IMessage } from '../types';\nimport { type MessageProps } from './types';\nimport styles from './styles';\n\nexport * from './types';\n\nlet Message: React.FC<MessageProps<IMessage>> = (\n  props: MessageProps<IMessage>\n) => {\n  const {\n    currentMessage,\n    renderBubble: renderBubbleProp,\n    renderSystemMessage: renderSystemMessageProp,\n    onMessageLayout,\n    nextMessage,\n    position,\n    containerStyle,\n    user,\n    showUserAvatar,\n    onPressFile,\n    onLongPressReaction,\n  } = props;\n\n  const renderBubble = useCallback(() => {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const { containerStyle, onMessageLayout, ...rest } = props;\n\n    if (renderBubbleProp) return renderBubbleProp(rest);\n\n    return (\n      <Bubble\n        {...rest}\n        onPressFile={onPressFile}\n        onLongPressReaction={onLongPressReaction}\n      />\n    );\n  }, [props, renderBubbleProp, onPressFile, onLongPressReaction]);\n\n  const renderSystemMessage = useCallback(() => {\n    const {\n      /* eslint-disable @typescript-eslint/no-unused-vars */\n      containerStyle,\n      onMessageLayout,\n      /* eslint-enable @typescript-eslint/no-unused-vars */\n      ...rest\n    } = props;\n\n    if (renderSystemMessageProp) return renderSystemMessageProp(rest);\n\n    return <SystemMessage {...rest} />;\n  }, [props, renderSystemMessageProp]);\n\n  const renderAvatar = useCallback(() => {\n    if (\n      user?._id &&\n      currentMessage?.user &&\n      user._id === currentMessage.user._id &&\n      !showUserAvatar\n    )\n      return null;\n\n    if (currentMessage?.user?.avatar === null) return null;\n\n    const {\n      /* eslint-disable @typescript-eslint/no-unused-vars */\n      containerStyle,\n      onMessageLayout,\n      /* eslint-enable @typescript-eslint/no-unused-vars */\n      ...rest\n    } = props;\n\n    return <Avatar {...rest} />;\n  }, [props, user, currentMessage, showUserAvatar]);\n\n  if (!currentMessage) return null;\n\n  const sameUser = isSameUser(currentMessage, nextMessage!);\n\n  return (\n    <View onLayout={onMessageLayout}>\n      {currentMessage.system ? (\n        renderSystemMessage()\n      ) : (\n        <View\n          style={[\n            styles[position].container,\n            { marginBottom: sameUser ? 2 : 10 },\n            !props.inverted && { marginBottom: 2 },\n            containerStyle?.[position],\n          ]}\n        >\n          {position === 'left' ? renderAvatar() : null}\n          {renderBubble()}\n          {position === 'right' ? renderAvatar() : null}\n        </View>\n      )}\n    </View>\n  );\n};\n\nMessage = memo(Message, (props, nextProps) => {\n  const shouldUpdate =\n    props.shouldUpdateMessage?.(props, nextProps) ||\n    !isEqual(props.currentMessage!, nextProps.currentMessage!) ||\n    !isEqual(props.previousMessage, nextProps.previousMessage) ||\n    !isEqual(props.nextMessage, nextProps.nextMessage);\n\n  if (shouldUpdate) return false;\n\n  return true;\n});\n\nexport default Message;\n"],"mappings":"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","ignoreList":[]}