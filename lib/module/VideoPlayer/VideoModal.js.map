{"version":3,"names":["React","useCallback","useRef","useEffect","useState","View","TouchableOpacity","StyleSheet","StatusBar","Text","Animated","Slider","VideoPlayer","getScreenHeight","useSafeAreaInsets","loadSubtitles","ButtonBase","ReactNativeModal","formatTime","seconds","isNaN","mins","Math","floor","secs","toString","padStart","VideoModal","visible","onClose","source","autoPlay","loop","muted","showControls","showSkipButton","autoCloseOnEnd","isSubtitle","subtitle","txtSkipButton","txtCloseButton","initialSubtitle","onError","onLoad","onEnd","onProgress","isProgressBar","insets","buttonOpacity","Value","current","progress","setProgress","currentTime","setCurrentTime","duration","setDuration","subtitles","setSubtitles","currentSubtitle","setCurrentSubtitle","hasSubtitles","setHasSubtitles","subtitleLoaded","setSubtitleLoaded","error","setError","currentSubtitleLanguage","setCurrentSubtitleLanguage","showLanguageSelector","setShowLanguageSelector","resetState","handleClose","handleBackdropPress","handleVideoEnd","handleVideoError","err","loading","handleVideoProgress","progressData","seekableDuration","match","find","s","start","end","text","console","handleVideoLoad","handlePlayingChange","isPlaying","timing","toValue","useNativeDriver","loadFileSubtitle","language","subtitleUrl","parsed","length","changeSubtitleLanguage","availableLanguages","Object","keys","initialOpacity","createElement","isVisible","onBackdropPress","statusBarTranslucent","style","margin","animationIn","animationOut","animationInTiming","animationOutTiming","backdropOpacity","barStyle","backgroundColor","styles","modalContainer","modalContent","videoContainer","progressUpdateInterval","height","width","onPlayingChange","subtitleContainer","bottom","subtitleText","languageContainer","top","onPress","languageButton","languageButtonText","toUpperCase","languageDropdown","map","lang","key","languageOption","languageOptionActive","languageOptionText","languageOptionTextActive","progressContainer","progressBar","slider","value","minimumValue","maximumValue","minimumTrackTintColor","maximumTrackTintColor","disabled","timeContainer","timeText","closeButtonOverlay","opacity","hitSlop","left","right","closeButton","closeButtonText","backdrop","activeOpacity","create","flex","justifyContent","alignItems","header","flexDirection","paddingHorizontal","paddingVertical","title","color","fontSize","fontWeight","marginRight","minWidth","borderRadius","padding","position","zIndex","marginTop","alignSelf","maxWidth","textAlign"],"sources":["VideoModal.tsx"],"sourcesContent":["import React, { useCallback, useRef, useEffect, useState } from 'react';\r\nimport {\r\n  View,\r\n  TouchableOpacity,\r\n  StyleSheet,\r\n  StatusBar,\r\n  Text,\r\n  Animated,\r\n} from 'react-native';\r\nimport Slider from '@react-native-community/slider';\r\nimport { VideoPlayer } from './VideoComponent';\r\nimport { getScreenHeight } from '../utils';\r\n\r\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\r\nimport type { LanguageCode, SubtitleEntry } from '../types';\r\nimport { loadSubtitles } from '../helper';\r\nimport { ButtonBase } from '../ButtonBase';\r\nimport ReactNativeModal from 'react-native-modal';\r\n\r\n// Helper function to format time\r\nconst formatTime = (seconds: number): string => {\r\n  if (isNaN(seconds) || seconds < 0) return '0:00';\r\n\r\n  const mins = Math.floor(seconds / 60);\r\n  const secs = Math.floor(seconds % 60);\r\n  return `${mins}:${secs.toString().padStart(2, '0')}`;\r\n};\r\n\r\nexport interface VideoModalProps {\r\n  visible: boolean;\r\n  onClose: () => void;\r\n  source: string;\r\n  title?: string;\r\n  autoPlay?: boolean;\r\n  loop?: boolean;\r\n  muted?: boolean;\r\n  showControls?: boolean;\r\n  showSkipButton?: boolean;\r\n  autoCloseOnEnd?: boolean;\r\n  isSubtitle?: boolean;\r\n  subtitle: { [key: string]: string };\r\n  txtSkipButton?: string;\r\n  txtCloseButton?: string;\r\n  initialSubtitle?: LanguageCode;\r\n  isProgressBar?: boolean;\r\n  onError?: (error: any, loading: boolean) => void;\r\n  onLoad?: (loading: boolean) => void;\r\n  onEnd?: () => void;\r\n  onProgress?: (progress: {\r\n    currentTime: number;\r\n    playableDuration: number;\r\n    seekableDuration: number;\r\n  }) => void;\r\n}\r\n\r\nexport const VideoModal: React.FC<VideoModalProps> = ({\r\n  visible,\r\n  onClose,\r\n  source,\r\n  autoPlay = true,\r\n  loop = false,\r\n  muted = false,\r\n  showControls = false,\r\n  showSkipButton = true,\r\n  autoCloseOnEnd = true,\r\n  isSubtitle = true,\r\n  subtitle,\r\n  txtSkipButton = 'Skip',\r\n  txtCloseButton = 'Close',\r\n  initialSubtitle = 'en',\r\n  onError,\r\n  onLoad,\r\n  onEnd,\r\n  onProgress,\r\n  isProgressBar = true,\r\n}) => {\r\n  const insets = useSafeAreaInsets();\r\n  const buttonOpacity = useRef(new Animated.Value(1)).current;\r\n  const [progress, setProgress] = useState(0);\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [duration, setDuration] = useState(0);\r\n  const [subtitles, setSubtitles] = useState<SubtitleEntry[]>([]);\r\n  const [currentSubtitle, setCurrentSubtitle] = useState<string>('');\r\n  const [hasSubtitles, setHasSubtitles] = useState(true);\r\n  const [subtitleLoaded, setSubtitleLoaded] = useState(false);\r\n  const [error, setError] = useState<boolean>(false);\r\n  const [currentSubtitleLanguage, setCurrentSubtitleLanguage] =\r\n    useState<LanguageCode>(initialSubtitle);\r\n  const [showLanguageSelector, setShowLanguageSelector] =\r\n    useState<boolean>(false);\r\n\r\n  const resetState = useCallback(() => {\r\n    setProgress(0);\r\n    setCurrentTime(0);\r\n    setDuration(0);\r\n    setSubtitles([]);\r\n    setCurrentSubtitle('');\r\n  }, []);\r\n\r\n  const handleClose = useCallback(() => {\r\n    resetState();\r\n    onClose();\r\n  }, [onClose, resetState]);\r\n\r\n  const handleBackdropPress = useCallback(() => {\r\n    handleClose();\r\n  }, [handleClose]);\r\n\r\n  const handleVideoEnd = useCallback(() => {\r\n    onEnd?.();\r\n    if (autoCloseOnEnd) {\r\n      handleClose();\r\n    }\r\n  }, [onEnd, autoCloseOnEnd, handleClose]);\r\n\r\n  const handleVideoError = useCallback(\r\n    (err: any, loading: boolean) => {\r\n      setError(true);\r\n      onError?.(err, loading);\r\n    },\r\n    [onError]\r\n  );\r\n\r\n  const handleVideoProgress = useCallback(\r\n    (progressData: any) => {\r\n      try {\r\n        setCurrentTime(progressData.currentTime);\r\n        setDuration(progressData.seekableDuration);\r\n        if (progressData.seekableDuration > 0) {\r\n          setProgress(progressData.currentTime / progressData.seekableDuration);\r\n        }\r\n\r\n        if (isSubtitle) {\r\n          const match = subtitles.find(\r\n            (s) =>\r\n              progressData?.currentTime >= s.start - 0.1 &&\r\n              progressData?.currentTime <= s.end + 0.1\r\n          );\r\n          if (match?.text !== currentSubtitle) {\r\n            setCurrentSubtitle(match?.text || '');\r\n          }\r\n        }\r\n\r\n        onProgress?.(progressData);\r\n      } catch (err) {\r\n        console.error('handleVideoProgress error', err);\r\n      }\r\n    },\r\n    [onProgress, subtitles, isSubtitle, currentSubtitle]\r\n  );\r\n\r\n  const handleVideoLoad = useCallback(\r\n    (loading: boolean) => {\r\n      setError(false);\r\n      onLoad?.(loading);\r\n    },\r\n    [onLoad]\r\n  );\r\n\r\n  const handlePlayingChange = useCallback(\r\n    (isPlaying: boolean) => {\r\n      Animated.timing(buttonOpacity, {\r\n        toValue: isPlaying ? 0.3 : 1,\r\n        duration: 300,\r\n        useNativeDriver: true,\r\n      }).start();\r\n    },\r\n    [buttonOpacity]\r\n  );\r\n\r\n  const loadFileSubtitle = useCallback(\r\n    async (language: LanguageCode = currentSubtitleLanguage) => {\r\n      try {\r\n        const subtitleUrl = subtitle[language] || '';\r\n        const parsed = await loadSubtitles(subtitleUrl);\r\n        setSubtitles(parsed);\r\n        setHasSubtitles(parsed.length > 0);\r\n      } catch (err) {\r\n        console.error('Error loading subtitles:', err);\r\n        setHasSubtitles(false);\r\n      } finally {\r\n        setSubtitleLoaded(true);\r\n      }\r\n    },\r\n    [subtitle, currentSubtitleLanguage]\r\n  );\r\n\r\n  const changeSubtitleLanguage = useCallback(\r\n    async (language: LanguageCode) => {\r\n      setCurrentSubtitleLanguage(language);\r\n      setCurrentSubtitle(''); // Clear current subtitle when changing language\r\n      setSubtitleLoaded(false);\r\n      await loadFileSubtitle(language);\r\n    },\r\n    [loadFileSubtitle]\r\n  );\r\n\r\n  // Get available subtitle languages\r\n  const availableLanguages = Object.keys(subtitle) as LanguageCode[];\r\n\r\n  useEffect(() => {\r\n    if (isSubtitle) {\r\n      setSubtitleLoaded(false);\r\n      loadFileSubtitle();\r\n    }\r\n  }, [isSubtitle, loadFileSubtitle]);\r\n\r\n  // Reset button opacity when modal opens\r\n  useEffect(() => {\r\n    if (visible) {\r\n      // If autoPlay is true, button should be dimmed initially\r\n      const initialOpacity = autoPlay ? 0.3 : 1;\r\n      Animated.timing(buttonOpacity, {\r\n        toValue: initialOpacity,\r\n        duration: 300,\r\n        useNativeDriver: true,\r\n      }).start();\r\n    }\r\n  }, [visible, buttonOpacity, autoPlay]);\r\n\r\n  useEffect(() => {\r\n    if (initialSubtitle) {\r\n      setCurrentSubtitleLanguage(initialSubtitle);\r\n    }\r\n  }, [initialSubtitle]);\r\n\r\n  return (\r\n    <ReactNativeModal\r\n      isVisible={visible}\r\n      onBackdropPress={handleClose}\r\n      statusBarTranslucent={true}\r\n      useNativeDriver={true}\r\n      style={{ margin: 0 }}\r\n      animationIn=\"fadeIn\"\r\n      animationOut=\"fadeOut\"\r\n      animationInTiming={300}\r\n      animationOutTiming={300}\r\n      backdropOpacity={0.5}\r\n    >\r\n      <StatusBar\r\n        barStyle=\"light-content\"\r\n        backgroundColor=\"rgba(0, 0, 0, 0.9)\"\r\n      />\r\n      <View style={styles.modalContainer}>\r\n        <View style={styles.modalContent}>\r\n          {/* Video Player */}\r\n          <View style={styles.videoContainer}>\r\n            <VideoPlayer\r\n              progressUpdateInterval={100}\r\n              source={source}\r\n              height={getScreenHeight()}\r\n              width=\"100%\"\r\n              autoPlay={isSubtitle ? subtitleLoaded && autoPlay : autoPlay}\r\n              loop={loop}\r\n              muted={muted}\r\n              showControls={showControls}\r\n              onError={handleVideoError}\r\n              onLoad={handleVideoLoad}\r\n              onEnd={handleVideoEnd}\r\n              onProgress={handleVideoProgress}\r\n              onPlayingChange={handlePlayingChange}\r\n            />\r\n          </View>\r\n\r\n          {currentSubtitle && isSubtitle && hasSubtitles && !error && (\r\n            <View\r\n              style={[styles.subtitleContainer, { bottom: insets.bottom + 48 }]}\r\n            >\r\n              <Text style={styles.subtitleText}>{currentSubtitle}</Text>\r\n            </View>\r\n          )}\r\n\r\n          {/* Language Selector */}\r\n          {isSubtitle && availableLanguages.length > 1 && !error && (\r\n            <View style={[styles.languageContainer, { top: insets.top + 24 }]}>\r\n              <TouchableOpacity\r\n                onPress={() => setShowLanguageSelector(!showLanguageSelector)}\r\n                style={styles.languageButton}\r\n              >\r\n                <Text style={styles.languageButtonText}>\r\n                  {currentSubtitleLanguage.toUpperCase()}\r\n                </Text>\r\n              </TouchableOpacity>\r\n\r\n              {showLanguageSelector && (\r\n                <View style={styles.languageDropdown}>\r\n                  {availableLanguages.map((lang) => (\r\n                    <TouchableOpacity\r\n                      key={lang}\r\n                      onPress={() => {\r\n                        changeSubtitleLanguage(lang);\r\n                        setShowLanguageSelector(false);\r\n                      }}\r\n                      style={[\r\n                        styles.languageOption,\r\n                        lang === currentSubtitleLanguage &&\r\n                          styles.languageOptionActive,\r\n                      ]}\r\n                    >\r\n                      <Text\r\n                        style={[\r\n                          styles.languageOptionText,\r\n                          lang === currentSubtitleLanguage &&\r\n                            styles.languageOptionTextActive,\r\n                        ]}\r\n                      >\r\n                        {lang.toUpperCase()}\r\n                      </Text>\r\n                    </TouchableOpacity>\r\n                  ))}\r\n                </View>\r\n              )}\r\n            </View>\r\n          )}\r\n\r\n          {/* Progress Bar */}\r\n          {isProgressBar && !error && (\r\n            <View style={[styles.progressContainer, { bottom: insets.bottom }]}>\r\n              <View style={styles.progressBar}>\r\n                <Slider\r\n                  style={styles.slider}\r\n                  value={progress}\r\n                  minimumValue={0}\r\n                  maximumValue={1}\r\n                  minimumTrackTintColor=\"#ff3b30\"\r\n                  maximumTrackTintColor=\"rgba(255, 255, 255, 0.3)\"\r\n                  disabled={true}\r\n                />\r\n              </View>\r\n              <View style={styles.timeContainer}>\r\n                <Text style={styles.timeText}>\r\n                  {formatTime(currentTime)} / {formatTime(duration)}\r\n                </Text>\r\n              </View>\r\n            </View>\r\n          )}\r\n\r\n          {/* Close Button Overlay */}\r\n          {(showSkipButton || error) && (\r\n            <Animated.View\r\n              style={[\r\n                styles.closeButtonOverlay,\r\n                {\r\n                  top: insets.top + 24,\r\n                  opacity: buttonOpacity,\r\n                },\r\n              ]}\r\n            >\r\n              <ButtonBase\r\n                onPress={handleClose}\r\n                hitSlop={{ top: 20, bottom: 20, left: 20, right: 20 }}\r\n              >\r\n                <View style={styles.closeButton}>\r\n                  <Text style={styles.closeButtonText}>\r\n                    {error ? txtCloseButton : txtSkipButton}\r\n                  </Text>\r\n                </View>\r\n              </ButtonBase>\r\n            </Animated.View>\r\n          )}\r\n        </View>\r\n\r\n        {/* Backdrop for closing */}\r\n        <TouchableOpacity\r\n          style={styles.backdrop}\r\n          activeOpacity={1}\r\n          onPress={handleBackdropPress}\r\n        />\r\n      </View>\r\n    </ReactNativeModal>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  modalContainer: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    backgroundColor: 'rgba(0, 0, 0, 0.9)',\r\n  },\r\n  modalContent: {\r\n    flex: 1,\r\n    width: '100%',\r\n    height: '100%',\r\n    backgroundColor: '#000',\r\n  },\r\n  header: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    paddingHorizontal: 16,\r\n    paddingVertical: 80,\r\n    backgroundColor: 'rgba(0, 0, 0, 0.8)',\r\n  },\r\n  title: {\r\n    flex: 1,\r\n    color: '#fff',\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n    marginRight: 16,\r\n  },\r\n  closeButton: {\r\n    minWidth: 40,\r\n    borderRadius: 8,\r\n    padding: 8,\r\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n  closeButtonText: {\r\n    color: '#fff',\r\n    fontSize: 20,\r\n    fontWeight: 'bold',\r\n  },\r\n  videoContainer: {\r\n    flex: 1,\r\n    backgroundColor: '#000',\r\n  },\r\n  backdrop: {\r\n    position: 'absolute',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    zIndex: -1,\r\n  },\r\n  closeButtonOverlay: {\r\n    position: 'absolute',\r\n    right: 16,\r\n    zIndex: 10,\r\n  },\r\n  progressContainer: {\r\n    position: 'absolute',\r\n    left: 16,\r\n    right: 16,\r\n    bottom: 100,\r\n    zIndex: 10,\r\n  },\r\n  progressBar: {\r\n    height: 8,\r\n    borderRadius: 4,\r\n    backgroundColor: 'rgba(255, 255, 255, 0.3)',\r\n  },\r\n  slider: {\r\n    height: '100%',\r\n  },\r\n  timeContainer: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    marginTop: 8,\r\n  },\r\n  timeText: {\r\n    color: '#fff',\r\n    fontSize: 12,\r\n  },\r\n  subtitleContainer: {\r\n    position: 'absolute',\r\n    zIndex: 10,\r\n    backgroundColor: 'rgba(0, 0, 0, 0.7)',\r\n    padding: 4,\r\n    borderRadius: 8,\r\n    alignSelf: 'center',\r\n    justifyContent: 'center',\r\n    maxWidth: '80%',\r\n  },\r\n  subtitleText: {\r\n    textAlign: 'center',\r\n    color: '#FFFFFF',\r\n    fontSize: 14,\r\n    fontWeight: '600',\r\n  },\r\n  languageContainer: {\r\n    position: 'absolute',\r\n    left: 16,\r\n    zIndex: 10,\r\n  },\r\n  languageButton: {\r\n    backgroundColor: 'rgba(0, 0, 0, 0.7)',\r\n    paddingHorizontal: 12,\r\n    paddingVertical: 8,\r\n    borderRadius: 6,\r\n    minWidth: 60,\r\n    alignItems: 'center',\r\n  },\r\n  languageButtonText: {\r\n    color: '#fff',\r\n    fontSize: 14,\r\n    fontWeight: '600',\r\n  },\r\n  languageDropdown: {\r\n    position: 'absolute',\r\n    top: 40,\r\n    left: 0,\r\n    backgroundColor: 'rgba(0, 0, 0, 0.9)',\r\n    borderRadius: 6,\r\n    paddingVertical: 4,\r\n    minWidth: 60,\r\n  },\r\n  languageOption: {\r\n    paddingHorizontal: 12,\r\n    paddingVertical: 8,\r\n  },\r\n  languageOptionActive: {\r\n    backgroundColor: 'rgba(255, 59, 48, 0.3)',\r\n  },\r\n  languageOptionText: {\r\n    color: '#fff',\r\n    fontSize: 14,\r\n    textAlign: 'center',\r\n  },\r\n  languageOptionTextActive: {\r\n    color: '#ff3b30',\r\n    fontWeight: '600',\r\n  },\r\n});\r\n"],"mappings":"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","ignoreList":[]}