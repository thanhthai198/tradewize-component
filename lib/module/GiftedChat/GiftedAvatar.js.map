{"version":3,"names":["React","useCallback","useEffect","useState","Image","Text","TouchableOpacity","View","StyleSheet","Color","stylesCommon","carrot","emerald","peterRiver","wisteria","alizarin","turquoise","midnightBlue","styles","create","avatarStyle","width","height","borderRadius","avatarTransparent","backgroundColor","backgroundTransparent","textStyle","color","white","fontSize","fontWeight","GiftedAvatar","props","avatarName","setAvatarName","undefined","setBackgroundColor","user","onPress","setAvatarColor","_name$","_name$2","_name$3","userName","name","toUpperCase","split","length","charAt","sumChars","i","charCodeAt","colors","renderAvatar","avatar","centerItems","createElement","source","uri","style","renderInitials","handleOnPress","rest","handleOnLongPress","onLongPress","accessibilityRole","disabled"],"sources":["GiftedAvatar.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useState } from 'react';\r\nimport {\r\n  Image,\r\n  Text,\r\n  TouchableOpacity,\r\n  View,\r\n  StyleSheet,\r\n  type StyleProp,\r\n  type ImageStyle,\r\n  type TextStyle,\r\n} from 'react-native';\r\nimport Color from './Color';\r\nimport { type User } from './types';\r\nimport stylesCommon from './styles';\r\n\r\nconst {\r\n  carrot,\r\n  emerald,\r\n  peterRiver,\r\n  wisteria,\r\n  alizarin,\r\n  turquoise,\r\n  midnightBlue,\r\n} = Color;\r\n\r\nconst styles = StyleSheet.create({\r\n  avatarStyle: {\r\n    width: 40,\r\n    height: 40,\r\n    borderRadius: 20,\r\n  },\r\n  avatarTransparent: {\r\n    backgroundColor: Color.backgroundTransparent,\r\n  },\r\n  textStyle: {\r\n    color: Color.white,\r\n    fontSize: 16,\r\n    backgroundColor: Color.backgroundTransparent,\r\n    fontWeight: '500',\r\n  },\r\n});\r\n\r\nexport interface GiftedAvatarProps {\r\n  user?: User;\r\n  avatarStyle?: StyleProp<ImageStyle>;\r\n  textStyle?: StyleProp<TextStyle>;\r\n  onPress?: (props: GiftedAvatarProps) => void;\r\n  onLongPress?: (props: GiftedAvatarProps) => void;\r\n}\r\n\r\nexport function GiftedAvatar(props: GiftedAvatarProps) {\r\n  const [avatarName, setAvatarName] = useState<string | undefined>(undefined);\r\n  const [backgroundColor, setBackgroundColor] = useState<string | undefined>(\r\n    undefined\r\n  );\r\n\r\n  const { user, avatarStyle, textStyle, onPress } = props;\r\n\r\n  const setAvatarColor = useCallback(() => {\r\n    if (backgroundColor) return;\r\n\r\n    const userName = user?.name || '';\r\n    const name = userName.toUpperCase().split(' ');\r\n\r\n    if (name.length === 1) setAvatarName(`${name[0]?.charAt(0)}`);\r\n    else if (name.length > 1)\r\n      setAvatarName(`${name[0]?.charAt(0)}${name[1]?.charAt(0)}`);\r\n    else setAvatarName('');\r\n\r\n    let sumChars = 0;\r\n    for (let i = 0; i < userName.length; i += 1)\r\n      sumChars += userName.charCodeAt(i);\r\n\r\n    // inspired by https://github.com/wbinnssmith/react-user-avatar\r\n    // colors from https://flatuicolors.com/\r\n    const colors = [\r\n      carrot,\r\n      emerald,\r\n      peterRiver,\r\n      wisteria,\r\n      alizarin,\r\n      turquoise,\r\n      midnightBlue,\r\n    ];\r\n\r\n    setBackgroundColor(colors[sumChars % colors.length]);\r\n  }, [user?.name, backgroundColor]);\r\n\r\n  const renderAvatar = useCallback(() => {\r\n    switch (typeof user?.avatar) {\r\n      case 'function':\r\n        return user.avatar([\r\n          stylesCommon.centerItems,\r\n          styles.avatarStyle,\r\n          avatarStyle,\r\n        ]);\r\n      case 'string':\r\n        return (\r\n          <Image\r\n            source={{ uri: user.avatar }}\r\n            style={[stylesCommon.centerItems, styles.avatarStyle, avatarStyle]}\r\n          />\r\n        );\r\n      case 'number':\r\n        return (\r\n          <Image\r\n            source={user.avatar}\r\n            style={[stylesCommon.centerItems, styles.avatarStyle, avatarStyle]}\r\n          />\r\n        );\r\n      default:\r\n        return null;\r\n    }\r\n  }, [user, avatarStyle]);\r\n\r\n  const renderInitials = useCallback(() => {\r\n    return <Text style={[styles.textStyle, textStyle]}>{avatarName}</Text>;\r\n  }, [textStyle, avatarName]);\r\n\r\n  const handleOnPress = () => {\r\n    const { onPress, ...rest } = props;\r\n\r\n    if (onPress) onPress(rest);\r\n  };\r\n\r\n  const handleOnLongPress = () => {\r\n    const { onLongPress, ...rest } = props;\r\n\r\n    if (onLongPress) onLongPress(rest);\r\n  };\r\n\r\n  useEffect(() => {\r\n    setAvatarColor();\r\n  }, [setAvatarColor]);\r\n\r\n  if (!user || (!user.name && !user.avatar))\r\n    // render placeholder\r\n    return (\r\n      <View\r\n        style={[\r\n          stylesCommon.centerItems,\r\n          styles.avatarStyle,\r\n          styles.avatarTransparent,\r\n          avatarStyle,\r\n        ]}\r\n        accessibilityRole=\"image\"\r\n      />\r\n    );\r\n\r\n  if (user.avatar)\r\n    return (\r\n      <TouchableOpacity\r\n        disabled={!onPress}\r\n        onPress={handleOnPress}\r\n        onLongPress={handleOnLongPress}\r\n        accessibilityRole=\"image\"\r\n      >\r\n        {renderAvatar()}\r\n      </TouchableOpacity>\r\n    );\r\n\r\n  return (\r\n    <TouchableOpacity\r\n      disabled={!onPress}\r\n      onPress={handleOnPress}\r\n      onLongPress={handleOnLongPress}\r\n      style={[\r\n        stylesCommon.centerItems,\r\n        styles.avatarStyle,\r\n        { backgroundColor },\r\n        avatarStyle,\r\n      ]}\r\n      accessibilityRole=\"image\"\r\n    >\r\n      {renderInitials()}\r\n    </TouchableOpacity>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]}