{"version":3,"names":["React","useCallback","useEffect","useState","Image","Text","TouchableOpacity","View","StyleSheet","Color","stylesCommon","carrot","emerald","peterRiver","wisteria","alizarin","turquoise","midnightBlue","styles","create","avatarStyle","width","height","borderRadius","avatarTransparent","backgroundColor","backgroundTransparent","textStyle","color","white","fontSize","fontWeight","GiftedAvatar","props","avatarName","setAvatarName","undefined","setBackgroundColor","user","onPress","setAvatarColor","_name$","_name$2","_name$3","userName","name","toUpperCase","split","length","charAt","sumChars","i","charCodeAt","colors","renderAvatar","avatar","centerItems","createElement","source","uri","style","renderInitials","handleOnPress","rest","handleOnLongPress","onLongPress","accessibilityRole","disabled"],"sources":["GiftedAvatar.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useState } from 'react';\nimport {\n  Image,\n  Text,\n  TouchableOpacity,\n  View,\n  StyleSheet,\n  type StyleProp,\n  type ImageStyle,\n  type TextStyle,\n} from 'react-native';\nimport Color from './Color';\nimport { type User } from './types';\nimport stylesCommon from './styles';\n\nconst {\n  carrot,\n  emerald,\n  peterRiver,\n  wisteria,\n  alizarin,\n  turquoise,\n  midnightBlue,\n} = Color;\n\nconst styles = StyleSheet.create({\n  avatarStyle: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n  },\n  avatarTransparent: {\n    backgroundColor: Color.backgroundTransparent,\n  },\n  textStyle: {\n    color: Color.white,\n    fontSize: 16,\n    backgroundColor: Color.backgroundTransparent,\n    fontWeight: '500',\n  },\n});\n\nexport interface GiftedAvatarProps {\n  user?: User;\n  avatarStyle?: StyleProp<ImageStyle>;\n  textStyle?: StyleProp<TextStyle>;\n  onPress?: (props: GiftedAvatarProps) => void;\n  onLongPress?: (props: GiftedAvatarProps) => void;\n}\n\nexport function GiftedAvatar(props: GiftedAvatarProps) {\n  const [avatarName, setAvatarName] = useState<string | undefined>(undefined);\n  const [backgroundColor, setBackgroundColor] = useState<string | undefined>(\n    undefined\n  );\n\n  const { user, avatarStyle, textStyle, onPress } = props;\n\n  const setAvatarColor = useCallback(() => {\n    if (backgroundColor) return;\n\n    const userName = user?.name || '';\n    const name = userName.toUpperCase().split(' ');\n\n    if (name.length === 1) setAvatarName(`${name[0]?.charAt(0)}`);\n    else if (name.length > 1)\n      setAvatarName(`${name[0]?.charAt(0)}${name[1]?.charAt(0)}`);\n    else setAvatarName('');\n\n    let sumChars = 0;\n    for (let i = 0; i < userName.length; i += 1)\n      sumChars += userName.charCodeAt(i);\n\n    // inspired by https://github.com/wbinnssmith/react-user-avatar\n    // colors from https://flatuicolors.com/\n    const colors = [\n      carrot,\n      emerald,\n      peterRiver,\n      wisteria,\n      alizarin,\n      turquoise,\n      midnightBlue,\n    ];\n\n    setBackgroundColor(colors[sumChars % colors.length]);\n  }, [user?.name, backgroundColor]);\n\n  const renderAvatar = useCallback(() => {\n    switch (typeof user?.avatar) {\n      case 'function':\n        return user.avatar([\n          stylesCommon.centerItems,\n          styles.avatarStyle,\n          avatarStyle,\n        ]);\n      case 'string':\n        return (\n          <Image\n            source={{ uri: user.avatar }}\n            style={[stylesCommon.centerItems, styles.avatarStyle, avatarStyle]}\n          />\n        );\n      case 'number':\n        return (\n          <Image\n            source={user.avatar}\n            style={[stylesCommon.centerItems, styles.avatarStyle, avatarStyle]}\n          />\n        );\n      default:\n        return null;\n    }\n  }, [user, avatarStyle]);\n\n  const renderInitials = useCallback(() => {\n    return <Text style={[styles.textStyle, textStyle]}>{avatarName}</Text>;\n  }, [textStyle, avatarName]);\n\n  const handleOnPress = () => {\n    const { onPress, ...rest } = props;\n\n    if (onPress) onPress(rest);\n  };\n\n  const handleOnLongPress = () => {\n    const { onLongPress, ...rest } = props;\n\n    if (onLongPress) onLongPress(rest);\n  };\n\n  useEffect(() => {\n    setAvatarColor();\n  }, [setAvatarColor]);\n\n  if (!user || (!user.name && !user.avatar))\n    // render placeholder\n    return (\n      <View\n        style={[\n          stylesCommon.centerItems,\n          styles.avatarStyle,\n          styles.avatarTransparent,\n          avatarStyle,\n        ]}\n        accessibilityRole=\"image\"\n      />\n    );\n\n  if (user.avatar)\n    return (\n      <TouchableOpacity\n        disabled={!onPress}\n        onPress={handleOnPress}\n        onLongPress={handleOnLongPress}\n        accessibilityRole=\"image\"\n      >\n        {renderAvatar()}\n      </TouchableOpacity>\n    );\n\n  return (\n    <TouchableOpacity\n      disabled={!onPress}\n      onPress={handleOnPress}\n      onLongPress={handleOnLongPress}\n      style={[\n        stylesCommon.centerItems,\n        styles.avatarStyle,\n        { backgroundColor },\n        avatarStyle,\n      ]}\n      accessibilityRole=\"image\"\n    >\n      {renderInitials()}\n    </TouchableOpacity>\n  );\n}\n"],"mappings":"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","ignoreList":[]}