{"version":3,"names":["React","useMemo","StyleSheet","Text","TouchableOpacity","View","Composer","Send","Actions","Color","getScreenWidth","FastImage","formatDurationSmart","InputToolbar","props","renderActions","onPressActionButton","renderComposer","renderSend","renderAccessory","options","optionTintColor","icon","wrapperStyle","containerStyle","onPressPickMedia","fileMedia","onRemoveFile","onPressFile","actionsFragment","createElement","composerFragment","_extends","ref","inputRef","renderFileMedia","length","style","styles","previewFile","map","item","onPress","key","id","previewFileItem","width","height","removeFile","removeFileText","source","uri","thumbnailPreview","previewFileItemImage","typeFile","iconPlayContainer","top","right","require","iconPlay","previewFileItemVideo","previewFileItemVideoText","duration","container","primary","primaryStyle","accessory","accessoryStyle","create","borderTopWidth","hairlineWidth","borderTopColor","defaultColor","backgroundColor","white","paddingHorizontal","paddingVertical","flexDirection","alignItems","gap","marginTop","borderRadius","overflow","borderWidth","borderColor","position","bottom","color","fontSize","fontWeight","zIndex","justifyContent","marginLeft"],"sources":["InputToolbar.tsx"],"sourcesContent":["import React, { useMemo } from 'react';\nimport {\n  StyleSheet,\n  Text,\n  TextInput,\n  TouchableOpacity,\n  View,\n  type StyleProp,\n  type ViewStyle,\n} from 'react-native';\n\nimport { Composer, type ComposerProps } from './Composer';\nimport { Send, type SendProps } from './Send';\nimport { Actions, type ActionsProps } from './Actions';\nimport Color from './Color';\nimport { type FileMessage, type IMessage } from './types';\nimport { getScreenWidth } from '../utils';\nimport FastImage from 'react-native-fast-image';\nimport { formatDurationSmart } from './utils';\n\nexport interface InputToolbarProps<TMessage extends IMessage> {\n  options?: { [key: string]: () => void };\n  optionTintColor?: string;\n  containerStyle?: StyleProp<ViewStyle>;\n  primaryStyle?: StyleProp<ViewStyle>;\n  accessoryStyle?: StyleProp<ViewStyle>;\n  renderAccessory?(props: InputToolbarProps<TMessage>): React.ReactNode;\n  renderActions?(props: ActionsProps): React.ReactNode;\n  renderSend?(props: SendProps<TMessage>): React.ReactNode;\n  renderComposer?(props: ComposerProps): React.ReactNode;\n  onPressActionButton?(): void;\n  icon?: () => React.ReactNode;\n  wrapperStyle?: StyleProp<ViewStyle>;\n  inputRef?: React.RefObject<TextInput>;\n  onPressPickMedia?: (type: 'camera' | 'pick') => void;\n  fileMedia?: FileMessage[];\n  onRemoveFile?: (file: FileMessage) => void;\n  onPressFile?: (file: FileMessage) => void;\n}\n\nexport function InputToolbar<TMessage extends IMessage = IMessage>(\n  props: InputToolbarProps<TMessage>\n) {\n  const {\n    renderActions,\n    onPressActionButton,\n    renderComposer,\n    renderSend,\n    renderAccessory,\n    options,\n    optionTintColor,\n    icon,\n    wrapperStyle,\n    containerStyle,\n    onPressPickMedia,\n    fileMedia,\n    onRemoveFile,\n    onPressFile,\n  } = props;\n\n  const actionsFragment = useMemo(() => {\n    const props = {\n      onPressActionButton,\n      options,\n      optionTintColor,\n      icon,\n      wrapperStyle,\n      containerStyle,\n      onPressPickMedia,\n    };\n\n    return (\n      renderActions?.(props) || (onPressActionButton && <Actions {...props} />)\n    );\n  }, [\n    renderActions,\n    onPressActionButton,\n    options,\n    optionTintColor,\n    icon,\n    wrapperStyle,\n    containerStyle,\n    onPressPickMedia,\n  ]);\n\n  const composerFragment = useMemo(() => {\n    return (\n      renderComposer?.(props as ComposerProps) || (\n        <Composer\n          ref={props?.inputRef}\n          {...(props as ComposerProps)}\n          onPressPickMedia={props.onPressPickMedia}\n        />\n      )\n    );\n  }, [renderComposer, props]);\n\n  const renderFileMedia = useMemo(() => {\n    if (!fileMedia?.length) return null;\n\n    return (\n      <View style={styles.previewFile}>\n        {fileMedia?.map((item) => {\n          return (\n            <TouchableOpacity\n              onPress={() => {\n                onPressFile?.(item);\n              }}\n              key={item.id}\n              style={[\n                styles.previewFileItem,\n                {\n                  width: getScreenWidth() * 0.22,\n                  height: getScreenWidth() * 0.22,\n                },\n              ]}\n            >\n              <TouchableOpacity\n                onPress={() => {\n                  onRemoveFile?.(item);\n                }}\n                style={[\n                  styles.removeFile,\n                  {\n                    width: getScreenWidth() * 0.06,\n                    height: getScreenWidth() * 0.06,\n                  },\n                ]}\n              >\n                <Text style={styles.removeFileText}>X</Text>\n              </TouchableOpacity>\n\n              <FastImage\n                source={{ uri: item.thumbnailPreview }}\n                style={styles.previewFileItemImage}\n              />\n\n              {item.typeFile === 'video' && (\n                <View\n                  style={[\n                    styles.iconPlayContainer,\n                    {\n                      width: getScreenWidth() * 0.1,\n                      height: getScreenWidth() * 0.1,\n                      top:\n                        (getScreenWidth() * 0.22) / 2 -\n                        (getScreenWidth() * 0.1) / 2,\n                      right:\n                        (getScreenWidth() * 0.22) / 2 -\n                        (getScreenWidth() * 0.1) / 2,\n                    },\n                  ]}\n                >\n                  <FastImage\n                    source={require('../assets/play.png')}\n                    style={styles.iconPlay}\n                  />\n                </View>\n              )}\n\n              {item.typeFile === 'video' && (\n                <View style={styles.previewFileItemVideo}>\n                  <Text style={styles.previewFileItemVideoText}>\n                    {formatDurationSmart(item?.duration || 0)}\n                  </Text>\n                </View>\n              )}\n            </TouchableOpacity>\n          );\n        })}\n      </View>\n    );\n  }, [fileMedia, onRemoveFile, onPressFile]);\n\n  return (\n    <View style={[styles.container, containerStyle]}>\n      <View style={[styles.primary, props.primaryStyle]}>\n        {actionsFragment}\n        {composerFragment}\n        {renderSend?.(props) || <Send {...props} />}\n      </View>\n      {renderAccessory && (\n        <View style={[styles.accessory, props.accessoryStyle]}>\n          {renderAccessory(props)}\n        </View>\n      )}\n      {renderFileMedia}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    borderTopWidth: StyleSheet.hairlineWidth,\n    borderTopColor: Color.defaultColor,\n    backgroundColor: Color.white,\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n  },\n  primary: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  accessory: {\n    height: 44,\n  },\n  previewFile: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n    marginTop: 8,\n  },\n  previewFileItem: {\n    borderRadius: 8,\n    overflow: 'hidden',\n    backgroundColor: Color.defaultColor,\n    borderWidth: 1,\n    borderColor: Color.defaultColor,\n  },\n  previewFileItemImage: {\n    width: '100%',\n    height: '100%',\n  },\n  previewFileItemVideo: {\n    position: 'absolute',\n    bottom: 2,\n    right: 4,\n  },\n  previewFileItemVideoText: {\n    color: Color.white,\n    fontSize: 12,\n    fontWeight: 'bold',\n  },\n  removeFile: {\n    position: 'absolute',\n    top: 4,\n    right: 4,\n    backgroundColor: Color.defaultColor,\n    borderRadius: 100,\n    zIndex: 10,\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: Color.white,\n  },\n  removeFileText: {\n    color: Color.white,\n    fontSize: 14,\n    fontWeight: 'bold',\n  },\n  iconPlay: {\n    width: 24,\n    height: 24,\n    marginLeft: 4,\n  },\n  iconPlayContainer: {\n    position: 'absolute',\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(255, 255, 255, 0.5)',\n    borderRadius: 100,\n  },\n});\n"],"mappings":"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","ignoreList":[]}