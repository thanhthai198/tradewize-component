{"version":3,"names":["React","useEffect","useRef","Animated","View","StyleSheet","Color","TypingIndicator","size","speed","dotColor","defaultBlue","bubbleColor","leftBubbleBackground","style","v1","Value","current","v2","v3","animate","v","delay","loop","sequence","timing","toValue","duration","useNativeDriver","a1","a2","a3","start","stop","dotAnimStyle","opacity","interpolate","inputRange","outputRange","transform","translateY","scale","dotBase","width","height","borderRadius","backgroundColor","marginHorizontal","Math","max","round","createElement","styles","container","paddingVertical","paddingHorizontal","create","flexDirection","alignItems","alignSelf","justifyContent","borderWidth","borderColor","defaultColor","marginBottom","marginLeft"],"sources":["TypingIndicator.tsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport { Animated, View, StyleSheet, type ViewStyle } from 'react-native';\r\nimport Color from './Color';\r\n\r\ntype Props = {\r\n  size?: number; // đường kính mỗi chấm\r\n  speed?: number; // ms cho 1 nhịp lên/xuống\r\n  dotColor?: string;\r\n  bubbleColor?: string;\r\n  style?: ViewStyle | ViewStyle[];\r\n};\r\n\r\nconst TypingIndicator = ({\r\n  size = 6,\r\n  speed = 320,\r\n  dotColor = Color.defaultBlue,\r\n  bubbleColor = Color.leftBubbleBackground,\r\n  style,\r\n}: Props) => {\r\n  const v1 = useRef(new Animated.Value(0)).current;\r\n  const v2 = useRef(new Animated.Value(0)).current;\r\n  const v3 = useRef(new Animated.Value(0)).current;\r\n\r\n  const animate = (v: Animated.Value, delay: number) =>\r\n    Animated.loop(\r\n      Animated.sequence([\r\n        Animated.delay(delay),\r\n        Animated.timing(v, {\r\n          toValue: 1,\r\n          duration: speed,\r\n          useNativeDriver: true,\r\n        }),\r\n        Animated.timing(v, {\r\n          toValue: 0,\r\n          duration: speed,\r\n          useNativeDriver: true,\r\n        }),\r\n      ])\r\n    );\r\n\r\n  useEffect(() => {\r\n    const a1 = animate(v1, 0);\r\n    const a2 = animate(v2, speed / 2);\r\n    const a3 = animate(v3, speed);\r\n\r\n    a1.start();\r\n    a2.start();\r\n    a3.start();\r\n    return () => {\r\n      a1.stop();\r\n      a2.stop();\r\n      a3.stop();\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [speed, v1, v2, v3]);\r\n\r\n  const dotAnimStyle = (v: Animated.Value) => ({\r\n    opacity: v.interpolate({ inputRange: [0, 1], outputRange: [0.3, 1] }),\r\n    transform: [\r\n      {\r\n        translateY: v.interpolate({ inputRange: [0, 1], outputRange: [0, -1] }),\r\n      },\r\n      { scale: v.interpolate({ inputRange: [0, 1], outputRange: [1, 1.15] }) },\r\n    ],\r\n  });\r\n\r\n  const dotBase = {\r\n    width: size,\r\n    height: size,\r\n    borderRadius: size / 2,\r\n    backgroundColor: dotColor,\r\n    marginHorizontal: Math.max(1, Math.round(size * 0.33)),\r\n  };\r\n\r\n  return (\r\n    <View\r\n      style={[\r\n        styles.container,\r\n        {\r\n          backgroundColor: bubbleColor,\r\n          paddingVertical: Math.max(4, Math.round(size * 0.8)),\r\n          paddingHorizontal: Math.max(6, Math.round(size * 1.2)),\r\n          borderRadius: Math.round(size * 2.2),\r\n        },\r\n        style,\r\n      ]}\r\n    >\r\n      <Animated.View style={[dotBase, dotAnimStyle(v1)]} />\r\n      <Animated.View style={[dotBase, dotAnimStyle(v2)]} />\r\n      <Animated.View style={[dotBase, dotAnimStyle(v3)]} />\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    alignSelf: 'flex-start',\r\n    height: 24,\r\n    width: 56,\r\n    justifyContent: 'center',\r\n    borderWidth: 0.2,\r\n    borderColor: Color.defaultColor,\r\n    marginBottom: 8,\r\n    marginLeft: 8,\r\n  },\r\n});\r\n\r\nexport default TypingIndicator;\r\n"],"mappings":"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","ignoreList":[]}