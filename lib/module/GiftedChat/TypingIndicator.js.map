{"version":3,"names":["React","useEffect","useRef","Animated","View","StyleSheet","Color","TypingIndicator","size","speed","dotColor","defaultBlue","bubbleColor","leftBubbleBackground","style","isTyping","v1","Value","current","v2","v3","animate","v","delay","loop","sequence","timing","toValue","duration","useNativeDriver","a1","a2","a3","start","stop","dotAnimStyle","opacity","interpolate","inputRange","outputRange","transform","translateY","scale","dotBase","width","height","borderRadius","backgroundColor","marginHorizontal","Math","max","round","createElement","styles","space","container","paddingVertical","paddingHorizontal","create","flexDirection","alignItems","alignSelf","justifyContent","borderWidth","borderColor","defaultColor","marginBottom","marginLeft"],"sources":["TypingIndicator.tsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport { Animated, View, StyleSheet, type ViewStyle } from 'react-native';\nimport Color from './Color';\n\ntype Props = {\n  isTyping: boolean;\n  size?: number; // đường kính mỗi chấm\n  speed?: number; // ms cho 1 nhịp lên/xuống\n  dotColor?: string;\n  bubbleColor?: string;\n  style?: ViewStyle | ViewStyle[];\n};\n\nconst TypingIndicator = ({\n  size = 6,\n  speed = 320,\n  dotColor = Color.defaultBlue,\n  bubbleColor = Color.leftBubbleBackground,\n  style,\n  isTyping,\n}: Props) => {\n  const v1 = useRef(new Animated.Value(0)).current;\n  const v2 = useRef(new Animated.Value(0)).current;\n  const v3 = useRef(new Animated.Value(0)).current;\n\n  const animate = (v: Animated.Value, delay: number) =>\n    Animated.loop(\n      Animated.sequence([\n        Animated.delay(delay),\n        Animated.timing(v, {\n          toValue: 1,\n          duration: speed,\n          useNativeDriver: true,\n        }),\n        Animated.timing(v, {\n          toValue: 0,\n          duration: speed,\n          useNativeDriver: true,\n        }),\n      ])\n    );\n\n  useEffect(() => {\n    const a1 = animate(v1, 0);\n    const a2 = animate(v2, speed / 2);\n    const a3 = animate(v3, speed);\n\n    a1.start();\n    a2.start();\n    a3.start();\n    return () => {\n      a1.stop();\n      a2.stop();\n      a3.stop();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [speed, v1, v2, v3]);\n\n  const dotAnimStyle = (v: Animated.Value) => ({\n    opacity: v.interpolate({ inputRange: [0, 1], outputRange: [0.3, 1] }),\n    transform: [\n      {\n        translateY: v.interpolate({ inputRange: [0, 1], outputRange: [0, -1] }),\n      },\n      { scale: v.interpolate({ inputRange: [0, 1], outputRange: [1, 1.15] }) },\n    ],\n  });\n\n  const dotBase = {\n    width: size,\n    height: size,\n    borderRadius: size / 2,\n    backgroundColor: dotColor,\n    marginHorizontal: Math.max(1, Math.round(size * 0.33)),\n  };\n\n  if (!isTyping) {\n    return <View style={styles.space} />;\n  }\n\n  return (\n    <View\n      style={[\n        styles.container,\n        {\n          opacity: isTyping ? 1 : 0,\n        },\n        {\n          backgroundColor: bubbleColor,\n          paddingVertical: Math.max(4, Math.round(size * 0.8)),\n          paddingHorizontal: Math.max(6, Math.round(size * 1.2)),\n          borderRadius: Math.round(size * 2.2),\n        },\n        style,\n      ]}\n    >\n      <Animated.View style={[dotBase, dotAnimStyle(v1)]} />\n      <Animated.View style={[dotBase, dotAnimStyle(v2)]} />\n      <Animated.View style={[dotBase, dotAnimStyle(v3)]} />\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    alignSelf: 'flex-start',\n    height: 24,\n    width: 56,\n    justifyContent: 'center',\n    borderWidth: 0.2,\n    borderColor: Color.defaultColor,\n    marginBottom: 8,\n    marginLeft: 8,\n  },\n  space: {\n    height: 12,\n  },\n});\n\nexport default TypingIndicator;\n"],"mappings":"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","ignoreList":[]}