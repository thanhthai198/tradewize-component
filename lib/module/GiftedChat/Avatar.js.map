{"version":3,"names":["useCallback","StyleSheet","View","GiftedAvatar","isSameUser","isSameDay","styles","left","create","container","marginRight","onTop","alignSelf","image","height","width","borderRadius","right","marginLeft","Avatar","props","renderAvatarOnTop","showAvatarForEveryMessage","containerStyle","position","currentMessage","renderAvatar","previousMessage","nextMessage","imageStyle","onPressAvatar","onLongPressAvatar","onLayout","messageToCompare","renderAvatarComponent","React","createElement","avatarStyle","user","onPress","onLongPress","style","marginBottom","isLast"],"sources":["Avatar.tsx"],"sourcesContent":["/* eslint-disable react-native/no-inline-styles */\nimport { type ReactNode, useCallback } from 'react';\nimport {\n  type ImageStyle,\n  type LayoutChangeEvent,\n  StyleSheet,\n  type TextStyle,\n  View,\n  type ViewStyle,\n} from 'react-native';\nimport { GiftedAvatar } from './GiftedAvatar';\nimport { isSameUser, isSameDay } from './utils';\nimport { type IMessage, type LeftRightStyle, type User } from './types';\n\ninterface Styles {\n  left: {\n    container: ViewStyle;\n    onTop: ViewStyle;\n    image: ImageStyle;\n  };\n  right: {\n    container: ViewStyle;\n    onTop: ViewStyle;\n    image: ImageStyle;\n  };\n}\n\nconst styles: Styles = {\n  left: StyleSheet.create({\n    container: {\n      marginRight: 8,\n    },\n    onTop: {\n      alignSelf: 'flex-start',\n    },\n    image: {\n      height: 36,\n      width: 36,\n      borderRadius: 18,\n    },\n  }),\n  right: StyleSheet.create({\n    container: {\n      marginLeft: 8,\n    },\n    onTop: {\n      alignSelf: 'flex-start',\n    },\n    image: {\n      height: 36,\n      width: 36,\n      borderRadius: 18,\n    },\n  }),\n};\n\nexport interface AvatarProps<TMessage extends IMessage> {\n  currentMessage: TMessage;\n  previousMessage?: TMessage;\n  nextMessage?: TMessage;\n  position: 'left' | 'right';\n  renderAvatarOnTop?: boolean;\n  showAvatarForEveryMessage?: boolean;\n  imageStyle?: LeftRightStyle<ImageStyle>;\n  containerStyle?: LeftRightStyle<ViewStyle>;\n  textStyle?: TextStyle;\n  renderAvatar?(props: Omit<AvatarProps<TMessage>, 'renderAvatar'>): ReactNode;\n  onPressAvatar?: (user: User) => void;\n  onLongPressAvatar?: (user: User) => void;\n  onLayout?: (e: LayoutChangeEvent) => void;\n}\n\nexport function Avatar<TMessage extends IMessage = IMessage>(\n  props: AvatarProps<TMessage>\n) {\n  const {\n    renderAvatarOnTop,\n    showAvatarForEveryMessage,\n    containerStyle,\n    position,\n    currentMessage,\n    renderAvatar,\n    previousMessage,\n    nextMessage,\n    imageStyle,\n    onPressAvatar,\n    onLongPressAvatar,\n    onLayout,\n  } = props;\n\n  const messageToCompare = renderAvatarOnTop ? previousMessage : nextMessage;\n\n  const renderAvatarComponent = useCallback(() => {\n    if (renderAvatar)\n      return renderAvatar({\n        renderAvatarOnTop,\n        showAvatarForEveryMessage,\n        containerStyle,\n        position,\n        currentMessage,\n        previousMessage,\n        nextMessage,\n        imageStyle,\n        onPressAvatar,\n        onLongPressAvatar,\n      });\n\n    if (currentMessage)\n      return (\n        <GiftedAvatar\n          avatarStyle={[styles[position].image, imageStyle?.[position]]}\n          user={currentMessage.user}\n          onPress={() => onPressAvatar?.(currentMessage.user)}\n          onLongPress={() => onLongPressAvatar?.(currentMessage.user)}\n        />\n      );\n\n    return null;\n  }, [\n    renderAvatar,\n    renderAvatarOnTop,\n    showAvatarForEveryMessage,\n    containerStyle,\n    position,\n    currentMessage,\n    previousMessage,\n    nextMessage,\n    imageStyle,\n    onPressAvatar,\n    onLongPressAvatar,\n  ]);\n\n  if (renderAvatar === null) return null;\n\n  if (\n    !showAvatarForEveryMessage &&\n    currentMessage &&\n    messageToCompare &&\n    isSameUser(currentMessage, messageToCompare) &&\n    isSameDay(currentMessage, messageToCompare)\n  )\n    return (\n      <View style={[styles[position].container, containerStyle?.[position]]}>\n        <GiftedAvatar\n          avatarStyle={[styles[position].image, imageStyle?.[position]]}\n        />\n      </View>\n    );\n\n  return (\n    <View\n      style={[\n        styles[position].container,\n        renderAvatarOnTop && styles[position].onTop,\n        containerStyle?.[position],\n        { marginBottom: currentMessage?.isLast ? 32 : 0 },\n      ]}\n      onLayout={onLayout}\n    >\n      {renderAvatarComponent()}\n    </View>\n  );\n}\n"],"mappings":"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","ignoreList":[]}