{"version":3,"names":["React","useCallback","StyleSheet","View","GiftedAvatar","isSameUser","isSameDay","styles","left","create","container","marginRight","onTop","alignSelf","image","height","width","borderRadius","right","marginLeft","Avatar","props","renderAvatarOnTop","showAvatarForEveryMessage","containerStyle","position","currentMessage","renderAvatar","previousMessage","nextMessage","imageStyle","onPressAvatar","onLongPressAvatar","onLayout","messageToCompare","renderAvatarComponent","createElement","avatarStyle","user","onPress","onLongPress","style","marginBottom","isLast"],"sources":["Avatar.tsx"],"sourcesContent":["/* eslint-disable react-native/no-inline-styles */\r\nimport React, { type ReactNode, useCallback } from 'react';\r\nimport {\r\n  type ImageStyle,\r\n  type LayoutChangeEvent,\r\n  StyleSheet,\r\n  type TextStyle,\r\n  View,\r\n  type ViewStyle,\r\n} from 'react-native';\r\nimport { GiftedAvatar } from './GiftedAvatar';\r\nimport { isSameUser, isSameDay } from './utils';\r\nimport { type IMessage, type LeftRightStyle, type User } from './types';\r\n\r\ninterface Styles {\r\n  left: {\r\n    container: ViewStyle;\r\n    onTop: ViewStyle;\r\n    image: ImageStyle;\r\n  };\r\n  right: {\r\n    container: ViewStyle;\r\n    onTop: ViewStyle;\r\n    image: ImageStyle;\r\n  };\r\n}\r\n\r\nconst styles: Styles = {\r\n  left: StyleSheet.create({\r\n    container: {\r\n      marginRight: 8,\r\n    },\r\n    onTop: {\r\n      alignSelf: 'flex-start',\r\n    },\r\n    image: {\r\n      height: 36,\r\n      width: 36,\r\n      borderRadius: 18,\r\n    },\r\n  }),\r\n  right: StyleSheet.create({\r\n    container: {\r\n      marginLeft: 8,\r\n    },\r\n    onTop: {\r\n      alignSelf: 'flex-start',\r\n    },\r\n    image: {\r\n      height: 36,\r\n      width: 36,\r\n      borderRadius: 18,\r\n    },\r\n  }),\r\n};\r\n\r\nexport interface AvatarProps<TMessage extends IMessage> {\r\n  currentMessage: TMessage;\r\n  previousMessage?: TMessage;\r\n  nextMessage?: TMessage;\r\n  position: 'left' | 'right';\r\n  renderAvatarOnTop?: boolean;\r\n  showAvatarForEveryMessage?: boolean;\r\n  imageStyle?: LeftRightStyle<ImageStyle>;\r\n  containerStyle?: LeftRightStyle<ViewStyle>;\r\n  textStyle?: TextStyle;\r\n  renderAvatar?(props: Omit<AvatarProps<TMessage>, 'renderAvatar'>): ReactNode;\r\n  onPressAvatar?: (user: User) => void;\r\n  onLongPressAvatar?: (user: User) => void;\r\n  onLayout?: (e: LayoutChangeEvent) => void;\r\n}\r\n\r\nexport function Avatar<TMessage extends IMessage = IMessage>(\r\n  props: AvatarProps<TMessage>\r\n) {\r\n  const {\r\n    renderAvatarOnTop,\r\n    showAvatarForEveryMessage,\r\n    containerStyle,\r\n    position,\r\n    currentMessage,\r\n    renderAvatar,\r\n    previousMessage,\r\n    nextMessage,\r\n    imageStyle,\r\n    onPressAvatar,\r\n    onLongPressAvatar,\r\n    onLayout,\r\n  } = props;\r\n\r\n  const messageToCompare = renderAvatarOnTop ? previousMessage : nextMessage;\r\n\r\n  const renderAvatarComponent = useCallback(() => {\r\n    if (renderAvatar)\r\n      return renderAvatar({\r\n        renderAvatarOnTop,\r\n        showAvatarForEveryMessage,\r\n        containerStyle,\r\n        position,\r\n        currentMessage,\r\n        previousMessage,\r\n        nextMessage,\r\n        imageStyle,\r\n        onPressAvatar,\r\n        onLongPressAvatar,\r\n      });\r\n\r\n    if (currentMessage)\r\n      return (\r\n        <GiftedAvatar\r\n          avatarStyle={[styles[position].image, imageStyle?.[position]]}\r\n          user={currentMessage.user}\r\n          onPress={() => onPressAvatar?.(currentMessage.user)}\r\n          onLongPress={() => onLongPressAvatar?.(currentMessage.user)}\r\n        />\r\n      );\r\n\r\n    return null;\r\n  }, [\r\n    renderAvatar,\r\n    renderAvatarOnTop,\r\n    showAvatarForEveryMessage,\r\n    containerStyle,\r\n    position,\r\n    currentMessage,\r\n    previousMessage,\r\n    nextMessage,\r\n    imageStyle,\r\n    onPressAvatar,\r\n    onLongPressAvatar,\r\n  ]);\r\n\r\n  if (renderAvatar === null) return null;\r\n\r\n  if (\r\n    !showAvatarForEveryMessage &&\r\n    currentMessage &&\r\n    messageToCompare &&\r\n    isSameUser(currentMessage, messageToCompare) &&\r\n    isSameDay(currentMessage, messageToCompare)\r\n  )\r\n    return (\r\n      <View style={[styles[position].container, containerStyle?.[position]]}>\r\n        <GiftedAvatar\r\n          avatarStyle={[styles[position].image, imageStyle?.[position]]}\r\n        />\r\n      </View>\r\n    );\r\n\r\n  return (\r\n    <View\r\n      style={[\r\n        styles[position].container,\r\n        renderAvatarOnTop && styles[position].onTop,\r\n        containerStyle?.[position],\r\n        { marginBottom: currentMessage?.isLast ? 32 : 0 },\r\n      ]}\r\n      onLayout={onLayout}\r\n    >\r\n      {renderAvatarComponent()}\r\n    </View>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]}