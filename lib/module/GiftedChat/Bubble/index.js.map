{"version":3,"names":["React","useCallback","useRef","useState","findNodeHandle","Text","TouchableOpacity","TouchableWithoutFeedback","UIManager","View","useChatContext","QuickReplies","MessageText","MessageAudio","Time","isSameUser","isSameDay","stylesCommon","styles","MessageFile","Color","MessageReply","MaterialIndicator","FastImage","Bubble","props","_props$user2","_currentMessage$user","_currentMessage$react2","currentMessage","nextMessage","position","previousMessage","containerToPreviousStyle","onQuickReply","renderQuickReplySend","quickReplyStyle","quickReplyTextStyle","quickReplyContainerStyle","containerStyle","wrapperStyle","bottomContainerStyle","onPressFile","onLongPressReaction","context","messageWidth","setMessageWidth","innerRef","refArrThumbnail","onPress","onLongPress","optionTitles","length","options","cancelButtonIndex","actionSheet","showActionSheetWithOptions","buttonIndex","console","log","onLongPressItem","current","node","measure","x","y","width","height","pageX","pageY","error","styledBubbleToPrevious","containerToPrevious","renderQuickReplies","quickReplies","quickReplyProps","createElement","onSaveThumbnail","file","renderMessageText","text","messageTextProps","renderMessageFile","messageFileProps","renderCustomMessageFile","_extends","onLongPressFile","renderMessageAudio","audio","messageAudioProps","renderTicks","user","_id","sent","received","pending","style","content","tickView","tick","tickStyle","renderTime","createdAt","textStyle","timeProps","renderUsername","renderUsernameOnMessage","usernameView","username","usernameStyle","name","renderCustomView","renderReactionEmoji","_props$user","isCurrentUser","reactionPosition","reactionEmoji","Set","Array","isArray","map","item","reaction","_currentMessage$react","backgroundColor","white","minWidth","borderRadius","justifyContent","alignItems","borderWidth","borderColor","leftBubbleBackground","bottom","zIndex","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","flexDirection","gap","left","right","index","key","fontSize","renderBubbleContent","isCustomViewBottom","renderMessageReply","messageReply","fill","container","marginBottom","isLast","maxWidth","onLayout","e","nativeEvent","layout","toString","isShowName","layoutName","numberOfLines","wrapper","touchableProps","delayLongPress","ref","isSending","paddingHorizontal","color","defaultColor","size","animationDuration","errorMessage","marginTop","source","require","fontWeight","alizarin"],"sources":["index.tsx"],"sourcesContent":["/* eslint-disable react-native/no-inline-styles */\n/* eslint-disable @typescript-eslint/no-shadow */\nimport React, { useCallback, useRef, useState } from 'react';\nimport type { JSX } from 'react';\nimport {\n  findNodeHandle,\n  Text,\n  TouchableOpacity,\n  TouchableWithoutFeedback,\n  UIManager,\n  View,\n} from 'react-native';\n\nimport { useChatContext } from '../GiftedChatContext';\nimport { QuickReplies } from '../QuickReplies';\nimport { MessageText } from '../MessageText';\nimport { MessageAudio } from '../MessageAudio';\nimport { Time } from '../Time';\n\nimport { isSameUser, isSameDay } from '../utils';\nimport type { FileMessage, IMessage } from '../types';\nimport type { BubbleProps } from './types';\n\nimport stylesCommon from '../styles';\nimport styles from './styles';\nimport { MessageFile } from '../MessageFile';\nimport Color from '../Color';\nimport { MessageReply } from '../MessageReply';\nimport { MaterialIndicator } from '../../IndicatorsMaster';\nimport FastImage from 'react-native-fast-image';\n\nexport * from './types';\n\nconst Bubble = <TMessage extends IMessage = IMessage>(\n  props: BubbleProps<TMessage>\n): JSX.Element => {\n  const {\n    currentMessage,\n    nextMessage,\n    position,\n    // containerToNextStyle,\n    previousMessage,\n    containerToPreviousStyle,\n    onQuickReply,\n    renderQuickReplySend,\n    quickReplyStyle,\n    quickReplyTextStyle,\n    quickReplyContainerStyle,\n    containerStyle,\n    wrapperStyle,\n    bottomContainerStyle,\n    onPressFile,\n    onLongPressReaction,\n  } = props;\n\n  const context = useChatContext();\n  const [messageWidth, setMessageWidth] = useState<{\n    width: number;\n    _id: string;\n  } | null>(null);\n  const innerRef = useRef<View>(null);\n  const refArrThumbnail = useRef<FileMessage[]>([]);\n\n  const onPress = useCallback(() => {\n    if (props.onPress) props.onPress(context, currentMessage);\n  }, [context, props, currentMessage]);\n\n  const onLongPress = useCallback(() => {\n    const { onLongPress, optionTitles } = props;\n\n    if (onLongPress) {\n      onLongPress(context, currentMessage);\n      return;\n    }\n\n    if (!optionTitles?.length) return;\n\n    const options = optionTitles;\n    const cancelButtonIndex = options.length - 1;\n\n    (context as any).actionSheet().showActionSheetWithOptions(\n      {\n        options,\n        cancelButtonIndex,\n      },\n      (buttonIndex: number) => {\n        console.log('onLongPress', { buttonIndex });\n      }\n    );\n  }, [currentMessage, context, props]);\n\n  const onLongPressItem = useCallback(() => {\n    try {\n      if (innerRef.current) {\n        const node = findNodeHandle(innerRef.current);\n        if (node) {\n          UIManager.measure(\n            node,\n            (\n              x: number,\n              y: number,\n              width: number,\n              height: number,\n              pageX: number,\n              pageY: number\n            ) => {\n              onLongPressReaction?.(currentMessage, {\n                x,\n                y,\n                width,\n                height,\n                pageX,\n                pageY,\n              });\n            }\n          );\n        }\n      }\n    } catch (error) {\n      console.log('onLongPressItem', error);\n    }\n  }, [currentMessage, onLongPressReaction]);\n\n  // const styledBubbleToNext = useCallback(() => {\n  //   if (\n  //     currentMessage &&\n  //     nextMessage &&\n  //     position &&\n  //     isSameUser(currentMessage, nextMessage) &&\n  //     isSameDay(currentMessage, nextMessage)\n  //   )\n  //     return [styles[position].containerToNext, containerToNextStyle?.[position]];\n\n  //   return null;\n  // }, [currentMessage, nextMessage, position, containerToNextStyle]);\n\n  const styledBubbleToPrevious = useCallback(() => {\n    if (\n      currentMessage &&\n      previousMessage &&\n      position &&\n      isSameUser(currentMessage, previousMessage) &&\n      isSameDay(currentMessage, previousMessage)\n    )\n      return [\n        styles[position].containerToPrevious,\n        containerToPreviousStyle && containerToPreviousStyle[position],\n      ];\n\n    return null;\n  }, [currentMessage, previousMessage, position, containerToPreviousStyle]);\n\n  const renderQuickReplies = useCallback(() => {\n    if (currentMessage?.quickReplies) {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      const { containerStyle, wrapperStyle, ...quickReplyProps } = props;\n\n      if (props.renderQuickReplies)\n        return props.renderQuickReplies(quickReplyProps);\n\n      return (\n        <QuickReplies\n          currentMessage={currentMessage}\n          onQuickReply={onQuickReply}\n          renderQuickReplySend={renderQuickReplySend}\n          quickReplyStyle={quickReplyStyle}\n          quickReplyTextStyle={quickReplyTextStyle}\n          quickReplyContainerStyle={quickReplyContainerStyle}\n          nextMessage={nextMessage}\n        />\n      );\n    }\n\n    return null;\n  }, [\n    currentMessage,\n    onQuickReply,\n    renderQuickReplySend,\n    quickReplyStyle,\n    quickReplyTextStyle,\n    quickReplyContainerStyle,\n    nextMessage,\n    props,\n  ]);\n\n  const onSaveThumbnail = useCallback((file: FileMessage[]) => {\n    refArrThumbnail.current = file;\n  }, []);\n\n  const renderMessageText = useCallback(() => {\n    if (currentMessage?.text) {\n      const {\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        containerStyle,\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        wrapperStyle,\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        optionTitles,\n        ...messageTextProps\n      } = props;\n\n      if (props.renderMessageText)\n        return props.renderMessageText(messageTextProps);\n\n      return <MessageText {...messageTextProps} />;\n    }\n    return null;\n  }, [props, currentMessage]);\n\n  const renderMessageFile = useCallback(() => {\n    if (!currentMessage?.file) return null;\n\n    const {\n      /* eslint-disable @typescript-eslint/no-unused-vars */\n      containerStyle,\n      wrapperStyle,\n      /* eslint-enable @typescript-eslint/no-unused-vars */\n      ...messageFileProps\n    } = props;\n\n    if (props.renderCustomMessageFile)\n      return props.renderCustomMessageFile(messageFileProps);\n\n    return (\n      <MessageFile\n        onLongPressFile={onLongPressItem}\n        onSaveThumbnail={onSaveThumbnail}\n        onPressFile={onPressFile}\n        messageWidth={messageWidth}\n        {...messageFileProps}\n      />\n    );\n  }, [\n    currentMessage,\n    props,\n    messageWidth,\n    onPressFile,\n    onSaveThumbnail,\n    onLongPressItem,\n  ]);\n\n  const renderMessageAudio = useCallback(() => {\n    if (!currentMessage?.audio) return null;\n\n    const {\n      /* eslint-disable @typescript-eslint/no-unused-vars */\n      containerStyle,\n      wrapperStyle,\n      /* eslint-enable @typescript-eslint/no-unused-vars */\n      ...messageAudioProps\n    } = props;\n\n    if (props.renderMessageAudio)\n      return props.renderMessageAudio(messageAudioProps);\n\n    return <MessageAudio />;\n  }, [props, currentMessage]);\n\n  const renderTicks = useCallback(() => {\n    const { renderTicks, user } = props;\n\n    if (renderTicks && currentMessage) return renderTicks(currentMessage);\n\n    if (user && currentMessage?.user && currentMessage.user._id !== user._id)\n      return null;\n\n    if (\n      currentMessage &&\n      (currentMessage.sent || currentMessage.received || currentMessage.pending)\n    )\n      return (\n        <View style={styles.content.tickView}>\n          {!!currentMessage.sent && (\n            <Text style={[styles.content.tick, props.tickStyle]}>{'âœ“'}</Text>\n          )}\n          {!!currentMessage.received && (\n            <Text style={[styles.content.tick, props.tickStyle]}>{'âœ“'}</Text>\n          )}\n          {!!currentMessage.pending && (\n            <Text style={[styles.content.tick, props.tickStyle]}>{'ðŸ•“'}</Text>\n          )}\n        </View>\n      );\n\n    return null;\n  }, [props, currentMessage]);\n\n  const renderTime = useCallback(() => {\n    if (currentMessage?.createdAt) {\n      const {\n        /* eslint-disable @typescript-eslint/no-unused-vars */\n        containerStyle,\n        wrapperStyle,\n        textStyle,\n        /* eslint-enable @typescript-eslint/no-unused-vars */\n        ...timeProps\n      } = props;\n\n      if (props.renderTime) return props.renderTime(timeProps);\n\n      return <Time {...timeProps} />;\n    }\n    return null;\n  }, [props, currentMessage]);\n\n  const renderUsername = useCallback(() => {\n    const { user, renderUsername } = props;\n\n    if (props.renderUsernameOnMessage && currentMessage) {\n      if (user && currentMessage.user._id === user._id) return null;\n\n      if (renderUsername) return renderUsername(currentMessage.user);\n\n      return (\n        <View style={styles.content.usernameView}>\n          <Text style={[styles.content.username, props.usernameStyle]}>\n            {'~ '}\n            {currentMessage.user.name}\n          </Text>\n        </View>\n      );\n    }\n\n    return null;\n  }, [currentMessage, props]);\n\n  const renderCustomView = useCallback(() => {\n    if (props.renderCustomView) return props.renderCustomView(props);\n\n    return null;\n  }, [props]);\n\n  const renderReactionEmoji = useCallback(() => {\n    const isCurrentUser = currentMessage.user._id === props?.user?._id;\n\n    const reactionPosition = isCurrentUser ? 'right' : 'left';\n    const reactionEmoji = [\n      ...new Set(\n        (Array.isArray(currentMessage?.reactionEmoji)\n          ? currentMessage.reactionEmoji\n          : []\n        ).map((item) => item?.reaction)\n      ),\n    ];\n\n    if (reactionEmoji && reactionEmoji?.length > 0) {\n      return (\n        <View\n          style={[\n            {\n              backgroundColor: Color.white,\n              position: 'absolute',\n              minWidth: 36,\n              width: 18 * reactionEmoji?.length + 12,\n              height: 18,\n              borderRadius: 12,\n              justifyContent: 'center',\n              alignItems: 'center',\n              borderWidth: 1,\n              borderColor: Color.leftBubbleBackground,\n              bottom: -32,\n              zIndex: 10,\n              shadowColor: Color.leftBubbleBackground,\n              shadowOffset: { width: 0, height: 1 },\n              shadowOpacity: 0.25,\n              shadowRadius: 3.84,\n              elevation: 3,\n              flexDirection: 'row',\n              gap: 2,\n            },\n            reactionPosition === 'right' && {\n              left: reactionEmoji?.length\n                ? -12 * (reactionEmoji?.length - 1)\n                : -12,\n            },\n            reactionPosition === 'left' && {\n              right: reactionEmoji?.length\n                ? -12 * (reactionEmoji?.length - 1)\n                : -12,\n            },\n          ]}\n        >\n          {reactionEmoji?.map((item, index) => (\n            <Text key={index} style={{ fontSize: 10 }}>\n              {item}\n            </Text>\n          ))}\n          <Text style={{ fontSize: 12 }}>\n            {currentMessage?.reactionEmoji?.length}\n          </Text>\n        </View>\n      );\n    }\n    return null;\n  }, [currentMessage.reactionEmoji, currentMessage.user._id, props?.user?._id]);\n\n  const renderBubbleContent = useCallback(() => {\n    return (\n      <View>\n        {!props.isCustomViewBottom && renderCustomView()}\n        {renderMessageFile()}\n        {renderMessageAudio()}\n        {renderMessageText()}\n        {renderReactionEmoji()}\n        {props.isCustomViewBottom && renderCustomView()}\n      </View>\n    );\n  }, [\n    renderCustomView,\n    renderMessageAudio,\n    renderMessageText,\n    props.isCustomViewBottom,\n    renderMessageFile,\n    renderReactionEmoji,\n  ]);\n\n  const renderMessageReply = useCallback(() => {\n    if (currentMessage?.messageReply) {\n      return (\n        <MessageReply\n          messageReply={currentMessage?.messageReply}\n          onSaveThumbnail={onSaveThumbnail}\n          onPressFile={onPressFile}\n        />\n      );\n    }\n    return null;\n  }, [currentMessage, onSaveThumbnail, onPressFile]);\n\n  return (\n    <View\n      style={[\n        stylesCommon.fill,\n        styles[position].container,\n        containerStyle && containerStyle[position],\n        { marginBottom: currentMessage?.isLast ? 32 : 8, maxWidth: '90%' },\n      ]}\n      onLayout={(e) => {\n        if (currentMessage?._id) {\n          setMessageWidth({\n            width: e.nativeEvent.layout.width,\n            _id: currentMessage?._id.toString(),\n          });\n        }\n      }}\n    >\n      {currentMessage?.isShowName && (\n        <View style={styles.content.layoutName}>\n          <Text numberOfLines={1} style={styles.content.name}>\n            {currentMessage?.user?.name}\n          </Text>\n        </View>\n      )}\n\n      {renderMessageReply()}\n      <View\n        style={[\n          styles[position].wrapper,\n          // styledBubbleToNext(),\n          styledBubbleToPrevious(),\n          wrapperStyle && wrapperStyle[position],\n        ]}\n      >\n        <TouchableWithoutFeedback\n          onPress={onPress}\n          onLongPress={onLongPress}\n          {...props.touchableProps}\n        >\n          <TouchableOpacity delayLongPress={100} onLongPress={onLongPressItem}>\n            <View ref={innerRef}>\n              {renderBubbleContent()}\n              <View\n                style={[\n                  styles[position].bottom,\n                  bottomContainerStyle?.[position],\n                  currentMessage?.reactionEmoji &&\n                    currentMessage?.reactionEmoji?.length > 0 && {\n                      marginBottom: 8,\n                    },\n                ]}\n              >\n                {renderUsername()}\n                {renderTime()}\n                {renderTicks()}\n              </View>\n            </View>\n          </TouchableOpacity>\n        </TouchableWithoutFeedback>\n      </View>\n      {renderQuickReplies()}\n      {currentMessage?.isSending && (\n        <View\n          style={{\n            height: 16,\n            alignItems: 'center',\n            justifyContent: 'center',\n            paddingHorizontal: 8,\n          }}\n        >\n          <MaterialIndicator\n            color={Color.defaultColor}\n            size={12}\n            animationDuration={6000}\n          />\n        </View>\n      )}\n      {currentMessage?.errorMessage && !currentMessage?.isSending && (\n        <View\n          style={{\n            marginTop: 4,\n            flexDirection: 'row',\n            alignItems: 'center',\n            gap: 4,\n          }}\n        >\n          <FastImage\n            source={require('../../assets/warning.png')}\n            style={{ width: 12, height: 12 }}\n          />\n          <Text\n            style={{ fontSize: 12, fontWeight: '500', color: Color.alizarin }}\n          >\n            {currentMessage?.errorMessage}\n          </Text>\n        </View>\n      )}\n    </View>\n  );\n};\n\nexport default Bubble;\n"],"mappings":";AAAA;AACA;AACA,OAAOA,KAAK,IAAIC,WAAW,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAE5D,SACEC,cAAc,EACdC,IAAI,EACJC,gBAAgB,EAChBC,wBAAwB,EACxBC,SAAS,EACTC,IAAI,QACC,cAAc;AAErB,SAASC,cAAc,QAAQ,sBAAsB;AACrD,SAASC,YAAY,QAAQ,iBAAiB;AAC9C,SAASC,WAAW,QAAQ,gBAAgB;AAC5C,SAASC,YAAY,QAAQ,iBAAiB;AAC9C,SAASC,IAAI,QAAQ,SAAS;AAE9B,SAASC,UAAU,EAAEC,SAAS,QAAQ,UAAU;AAIhD,OAAOC,YAAY,MAAM,WAAW;AACpC,OAAOC,MAAM,MAAM,UAAU;AAC7B,SAASC,WAAW,QAAQ,gBAAgB;AAC5C,OAAOC,KAAK,MAAM,UAAU;AAC5B,SAASC,YAAY,QAAQ,iBAAiB;AAC9C,SAASC,iBAAiB,QAAQ,wBAAwB;AAC1D,OAAOC,SAAS,MAAM,yBAAyB;AAE/C,cAAc,SAAS;AAEvB,MAAMC,MAAM,GACVC,KAA4B,IACZ;EAAA,IAAAC,YAAA,EAAAC,oBAAA,EAAAC,sBAAA;EAChB,MAAM;IACJC,cAAc;IACdC,WAAW;IACXC,QAAQ;IACR;IACAC,eAAe;IACfC,wBAAwB;IACxBC,YAAY;IACZC,oBAAoB;IACpBC,eAAe;IACfC,mBAAmB;IACnBC,wBAAwB;IACxBC,cAAc;IACdC,YAAY;IACZC,oBAAoB;IACpBC,WAAW;IACXC;EACF,CAAC,GAAGlB,KAAK;EAET,MAAMmB,OAAO,GAAGlC,cAAc,CAAC,CAAC;EAChC,MAAM,CAACmC,YAAY,EAAEC,eAAe,CAAC,GAAG3C,QAAQ,CAGtC,IAAI,CAAC;EACf,MAAM4C,QAAQ,GAAG7C,MAAM,CAAO,IAAI,CAAC;EACnC,MAAM8C,eAAe,GAAG9C,MAAM,CAAgB,EAAE,CAAC;EAEjD,MAAM+C,OAAO,GAAGhD,WAAW,CAAC,MAAM;IAChC,IAAIwB,KAAK,CAACwB,OAAO,EAAExB,KAAK,CAACwB,OAAO,CAACL,OAAO,EAAEf,cAAc,CAAC;EAC3D,CAAC,EAAE,CAACe,OAAO,EAAEnB,KAAK,EAAEI,cAAc,CAAC,CAAC;EAEpC,MAAMqB,WAAW,GAAGjD,WAAW,CAAC,MAAM;IACpC,MAAM;MAAEiD,WAAW;MAAEC;IAAa,CAAC,GAAG1B,KAAK;IAE3C,IAAIyB,WAAW,EAAE;MACfA,WAAW,CAACN,OAAO,EAAEf,cAAc,CAAC;MACpC;IACF;IAEA,IAAI,EAACsB,YAAY,aAAZA,YAAY,eAAZA,YAAY,CAAEC,MAAM,GAAE;IAE3B,MAAMC,OAAO,GAAGF,YAAY;IAC5B,MAAMG,iBAAiB,GAAGD,OAAO,CAACD,MAAM,GAAG,CAAC;IAE3CR,OAAO,CAASW,WAAW,CAAC,CAAC,CAACC,0BAA0B,CACvD;MACEH,OAAO;MACPC;IACF,CAAC,EACAG,WAAmB,IAAK;MACvBC,OAAO,CAACC,GAAG,CAAC,aAAa,EAAE;QAAEF;MAAY,CAAC,CAAC;IAC7C,CACF,CAAC;EACH,CAAC,EAAE,CAAC5B,cAAc,EAAEe,OAAO,EAAEnB,KAAK,CAAC,CAAC;EAEpC,MAAMmC,eAAe,GAAG3D,WAAW,CAAC,MAAM;IACxC,IAAI;MACF,IAAI8C,QAAQ,CAACc,OAAO,EAAE;QACpB,MAAMC,IAAI,GAAG1D,cAAc,CAAC2C,QAAQ,CAACc,OAAO,CAAC;QAC7C,IAAIC,IAAI,EAAE;UACRtD,SAAS,CAACuD,OAAO,CACfD,IAAI,EACJ,CACEE,CAAS,EACTC,CAAS,EACTC,KAAa,EACbC,MAAc,EACdC,KAAa,EACbC,KAAa,KACV;YACH1B,mBAAmB,aAAnBA,mBAAmB,eAAnBA,mBAAmB,CAAGd,cAAc,EAAE;cACpCmC,CAAC;cACDC,CAAC;cACDC,KAAK;cACLC,MAAM;cACNC,KAAK;cACLC;YACF,CAAC,CAAC;UACJ,CACF,CAAC;QACH;MACF;IACF,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdZ,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEW,KAAK,CAAC;IACvC;EACF,CAAC,EAAE,CAACzC,cAAc,EAAEc,mBAAmB,CAAC,CAAC;;EAEzC;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;;EAEA,MAAM4B,sBAAsB,GAAGtE,WAAW,CAAC,MAAM;IAC/C,IACE4B,cAAc,IACdG,eAAe,IACfD,QAAQ,IACRhB,UAAU,CAACc,cAAc,EAAEG,eAAe,CAAC,IAC3ChB,SAAS,CAACa,cAAc,EAAEG,eAAe,CAAC,EAE1C,OAAO,CACLd,MAAM,CAACa,QAAQ,CAAC,CAACyC,mBAAmB,EACpCvC,wBAAwB,IAAIA,wBAAwB,CAACF,QAAQ,CAAC,CAC/D;IAEH,OAAO,IAAI;EACb,CAAC,EAAE,CAACF,cAAc,EAAEG,eAAe,EAAED,QAAQ,EAAEE,wBAAwB,CAAC,CAAC;EAEzE,MAAMwC,kBAAkB,GAAGxE,WAAW,CAAC,MAAM;IAC3C,IAAI4B,cAAc,aAAdA,cAAc,eAAdA,cAAc,CAAE6C,YAAY,EAAE;MAChC;MACA,MAAM;QAAEnC,cAAc;QAAEC,YAAY;QAAE,GAAGmC;MAAgB,CAAC,GAAGlD,KAAK;MAElE,IAAIA,KAAK,CAACgD,kBAAkB,EAC1B,OAAOhD,KAAK,CAACgD,kBAAkB,CAACE,eAAe,CAAC;MAElD,oBACE3E,KAAA,CAAA4E,aAAA,CAACjE,YAAY;QACXkB,cAAc,EAAEA,cAAe;QAC/BK,YAAY,EAAEA,YAAa;QAC3BC,oBAAoB,EAAEA,oBAAqB;QAC3CC,eAAe,EAAEA,eAAgB;QACjCC,mBAAmB,EAAEA,mBAAoB;QACzCC,wBAAwB,EAAEA,wBAAyB;QACnDR,WAAW,EAAEA;MAAY,CAC1B,CAAC;IAEN;IAEA,OAAO,IAAI;EACb,CAAC,EAAE,CACDD,cAAc,EACdK,YAAY,EACZC,oBAAoB,EACpBC,eAAe,EACfC,mBAAmB,EACnBC,wBAAwB,EACxBR,WAAW,EACXL,KAAK,CACN,CAAC;EAEF,MAAMoD,eAAe,GAAG5E,WAAW,CAAE6E,IAAmB,IAAK;IAC3D9B,eAAe,CAACa,OAAO,GAAGiB,IAAI;EAChC,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,iBAAiB,GAAG9E,WAAW,CAAC,MAAM;IAC1C,IAAI4B,cAAc,aAAdA,cAAc,eAAdA,cAAc,CAAEmD,IAAI,EAAE;MACxB,MAAM;QACJ;QACAzC,cAAc;QACd;QACAC,YAAY;QACZ;QACAW,YAAY;QACZ,GAAG8B;MACL,CAAC,GAAGxD,KAAK;MAET,IAAIA,KAAK,CAACsD,iBAAiB,EACzB,OAAOtD,KAAK,CAACsD,iBAAiB,CAACE,gBAAgB,CAAC;MAElD,oBAAOjF,KAAA,CAAA4E,aAAA,CAAChE,WAAW,EAAKqE,gBAAmB,CAAC;IAC9C;IACA,OAAO,IAAI;EACb,CAAC,EAAE,CAACxD,KAAK,EAAEI,cAAc,CAAC,CAAC;EAE3B,MAAMqD,iBAAiB,GAAGjF,WAAW,CAAC,MAAM;IAC1C,IAAI,EAAC4B,cAAc,aAAdA,cAAc,eAAdA,cAAc,CAAEiD,IAAI,GAAE,OAAO,IAAI;IAEtC,MAAM;MACJ;MACAvC,cAAc;MACdC,YAAY;MACZ;MACA,GAAG2C;IACL,CAAC,GAAG1D,KAAK;IAET,IAAIA,KAAK,CAAC2D,uBAAuB,EAC/B,OAAO3D,KAAK,CAAC2D,uBAAuB,CAACD,gBAAgB,CAAC;IAExD,oBACEnF,KAAA,CAAA4E,aAAA,CAACzD,WAAW,EAAAkE,QAAA;MACVC,eAAe,EAAE1B,eAAgB;MACjCiB,eAAe,EAAEA,eAAgB;MACjCnC,WAAW,EAAEA,WAAY;MACzBG,YAAY,EAAEA;IAAa,GACvBsC,gBAAgB,CACrB,CAAC;EAEN,CAAC,EAAE,CACDtD,cAAc,EACdJ,KAAK,EACLoB,YAAY,EACZH,WAAW,EACXmC,eAAe,EACfjB,eAAe,CAChB,CAAC;EAEF,MAAM2B,kBAAkB,GAAGtF,WAAW,CAAC,MAAM;IAC3C,IAAI,EAAC4B,cAAc,aAAdA,cAAc,eAAdA,cAAc,CAAE2D,KAAK,GAAE,OAAO,IAAI;IAEvC,MAAM;MACJ;MACAjD,cAAc;MACdC,YAAY;MACZ;MACA,GAAGiD;IACL,CAAC,GAAGhE,KAAK;IAET,IAAIA,KAAK,CAAC8D,kBAAkB,EAC1B,OAAO9D,KAAK,CAAC8D,kBAAkB,CAACE,iBAAiB,CAAC;IAEpD,oBAAOzF,KAAA,CAAA4E,aAAA,CAAC/D,YAAY,MAAE,CAAC;EACzB,CAAC,EAAE,CAACY,KAAK,EAAEI,cAAc,CAAC,CAAC;EAE3B,MAAM6D,WAAW,GAAGzF,WAAW,CAAC,MAAM;IACpC,MAAM;MAAEyF,WAAW;MAAEC;IAAK,CAAC,GAAGlE,KAAK;IAEnC,IAAIiE,WAAW,IAAI7D,cAAc,EAAE,OAAO6D,WAAW,CAAC7D,cAAc,CAAC;IAErE,IAAI8D,IAAI,IAAI9D,cAAc,aAAdA,cAAc,eAAdA,cAAc,CAAE8D,IAAI,IAAI9D,cAAc,CAAC8D,IAAI,CAACC,GAAG,KAAKD,IAAI,CAACC,GAAG,EACtE,OAAO,IAAI;IAEb,IACE/D,cAAc,KACbA,cAAc,CAACgE,IAAI,IAAIhE,cAAc,CAACiE,QAAQ,IAAIjE,cAAc,CAACkE,OAAO,CAAC,EAE1E,oBACE/F,KAAA,CAAA4E,aAAA,CAACnE,IAAI;MAACuF,KAAK,EAAE9E,MAAM,CAAC+E,OAAO,CAACC;IAAS,GAClC,CAAC,CAACrE,cAAc,CAACgE,IAAI,iBACpB7F,KAAA,CAAA4E,aAAA,CAACvE,IAAI;MAAC2F,KAAK,EAAE,CAAC9E,MAAM,CAAC+E,OAAO,CAACE,IAAI,EAAE1E,KAAK,CAAC2E,SAAS;IAAE,GAAE,GAAU,CACjE,EACA,CAAC,CAACvE,cAAc,CAACiE,QAAQ,iBACxB9F,KAAA,CAAA4E,aAAA,CAACvE,IAAI;MAAC2F,KAAK,EAAE,CAAC9E,MAAM,CAAC+E,OAAO,CAACE,IAAI,EAAE1E,KAAK,CAAC2E,SAAS;IAAE,GAAE,GAAU,CACjE,EACA,CAAC,CAACvE,cAAc,CAACkE,OAAO,iBACvB/F,KAAA,CAAA4E,aAAA,CAACvE,IAAI;MAAC2F,KAAK,EAAE,CAAC9E,MAAM,CAAC+E,OAAO,CAACE,IAAI,EAAE1E,KAAK,CAAC2E,SAAS;IAAE,GAAE,IAAW,CAE/D,CAAC;IAGX,OAAO,IAAI;EACb,CAAC,EAAE,CAAC3E,KAAK,EAAEI,cAAc,CAAC,CAAC;EAE3B,MAAMwE,UAAU,GAAGpG,WAAW,CAAC,MAAM;IACnC,IAAI4B,cAAc,aAAdA,cAAc,eAAdA,cAAc,CAAEyE,SAAS,EAAE;MAC7B,MAAM;QACJ;QACA/D,cAAc;QACdC,YAAY;QACZ+D,SAAS;QACT;QACA,GAAGC;MACL,CAAC,GAAG/E,KAAK;MAET,IAAIA,KAAK,CAAC4E,UAAU,EAAE,OAAO5E,KAAK,CAAC4E,UAAU,CAACG,SAAS,CAAC;MAExD,oBAAOxG,KAAA,CAAA4E,aAAA,CAAC9D,IAAI,EAAK0F,SAAY,CAAC;IAChC;IACA,OAAO,IAAI;EACb,CAAC,EAAE,CAAC/E,KAAK,EAAEI,cAAc,CAAC,CAAC;EAE3B,MAAM4E,cAAc,GAAGxG,WAAW,CAAC,MAAM;IACvC,MAAM;MAAE0F,IAAI;MAAEc;IAAe,CAAC,GAAGhF,KAAK;IAEtC,IAAIA,KAAK,CAACiF,uBAAuB,IAAI7E,cAAc,EAAE;MACnD,IAAI8D,IAAI,IAAI9D,cAAc,CAAC8D,IAAI,CAACC,GAAG,KAAKD,IAAI,CAACC,GAAG,EAAE,OAAO,IAAI;MAE7D,IAAIa,cAAc,EAAE,OAAOA,cAAc,CAAC5E,cAAc,CAAC8D,IAAI,CAAC;MAE9D,oBACE3F,KAAA,CAAA4E,aAAA,CAACnE,IAAI;QAACuF,KAAK,EAAE9E,MAAM,CAAC+E,OAAO,CAACU;MAAa,gBACvC3G,KAAA,CAAA4E,aAAA,CAACvE,IAAI;QAAC2F,KAAK,EAAE,CAAC9E,MAAM,CAAC+E,OAAO,CAACW,QAAQ,EAAEnF,KAAK,CAACoF,aAAa;MAAE,GACzD,IAAI,EACJhF,cAAc,CAAC8D,IAAI,CAACmB,IACjB,CACF,CAAC;IAEX;IAEA,OAAO,IAAI;EACb,CAAC,EAAE,CAACjF,cAAc,EAAEJ,KAAK,CAAC,CAAC;EAE3B,MAAMsF,gBAAgB,GAAG9G,WAAW,CAAC,MAAM;IACzC,IAAIwB,KAAK,CAACsF,gBAAgB,EAAE,OAAOtF,KAAK,CAACsF,gBAAgB,CAACtF,KAAK,CAAC;IAEhE,OAAO,IAAI;EACb,CAAC,EAAE,CAACA,KAAK,CAAC,CAAC;EAEX,MAAMuF,mBAAmB,GAAG/G,WAAW,CAAC,MAAM;IAAA,IAAAgH,WAAA;IAC5C,MAAMC,aAAa,GAAGrF,cAAc,CAAC8D,IAAI,CAACC,GAAG,MAAKnE,KAAK,aAALA,KAAK,gBAAAwF,WAAA,GAALxF,KAAK,CAAEkE,IAAI,cAAAsB,WAAA,uBAAXA,WAAA,CAAarB,GAAG;IAElE,MAAMuB,gBAAgB,GAAGD,aAAa,GAAG,OAAO,GAAG,MAAM;IACzD,MAAME,aAAa,GAAG,CACpB,GAAG,IAAIC,GAAG,CACR,CAACC,KAAK,CAACC,OAAO,CAAC1F,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAEuF,aAAa,CAAC,GACzCvF,cAAc,CAACuF,aAAa,GAC5B,EAAE,EACJI,GAAG,CAAEC,IAAI,IAAKA,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEC,QAAQ,CAChC,CAAC,CACF;IAED,IAAIN,aAAa,IAAI,CAAAA,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAEhE,MAAM,IAAG,CAAC,EAAE;MAAA,IAAAuE,qBAAA;MAC9C,oBACE3H,KAAA,CAAA4E,aAAA,CAACnE,IAAI;QACHuF,KAAK,EAAE,CACL;UACE4B,eAAe,EAAExG,KAAK,CAACyG,KAAK;UAC5B9F,QAAQ,EAAE,UAAU;UACpB+F,QAAQ,EAAE,EAAE;UACZ5D,KAAK,EAAE,EAAE,IAAGkD,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAEhE,MAAM,IAAG,EAAE;UACtCe,MAAM,EAAE,EAAE;UACV4D,YAAY,EAAE,EAAE;UAChBC,cAAc,EAAE,QAAQ;UACxBC,UAAU,EAAE,QAAQ;UACpBC,WAAW,EAAE,CAAC;UACdC,WAAW,EAAE/G,KAAK,CAACgH,oBAAoB;UACvCC,MAAM,EAAE,CAAC,EAAE;UACXC,MAAM,EAAE,EAAE;UACVC,WAAW,EAAEnH,KAAK,CAACgH,oBAAoB;UACvCI,YAAY,EAAE;YAAEtE,KAAK,EAAE,CAAC;YAAEC,MAAM,EAAE;UAAE,CAAC;UACrCsE,aAAa,EAAE,IAAI;UACnBC,YAAY,EAAE,IAAI;UAClBC,SAAS,EAAE,CAAC;UACZC,aAAa,EAAE,KAAK;UACpBC,GAAG,EAAE;QACP,CAAC,EACD1B,gBAAgB,KAAK,OAAO,IAAI;UAC9B2B,IAAI,EAAE1B,aAAa,aAAbA,aAAa,eAAbA,aAAa,CAAEhE,MAAM,GACvB,CAAC,EAAE,IAAI,CAAAgE,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAEhE,MAAM,IAAG,CAAC,CAAC,GACjC,CAAC;QACP,CAAC,EACD+D,gBAAgB,KAAK,MAAM,IAAI;UAC7B4B,KAAK,EAAE3B,aAAa,aAAbA,aAAa,eAAbA,aAAa,CAAEhE,MAAM,GACxB,CAAC,EAAE,IAAI,CAAAgE,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAEhE,MAAM,IAAG,CAAC,CAAC,GACjC,CAAC;QACP,CAAC;MACD,GAEDgE,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAEI,GAAG,CAAC,CAACC,IAAI,EAAEuB,KAAK,kBAC9BhJ,KAAA,CAAA4E,aAAA,CAACvE,IAAI;QAAC4I,GAAG,EAAED,KAAM;QAAChD,KAAK,EAAE;UAAEkD,QAAQ,EAAE;QAAG;MAAE,GACvCzB,IACG,CACP,CAAC,eACFzH,KAAA,CAAA4E,aAAA,CAACvE,IAAI;QAAC2F,KAAK,EAAE;UAAEkD,QAAQ,EAAE;QAAG;MAAE,GAC3BrH,cAAc,aAAdA,cAAc,gBAAA8F,qBAAA,GAAd9F,cAAc,CAAEuF,aAAa,cAAAO,qBAAA,uBAA7BA,qBAAA,CAA+BvE,MAC5B,CACF,CAAC;IAEX;IACA,OAAO,IAAI;EACb,CAAC,EAAE,CAACvB,cAAc,CAACuF,aAAa,EAAEvF,cAAc,CAAC8D,IAAI,CAACC,GAAG,EAAEnE,KAAK,aAALA,KAAK,gBAAAC,YAAA,GAALD,KAAK,CAAEkE,IAAI,cAAAjE,YAAA,uBAAXA,YAAA,CAAakE,GAAG,CAAC,CAAC;EAE7E,MAAMuD,mBAAmB,GAAGlJ,WAAW,CAAC,MAAM;IAC5C,oBACED,KAAA,CAAA4E,aAAA,CAACnE,IAAI,QACF,CAACgB,KAAK,CAAC2H,kBAAkB,IAAIrC,gBAAgB,CAAC,CAAC,EAC/C7B,iBAAiB,CAAC,CAAC,EACnBK,kBAAkB,CAAC,CAAC,EACpBR,iBAAiB,CAAC,CAAC,EACnBiC,mBAAmB,CAAC,CAAC,EACrBvF,KAAK,CAAC2H,kBAAkB,IAAIrC,gBAAgB,CAAC,CAC1C,CAAC;EAEX,CAAC,EAAE,CACDA,gBAAgB,EAChBxB,kBAAkB,EAClBR,iBAAiB,EACjBtD,KAAK,CAAC2H,kBAAkB,EACxBlE,iBAAiB,EACjB8B,mBAAmB,CACpB,CAAC;EAEF,MAAMqC,kBAAkB,GAAGpJ,WAAW,CAAC,MAAM;IAC3C,IAAI4B,cAAc,aAAdA,cAAc,eAAdA,cAAc,CAAEyH,YAAY,EAAE;MAChC,oBACEtJ,KAAA,CAAA4E,aAAA,CAACvD,YAAY;QACXiI,YAAY,EAAEzH,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAEyH,YAAa;QAC3CzE,eAAe,EAAEA,eAAgB;QACjCnC,WAAW,EAAEA;MAAY,CAC1B,CAAC;IAEN;IACA,OAAO,IAAI;EACb,CAAC,EAAE,CAACb,cAAc,EAAEgD,eAAe,EAAEnC,WAAW,CAAC,CAAC;EAElD,oBACE1C,KAAA,CAAA4E,aAAA,CAACnE,IAAI;IACHuF,KAAK,EAAE,CACL/E,YAAY,CAACsI,IAAI,EACjBrI,MAAM,CAACa,QAAQ,CAAC,CAACyH,SAAS,EAC1BjH,cAAc,IAAIA,cAAc,CAACR,QAAQ,CAAC,EAC1C;MAAE0H,YAAY,EAAE5H,cAAc,aAAdA,cAAc,eAAdA,cAAc,CAAE6H,MAAM,GAAG,EAAE,GAAG,CAAC;MAAEC,QAAQ,EAAE;IAAM,CAAC,CAClE;IACFC,QAAQ,EAAGC,CAAC,IAAK;MACf,IAAIhI,cAAc,aAAdA,cAAc,eAAdA,cAAc,CAAE+D,GAAG,EAAE;QACvB9C,eAAe,CAAC;UACdoB,KAAK,EAAE2F,CAAC,CAACC,WAAW,CAACC,MAAM,CAAC7F,KAAK;UACjC0B,GAAG,EAAE/D,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAE+D,GAAG,CAACoE,QAAQ,CAAC;QACpC,CAAC,CAAC;MACJ;IACF;EAAE,GAED,CAAAnI,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAEoI,UAAU,kBACzBjK,KAAA,CAAA4E,aAAA,CAACnE,IAAI;IAACuF,KAAK,EAAE9E,MAAM,CAAC+E,OAAO,CAACiE;EAAW,gBACrClK,KAAA,CAAA4E,aAAA,CAACvE,IAAI;IAAC8J,aAAa,EAAE,CAAE;IAACnE,KAAK,EAAE9E,MAAM,CAAC+E,OAAO,CAACa;EAAK,GAChDjF,cAAc,aAAdA,cAAc,gBAAAF,oBAAA,GAAdE,cAAc,CAAE8D,IAAI,cAAAhE,oBAAA,uBAApBA,oBAAA,CAAsBmF,IACnB,CACF,CACP,EAEAuC,kBAAkB,CAAC,CAAC,eACrBrJ,KAAA,CAAA4E,aAAA,CAACnE,IAAI;IACHuF,KAAK,EAAE,CACL9E,MAAM,CAACa,QAAQ,CAAC,CAACqI,OAAO;IACxB;IACA7F,sBAAsB,CAAC,CAAC,EACxB/B,YAAY,IAAIA,YAAY,CAACT,QAAQ,CAAC;EACtC,gBAEF/B,KAAA,CAAA4E,aAAA,CAACrE,wBAAwB,EAAA8E,QAAA;IACvBpC,OAAO,EAAEA,OAAQ;IACjBC,WAAW,EAAEA;EAAY,GACrBzB,KAAK,CAAC4I,cAAc,gBAExBrK,KAAA,CAAA4E,aAAA,CAACtE,gBAAgB;IAACgK,cAAc,EAAE,GAAI;IAACpH,WAAW,EAAEU;EAAgB,gBAClE5D,KAAA,CAAA4E,aAAA,CAACnE,IAAI;IAAC8J,GAAG,EAAExH;EAAS,GACjBoG,mBAAmB,CAAC,CAAC,eACtBnJ,KAAA,CAAA4E,aAAA,CAACnE,IAAI;IACHuF,KAAK,EAAE,CACL9E,MAAM,CAACa,QAAQ,CAAC,CAACsG,MAAM,EACvB5F,oBAAoB,aAApBA,oBAAoB,uBAApBA,oBAAoB,CAAGV,QAAQ,CAAC,EAChC,CAAAF,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAEuF,aAAa,KAC3B,CAAAvF,cAAc,aAAdA,cAAc,gBAAAD,sBAAA,GAAdC,cAAc,CAAEuF,aAAa,cAAAxF,sBAAA,uBAA7BA,sBAAA,CAA+BwB,MAAM,IAAG,CAAC,IAAI;MAC3CqG,YAAY,EAAE;IAChB,CAAC;EACH,GAEDhD,cAAc,CAAC,CAAC,EAChBJ,UAAU,CAAC,CAAC,EACZX,WAAW,CAAC,CACT,CACF,CACU,CACM,CACtB,CAAC,EACNjB,kBAAkB,CAAC,CAAC,EACpB,CAAA5C,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAE2I,SAAS,kBACxBxK,KAAA,CAAA4E,aAAA,CAACnE,IAAI;IACHuF,KAAK,EAAE;MACL7B,MAAM,EAAE,EAAE;MACV8D,UAAU,EAAE,QAAQ;MACpBD,cAAc,EAAE,QAAQ;MACxByC,iBAAiB,EAAE;IACrB;EAAE,gBAEFzK,KAAA,CAAA4E,aAAA,CAACtD,iBAAiB;IAChBoJ,KAAK,EAAEtJ,KAAK,CAACuJ,YAAa;IAC1BC,IAAI,EAAE,EAAG;IACTC,iBAAiB,EAAE;EAAK,CACzB,CACG,CACP,EACA,CAAAhJ,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAEiJ,YAAY,KAAI,EAACjJ,cAAc,aAAdA,cAAc,eAAdA,cAAc,CAAE2I,SAAS,kBACzDxK,KAAA,CAAA4E,aAAA,CAACnE,IAAI;IACHuF,KAAK,EAAE;MACL+E,SAAS,EAAE,CAAC;MACZnC,aAAa,EAAE,KAAK;MACpBX,UAAU,EAAE,QAAQ;MACpBY,GAAG,EAAE;IACP;EAAE,gBAEF7I,KAAA,CAAA4E,aAAA,CAACrD,SAAS;IACRyJ,MAAM,EAAEC,OAAO,CAAC,0BAA0B,CAAE;IAC5CjF,KAAK,EAAE;MAAE9B,KAAK,EAAE,EAAE;MAAEC,MAAM,EAAE;IAAG;EAAE,CAClC,CAAC,eACFnE,KAAA,CAAA4E,aAAA,CAACvE,IAAI;IACH2F,KAAK,EAAE;MAAEkD,QAAQ,EAAE,EAAE;MAAEgC,UAAU,EAAE,KAAK;MAAER,KAAK,EAAEtJ,KAAK,CAAC+J;IAAS;EAAE,GAEjEtJ,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAEiJ,YACb,CACF,CAEJ,CAAC;AAEX,CAAC;AAED,eAAetJ,MAAM","ignoreList":[]}