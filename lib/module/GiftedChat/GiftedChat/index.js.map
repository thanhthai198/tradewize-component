{"version":3,"names":["React","createRef","useEffect","useMemo","useRef","useState","useCallback","ActionSheetProvider","dayjs","localizedFormat","Platform","View","Clipboard","Actions","Avatar","Bubble","Composer","MAX_COMPOSER_HEIGHT","MIN_COMPOSER_HEIGHT","TEST_ID","Day","GiftedAvatar","GiftedChatContext","InputToolbar","LoadEarlier","Message","MessageContainer","MessageText","Send","SystemMessage","Time","utils","Animated","useAnimatedStyle","useAnimatedReaction","useSharedValue","withTiming","runOnJS","KeyboardProvider","useReanimatedKeyboardAnimation","ImageView","stylesCommon","styles","VideoModal","MessageWithReaction","MediaAllShow","CameraModal","generateThumbnails","ImageCropPicker","extend","GiftedChat","props","messages","initialText","isTyping","messageIdGenerator","Math","random","toString","substring","valueOf","user","onSend","locale","renderLoading","actionSheet","textInputProps","renderChatFooter","renderInputToolbar","bottomOffset","focusOnInputWhenOpeningKeyboard","keyboardShouldPersistTaps","select","ios","android","default","onInputTextChanged","maxInputLength","inverted","minComposerHeight","maxComposerHeight","isKeyboardInternallyHandled","onReactionEmoji","labelReaction","onFocusInput","onBlurInput","actionSheetRef","messageContainerRef","textInputRef","isTextInputWasFocused","isInitialized","setIsInitialized","composerHeight","setComposerHeight","text","setText","isImageViewerVisible","setIsImageViewerVisible","fileSelected","setFileSelected","isShowVideoModal","setIsShowVideoModal","isTypingDisabled","setIsTypingDisabled","isShowCameraModal","setIsShowCameraModal","isMediaAllShow","setIsMediaAllShow","fileMediaAllLocal","setFileMediaAllLocal","arrMessage","setArrMessage","messageReaction","setMessageReaction","isModalReaction","setIsModalReaction","messageSelected","setMessageSelected","fileMedia","setFileMedia","keyboard","trackingKeyboardMovement","debounceEnableTypingTimeoutId","undefined","keyboardOffsetBottom","contentStyleAnim","transform","translateY","height","value","getTextFromProp","fallback","handleTextInputFocusWhenKeyboardHide","_textInputRef$current","current","isFocused","handleTextInputFocusWhenKeyboardShow","focus","disableTyping","clearTimeout","enableTyping","debounceEnableTyping","setTimeout","scrollToBottom","isAnimated","scrollToOffset","offset","animated","scrollToEnd","handlePressFile","file","type","typeFile","uri","console","log","renderMessages","messagesContainerStyle","messagesContainerProps","createElement","style","fill","_extends","invertibleScrollViewProps","forwardRef","onLongPressReaction","message","position","onPressFile","isShowAll","arrMedia","notifyInputTextReset","resetInputToolbar","_textInputRef$current2","clear","_onSend","shouldResetInputToolbar","_messages$","Array","isArray","length","newMessages","map","createdAt","Date","_id","onInputSizeChanged","size","newComposerHeight","max","min","_onInputTextChanged","_text","onPressPickMedia","result","openPicker","multiple","fileMediaAll","item","OS","path","sourceURL","id","filename","name","fileExtension","split","pop","thumbnailPreview","width","onInitialLayoutViewLayout","e","layout","nativeEvent","inputToolbarFragment","inputToolbarProps","onTextChanged","ref","maxLength","clearMessageReaction","onRemoveFile","newFileMedia","filter","handleReactionEmoji","emoji","messageId","newArrMessage","_item$_id","reactionEmoji","handleActionReaction","action","isReply","setString","contextValues","showActionSheetWithOptions","getLocale","prevValue","isKeyboardMovingUp","duration","Provider","testID","WRAPPER","contentContainer","onLayout","bottom","images","imageIndex","visible","onRequestClose","onClose","subtitle","source","autoPlay","onActionReaction","isVisible","onVideoRecorded","video","_video$path","_video$path2","_getThumbnail$","getThumbnail","videoFile","onPhotoCaptured","photo","_photo$path","_photo$path2","img","GiftedChatWrapper","append","currentMessages","concat","prepend"],"sources":["index.tsx"],"sourcesContent":["import React, {\n  createRef,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n  useCallback,\n  type RefObject,\n} from 'react';\nimport {\n  ActionSheetProvider,\n  type ActionSheetProviderRef,\n} from '@expo/react-native-action-sheet';\nimport dayjs from 'dayjs';\nimport localizedFormat from 'dayjs/plugin/localizedFormat';\nimport {\n  Platform,\n  TextInput,\n  View,\n  Clipboard,\n  type LayoutChangeEvent,\n} from 'react-native';\nimport { Actions } from '../Actions';\nimport { Avatar } from '../Avatar';\nimport Bubble from '../Bubble';\nimport { Composer } from '../Composer';\nimport { MAX_COMPOSER_HEIGHT, MIN_COMPOSER_HEIGHT, TEST_ID } from '../Constant';\nimport { Day } from '../Day';\nimport { GiftedAvatar } from '../GiftedAvatar';\nimport { GiftedChatContext } from '../GiftedChatContext';\nimport { InputToolbar } from '../InputToolbar';\nimport { LoadEarlier } from '../LoadEarlier';\nimport Message from '../Message';\nimport MessageContainer, { type AnimatedList } from '../MessageContainer';\nimport { MessageText } from '../MessageText';\nimport { type FileMessage, type IMessage, type User } from '../types';\nimport { Send } from '../Send';\nimport { SystemMessage } from '../SystemMessage';\nimport { Time } from '../Time';\nimport * as utils from '../utils';\nimport Animated, {\n  useAnimatedStyle,\n  useAnimatedReaction,\n  useSharedValue,\n  withTiming,\n  runOnJS,\n} from 'react-native-reanimated';\nimport {\n  KeyboardProvider,\n  useReanimatedKeyboardAnimation,\n} from 'react-native-keyboard-controller';\nimport { type GiftedChatProps } from './types';\nimport ImageView from 'react-native-image-viewing';\n\nimport stylesCommon from '../styles';\nimport styles from './styles';\nimport { VideoModal } from 'tradewize';\nimport { MessageWithReaction } from '../MessageWithReaction';\nimport { MediaAllShow } from '../MediaAllShow';\nimport { CameraModal } from 'tradewize';\nimport { generateThumbnails } from '../utils';\nimport ImageCropPicker from 'react-native-image-crop-picker';\n\ndayjs.extend(localizedFormat);\n\nfunction GiftedChat<TMessage extends IMessage = IMessage>(\n  props: GiftedChatProps<TMessage>\n) {\n  const {\n    messages = [],\n    initialText = '',\n    isTyping,\n\n    // \"random\" function from here: https://stackoverflow.com/a/8084248/3452513\n    // we do not use uuid since it would add extra native dependency (https://www.npmjs.com/package/react-native-get-random-values)\n    // lib's user can decide which algorithm to use and pass it as a prop\n    messageIdGenerator = () =>\n      (Math.random() + 1).toString(36).substring(7) + dayjs().valueOf(),\n\n    user = {},\n    onSend,\n    locale = 'en',\n    renderLoading,\n    actionSheet = null,\n    textInputProps,\n    renderChatFooter = null,\n    renderInputToolbar = null,\n    bottomOffset = 0,\n    focusOnInputWhenOpeningKeyboard = true,\n    keyboardShouldPersistTaps = Platform.select({\n      ios: 'never',\n      android: 'always',\n      default: 'never',\n    }),\n    onInputTextChanged = null,\n    maxInputLength = null,\n    inverted = true,\n    minComposerHeight = MIN_COMPOSER_HEIGHT,\n    maxComposerHeight = MAX_COMPOSER_HEIGHT,\n    isKeyboardInternallyHandled = true,\n    onReactionEmoji = null,\n    labelReaction,\n    onFocusInput,\n    onBlurInput,\n  } = props;\n\n  const actionSheetRef = useRef<ActionSheetProviderRef>(null);\n\n  const messageContainerRef = useMemo(\n    () => props.messageContainerRef || createRef<AnimatedList<TMessage>>(),\n    [props.messageContainerRef]\n  ) as RefObject<AnimatedList<TMessage>>;\n\n  const textInputRef = useMemo(\n    () => props.textInputRef || createRef<TextInput>(),\n    [props.textInputRef]\n  );\n\n  const isTextInputWasFocused = useRef(false);\n\n  const [isInitialized, setIsInitialized] = useState<boolean>(false);\n  const [composerHeight, setComposerHeight] = useState<number>(\n    minComposerHeight!\n  );\n  const [text, setText] = useState<string | undefined>(() => props.text || '');\n  const [isImageViewerVisible, setIsImageViewerVisible] =\n    useState<boolean>(false);\n  const [fileSelected, setFileSelected] = useState<{ uri: string } | null>(\n    null\n  );\n  const [isShowVideoModal, setIsShowVideoModal] = useState<boolean>(false);\n  const [isTypingDisabled, setIsTypingDisabled] = useState<boolean>(false);\n  const [isShowCameraModal, setIsShowCameraModal] = useState<boolean>(false);\n\n  const [isMediaAllShow, setIsMediaAllShow] = useState<boolean>(false);\n  const [fileMediaAllLocal, setFileMediaAllLocal] = useState<IMessage | null>(\n    null\n  );\n  const [arrMessage, setArrMessage] = useState<TMessage[]>(messages);\n  const [messageReaction, setMessageReaction] = useState<\n    (IMessage & { isReply: boolean }) | null\n  >(null);\n\n  const [isModalReaction, setIsModalReaction] = useState<boolean>(false);\n  const [messageSelected, setMessageSelected] = useState<{\n    message: TMessage;\n    position: {\n      x: number;\n      y: number;\n      width: number;\n      height: number;\n      pageX: number;\n      pageY: number;\n    };\n  } | null>(null);\n  const [fileMedia, setFileMedia] = useState<FileMessage[]>([]);\n\n  const keyboard = useReanimatedKeyboardAnimation();\n  const trackingKeyboardMovement = useSharedValue(false);\n  const debounceEnableTypingTimeoutId =\n    useRef<ReturnType<typeof setTimeout>>(undefined);\n  const keyboardOffsetBottom = useSharedValue(0);\n\n  const contentStyleAnim = useAnimatedStyle(\n    () => ({\n      transform: [\n        { translateY: keyboard.height.value - keyboardOffsetBottom.value },\n      ],\n    }),\n    [keyboard, keyboardOffsetBottom]\n  );\n\n  const getTextFromProp = useCallback(\n    (fallback: string) => {\n      if (props.text === undefined) return fallback;\n\n      return props.text;\n    },\n    [props.text]\n  );\n\n  /**\n   * Store text input focus status when keyboard hide to retrieve\n   * it afterwards if needed.\n   * `onKeyboardWillHide` may be called twice in sequence so we\n   * make a guard condition (eg. showing image picker)\n   */\n  const handleTextInputFocusWhenKeyboardHide = useCallback(() => {\n    if (!isTextInputWasFocused.current)\n      isTextInputWasFocused.current =\n        textInputRef.current?.isFocused() || false;\n  }, [textInputRef]);\n\n  /**\n   * Refocus the text input only if it was focused before showing keyboard.\n   * This is needed in some cases (eg. showing image picker).\n   */\n  const handleTextInputFocusWhenKeyboardShow = useCallback(() => {\n    if (\n      textInputRef.current &&\n      isTextInputWasFocused.current &&\n      !textInputRef.current.isFocused()\n    )\n      textInputRef.current.focus();\n\n    // Reset the indicator since the keyboard is shown\n    isTextInputWasFocused.current = false;\n  }, [textInputRef]);\n\n  const disableTyping = useCallback(() => {\n    clearTimeout(debounceEnableTypingTimeoutId.current);\n    setIsTypingDisabled(true);\n  }, []);\n\n  const enableTyping = useCallback(() => {\n    clearTimeout(debounceEnableTypingTimeoutId.current);\n    setIsTypingDisabled(false);\n  }, []);\n\n  const debounceEnableTyping = useCallback(() => {\n    clearTimeout(debounceEnableTypingTimeoutId.current);\n    debounceEnableTypingTimeoutId.current = setTimeout(() => {\n      enableTyping();\n    }, 50);\n  }, [enableTyping]);\n\n  const scrollToBottom = useCallback(\n    (isAnimated = true) => {\n      if (!messageContainerRef?.current) return;\n\n      if (inverted) {\n        messageContainerRef.current.scrollToOffset({\n          offset: 0,\n          animated: isAnimated,\n        });\n        return;\n      }\n\n      messageContainerRef.current.scrollToEnd({ animated: isAnimated });\n    },\n    [inverted, messageContainerRef]\n  );\n\n  const handlePressFile = useCallback((file: FileMessage) => {\n    const type = file?.typeFile;\n    switch (type) {\n      case 'video':\n        setFileSelected({\n          uri: file.uri,\n        });\n        setTimeout(() => {\n          setIsShowVideoModal(true);\n        }, 100);\n        break;\n      case 'image':\n        setFileSelected({\n          uri: file.uri,\n        });\n        setTimeout(() => {\n          setIsImageViewerVisible(true);\n        }, 100);\n        break;\n      default:\n        console.log('unknown');\n        break;\n    }\n  }, []);\n\n  const renderMessages = useMemo(() => {\n    if (!isInitialized) return null;\n\n    const { messagesContainerStyle, ...messagesContainerProps } = props;\n\n    return (\n      <View style={[stylesCommon.fill, messagesContainerStyle]}>\n        <MessageContainer<TMessage>\n          {...messagesContainerProps}\n          invertibleScrollViewProps={{\n            inverted,\n            keyboardShouldPersistTaps,\n          }}\n          messages={arrMessage}\n          forwardRef={messageContainerRef}\n          isTyping={isTyping}\n          onLongPressReaction={(message, position) => {\n            setMessageSelected({\n              message,\n              position,\n            });\n            setTimeout(() => {\n              setIsModalReaction(true);\n            }, 100);\n          }}\n          onPressFile={(\n            file: FileMessage,\n            isShowAll?: boolean,\n            arrMedia?: IMessage\n          ) => {\n            if (isShowAll) {\n              setFileMediaAllLocal(arrMedia || ({} as IMessage));\n              setTimeout(() => {\n                setIsMediaAllShow(true);\n              }, 100);\n              return;\n            }\n            handlePressFile(file);\n          }}\n        />\n        {renderChatFooter?.()}\n      </View>\n    );\n  }, [\n    isInitialized,\n    isTyping,\n    arrMessage,\n    props,\n    inverted,\n    keyboardShouldPersistTaps,\n    messageContainerRef,\n    renderChatFooter,\n    handlePressFile,\n  ]);\n\n  const notifyInputTextReset = useCallback(() => {\n    onInputTextChanged?.('');\n  }, [onInputTextChanged]);\n\n  const resetInputToolbar = useCallback(() => {\n    textInputRef.current?.clear();\n\n    notifyInputTextReset();\n\n    setComposerHeight(minComposerHeight!);\n    setText(getTextFromProp(''));\n    enableTyping();\n  }, [\n    minComposerHeight,\n    getTextFromProp,\n    textInputRef,\n    notifyInputTextReset,\n    enableTyping,\n  ]);\n\n  const _onSend = useCallback(\n    // eslint-disable-next-line @typescript-eslint/no-shadow\n    (messages: TMessage[] = [], shouldResetInputToolbar = false) => {\n      if (!Array.isArray(messages)) messages = [messages];\n\n      if (!messages[0]?.text && fileMedia?.length <= 0) return;\n\n      const newMessages: TMessage[] = messages.map((message) => {\n        return {\n          ...message,\n          user: user!,\n          createdAt: new Date(),\n          _id: messageIdGenerator?.(),\n          file: fileMedia,\n        };\n      });\n\n      if (shouldResetInputToolbar === true) {\n        disableTyping();\n        resetInputToolbar();\n      }\n\n      setFileMedia([]);\n      onSend?.(newMessages);\n\n      setTimeout(() => scrollToBottom(), 10);\n    },\n    [\n      onSend,\n      user,\n      messageIdGenerator,\n      fileMedia,\n      disableTyping,\n      resetInputToolbar,\n      scrollToBottom,\n    ]\n  );\n\n  const onInputSizeChanged = useCallback(\n    (size: { height: number }) => {\n      const newComposerHeight = Math.max(\n        minComposerHeight!,\n        Math.min(maxComposerHeight!, size.height)\n      );\n\n      setComposerHeight(newComposerHeight);\n    },\n    [maxComposerHeight, minComposerHeight]\n  );\n\n  const _onInputTextChanged = useCallback(\n    (_text: string) => {\n      if (isTypingDisabled) return;\n\n      onInputTextChanged?.(_text);\n\n      // Only set state if it's not being overridden by a prop.\n      if (props.text === undefined) setText(_text);\n    },\n    [onInputTextChanged, isTypingDisabled, props.text]\n  );\n\n  const onPressPickMedia = useCallback(\n    async (type: 'camera' | 'pick') => {\n      if (type === 'camera') {\n        setIsShowCameraModal(true);\n      } else {\n        const result = await ImageCropPicker.openPicker({\n          multiple: true,\n        });\n        const fileMediaAll = result?.map((item) => {\n          const uri =\n            Platform.OS === 'android' ? `file://${item.path}` : item.sourceURL;\n\n          return {\n            uri: uri,\n            id: dayjs().valueOf().toString() + item?.filename,\n            size: item?.size || 0,\n            name: item?.filename || '',\n            fileExtension: `.${uri?.split('.').pop()}` || '',\n            typeFile: 'image',\n            thumbnailPreview: uri,\n            width: item?.width,\n            height: item?.height,\n          };\n        });\n\n        setFileMedia([...fileMedia, ...fileMediaAll] as FileMessage[]);\n      }\n    },\n    [fileMedia]\n  );\n\n  const onInitialLayoutViewLayout = useCallback(\n    (e: LayoutChangeEvent) => {\n      if (isInitialized) return;\n\n      const { layout } = e.nativeEvent;\n\n      if (layout.height <= 0) return;\n\n      notifyInputTextReset();\n\n      setIsInitialized(true);\n      setComposerHeight(minComposerHeight!);\n      setText(getTextFromProp(initialText));\n    },\n    [\n      isInitialized,\n      initialText,\n      minComposerHeight,\n      notifyInputTextReset,\n      getTextFromProp,\n    ]\n  );\n\n  const inputToolbarFragment = useMemo(() => {\n    if (!isInitialized) return null;\n\n    const inputToolbarProps = {\n      ...props,\n      text: getTextFromProp(text!),\n      composerHeight: Math.max(minComposerHeight!, composerHeight),\n      onSend: _onSend,\n      onInputSizeChanged,\n      onTextChanged: _onInputTextChanged,\n      textInputProps: {\n        ...textInputProps,\n        ref: textInputRef,\n        maxLength: isTypingDisabled ? 0 : maxInputLength,\n      },\n    };\n\n    if (renderInputToolbar) return renderInputToolbar(inputToolbarProps);\n\n    return (\n      <InputToolbar\n        onFocusInput={onFocusInput}\n        onBlurInput={onBlurInput}\n        labelReaction={labelReaction}\n        messageReaction={messageReaction as IMessage & { isReply: boolean }}\n        clearMessageReaction={() => setMessageReaction(null)}\n        onRemoveFile={(file: FileMessage) => {\n          const newFileMedia = fileMedia.filter((item) => item.id !== file.id);\n          setFileMedia(newFileMedia);\n        }}\n        onPressFile={(file: FileMessage) => {\n          handlePressFile(file);\n        }}\n        fileMedia={fileMedia}\n        onPressPickMedia={onPressPickMedia}\n        {...inputToolbarProps}\n      />\n    );\n  }, [\n    isInitialized,\n    _onSend,\n    getTextFromProp,\n    maxInputLength,\n    minComposerHeight,\n    onInputSizeChanged,\n    props,\n    text,\n    renderInputToolbar,\n    composerHeight,\n    isTypingDisabled,\n    textInputRef,\n    textInputProps,\n    _onInputTextChanged,\n    onPressPickMedia,\n    fileMedia,\n    handlePressFile,\n    messageReaction,\n    labelReaction,\n    onFocusInput,\n    onBlurInput,\n  ]);\n\n  const handleReactionEmoji = useCallback(\n    (emoji: string, messageId: string) => {\n      const newArrMessage = arrMessage?.map((item) => {\n        if (item?._id?.toString() === messageId) {\n          return { ...item, reactionEmoji: emoji };\n        }\n        return item;\n      });\n      setArrMessage(newArrMessage);\n      onReactionEmoji?.(emoji, messageId);\n    },\n    [arrMessage, onReactionEmoji]\n  );\n\n  const handleActionReaction = useCallback(\n    (message: IMessage, action: string) => {\n      switch (action) {\n        case 'reply':\n          setMessageReaction({ ...message, isReply: true });\n          break;\n        case 'copy':\n          Clipboard.setString(message.text || '');\n          break;\n        case 'other':\n          // setMessageReaction({ ...message, isOther: true });\n          break;\n        default:\n          setMessageReaction(null);\n      }\n    },\n    []\n  );\n\n  const contextValues = useMemo(\n    () => ({\n      actionSheet:\n        actionSheet ||\n        (() => ({\n          showActionSheetWithOptions:\n            actionSheetRef.current!.showActionSheetWithOptions,\n        })),\n      getLocale: () => locale,\n    }),\n    [actionSheet, locale]\n  );\n\n  useEffect(() => {\n    if (props.text != null) setText(props.text);\n  }, [props.text]);\n\n  useEffect(() => {\n    setArrMessage(messages);\n  }, [messages]);\n\n  useAnimatedReaction(\n    () => -keyboard.height.value,\n    (value, prevValue) => {\n      if (prevValue !== null && value !== prevValue) {\n        const isKeyboardMovingUp = value > prevValue;\n        if (isKeyboardMovingUp !== trackingKeyboardMovement.value) {\n          trackingKeyboardMovement.value = isKeyboardMovingUp;\n          keyboardOffsetBottom.value = withTiming(\n            isKeyboardMovingUp ? bottomOffset : 0,\n            {\n              // If `bottomOffset` exists, we change the duration to a smaller value to fix the delay in the keyboard animation speed\n              duration: bottomOffset ? 150 : 400,\n            }\n          );\n\n          if (focusOnInputWhenOpeningKeyboard)\n            if (isKeyboardMovingUp)\n              runOnJS(handleTextInputFocusWhenKeyboardShow)();\n            else runOnJS(handleTextInputFocusWhenKeyboardHide)();\n\n          if (value === 0) {\n            runOnJS(enableTyping)();\n          } else {\n            runOnJS(disableTyping)();\n            runOnJS(debounceEnableTyping)();\n          }\n        }\n      }\n    },\n    [\n      keyboard,\n      trackingKeyboardMovement,\n      focusOnInputWhenOpeningKeyboard,\n      handleTextInputFocusWhenKeyboardHide,\n      handleTextInputFocusWhenKeyboardShow,\n      enableTyping,\n      disableTyping,\n      debounceEnableTyping,\n      bottomOffset,\n    ]\n  );\n\n  return (\n    <GiftedChatContext.Provider value={contextValues}>\n      <ActionSheetProvider ref={actionSheetRef}>\n        <View\n          testID={TEST_ID.WRAPPER}\n          style={[stylesCommon.fill, styles.contentContainer]}\n          onLayout={onInitialLayoutViewLayout}\n        >\n          {isInitialized ? (\n            <Animated.View\n              style={[\n                stylesCommon.fill,\n                isKeyboardInternallyHandled && contentStyleAnim,\n              ]}\n            >\n              {renderMessages}\n              {inputToolbarFragment}\n              <View style={{ position: 'absolute', bottom: 0 }}>\n                <ImageView\n                  images={fileSelected ? [{ uri: fileSelected.uri }] : []}\n                  imageIndex={0}\n                  visible={isImageViewerVisible}\n                  onRequestClose={() => setIsImageViewerVisible(false)}\n                />\n                <VideoModal\n                  visible={isShowVideoModal}\n                  onClose={() => setIsShowVideoModal(false)}\n                  subtitle={{}}\n                  source={fileSelected?.uri || ''}\n                  autoPlay={true}\n                />\n                <MessageWithReaction\n                  onReactionEmoji={handleReactionEmoji}\n                  onActionReaction={handleActionReaction}\n                  user={user as User}\n                  isVisible={isModalReaction}\n                  onClose={() => setIsModalReaction(false)}\n                  message={messageSelected?.message || ({} as TMessage)}\n                  position={messageSelected?.position || ({} as any)}\n                />\n                <MediaAllShow\n                  fileMediaAll={fileMediaAllLocal}\n                  isVisible={isMediaAllShow}\n                  onClose={() => setIsMediaAllShow(false)}\n                  onPressFile={(file) => {\n                    setIsMediaAllShow(false);\n                    setTimeout(() => {\n                      handlePressFile(file);\n                    }, 350);\n                  }}\n                />\n                <CameraModal\n                  onVideoRecorded={async (video) => {\n                    const getThumbnail = await generateThumbnails([\n                      {\n                        uri: video.path,\n                        id: dayjs().valueOf().toString(),\n                        size: video?.size || 0,\n                      },\n                    ]);\n\n                    setIsShowCameraModal(false);\n                    const videoFile = {\n                      uri: video.path,\n                      id: dayjs().valueOf().toString(),\n                      size: video?.size || 0,\n                      name:\n                        video?.path?.split('/').pop() ||\n                        `video - ${dayjs().valueOf().toString()}`,\n                      fileExtension: `.${video?.path?.split('.').pop()}`,\n                      typeFile: 'video',\n                      width: video?.width,\n                      height: video?.height,\n                      duration: video?.duration,\n                      thumbnailPreview: getThumbnail[0]?.path || '',\n                    };\n                    setFileMedia([...fileMedia, videoFile as FileMessage]);\n                  }}\n                  onPhotoCaptured={(photo) => {\n                    setIsShowCameraModal(false);\n                    const img = {\n                      uri: photo.path,\n                      id: dayjs().valueOf().toString(),\n                      size: photo?.size || 0,\n                      name:\n                        photo?.path?.split('/').pop() ||\n                        `image - ${dayjs().valueOf().toString()}`,\n                      fileExtension: `.${photo?.path?.split('.').pop()}`,\n                      typeFile: 'image',\n                      thumbnailPreview: photo?.path || '',\n                      width: photo?.width,\n                      height: photo?.height,\n                    };\n                    setFileMedia([...fileMedia, img as FileMessage]);\n                  }}\n                  visible={isShowCameraModal}\n                  onClose={() => setIsShowCameraModal(false)}\n                />\n              </View>\n            </Animated.View>\n          ) : (\n            renderLoading?.()\n          )}\n        </View>\n      </ActionSheetProvider>\n    </GiftedChatContext.Provider>\n  );\n}\n\nfunction GiftedChatWrapper<TMessage extends IMessage = IMessage>(\n  props: GiftedChatProps<TMessage>\n) {\n  return (\n    <KeyboardProvider>\n      <GiftedChat<TMessage> {...props} />\n    </KeyboardProvider>\n  );\n}\n\nGiftedChatWrapper.append = <TMessage extends IMessage>(\n  currentMessages: TMessage[] = [],\n  messages: TMessage[],\n  inverted = true\n) => {\n  if (!Array.isArray(messages)) messages = [messages];\n\n  return inverted\n    ? messages.concat(currentMessages)\n    : currentMessages.concat(messages);\n};\n\nGiftedChatWrapper.prepend = <TMessage extends IMessage>(\n  currentMessages: TMessage[] = [],\n  messages: TMessage[],\n  inverted = true\n) => {\n  if (!Array.isArray(messages)) messages = [messages];\n\n  return inverted\n    ? currentMessages.concat(messages)\n    : messages.concat(currentMessages);\n};\n\nexport * from '../types';\n\nexport {\n  GiftedChatWrapper as GiftedChat,\n  Actions,\n  Avatar,\n  Bubble,\n  SystemMessage,\n  MessageText,\n  Composer,\n  Day,\n  InputToolbar,\n  LoadEarlier,\n  Message,\n  MessageContainer,\n  Send,\n  Time,\n  GiftedAvatar,\n  utils,\n};\n"],"mappings":"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","ignoreList":[]}